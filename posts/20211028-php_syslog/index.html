<!doctype html><html lang=zh dir=auto data-theme=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3988508441804851" crossorigin=anonymous></script><title>PHP程序如何发送syslog到远程服务器 | 八戒的技术博客</title>
<meta name=keywords content><meta name=description content="给同事做了个 PHP 接口，转发发送短信的请求，同时要把发送记录发送到远程的 cacti 的 syslog 去
很简单，但是也不简单
首先是 PHP 服务器，是最简化编译的，php  -m 查了一下
php -m
[PHP Modules]
Core
ctype
curl
date
dom
fileinfo
filter
gettext
hash
iconv
json
libxml
openssl
pcre
PDO
pdo_sqlite
Phar
posix
Reflection
session
SimpleXML
SPL
sqlite3
standard
tokenizer
xml
xmlreader
xmlwriter

[Zend Modules]
居然没有 socket 模块，没办法，找到源代码，编译一个安装，原有的 php 安装路径是 /export/servers/php
$ tar zxvf php-7.4.0.tar.gz 
$ cd php-7.4.0/sockets
$ /export/servers/php/bin/phpize
$ ./configure --enable-sockets --with-php-config=/export/servers/php/bin/php-config
$ make
$ make install
又看了一眼，是 php-fpm，居然没有 php.ini ，得，再生成一个，放在 /export/servers/php/lib/php.ini"><meta name=author content="八戒"><link rel=canonical href=https://rendoumi.com/posts/20211028-php_syslog/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.5d8a858b4ad07d913988e10d3c3dbc8c171f45316a396de8a60d67f44840812d.css integrity="sha256-XYqFi0rQfZE5iOENPD28jBcfRTFqOW3opg1n9EhAgS0=" rel="preload stylesheet" as=style><link rel=icon href=https://rendoumi.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://rendoumi.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://rendoumi.com/favicon-32x32.png><link rel=apple-touch-icon href=https://rendoumi.com/apple-touch-icon.png><link rel=mask-icon href=https://rendoumi.com/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh href=https://rendoumi.com/posts/20211028-php_syslog/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51);color-scheme:dark}.list{background:var(--theme)}.toc{background:var(--entry)}}@media(prefers-color-scheme:light){.list::-webkit-scrollbar-thumb{border-color:var(--code-bg)}}</style></noscript><script>window.matchMedia("(prefers-color-scheme: dark)").matches?document.querySelector("html").dataset.theme="dark":document.querySelector("html").dataset.theme="light"</script><meta property="og:url" content="https://rendoumi.com/posts/20211028-php_syslog/"><meta property="og:site_name" content="八戒的技术博客"><meta property="og:title" content="PHP程序如何发送syslog到远程服务器"><meta property="og:description" content="给同事做了个 PHP 接口，转发发送短信的请求，同时要把发送记录发送到远程的 cacti 的 syslog 去
很简单，但是也不简单
首先是 PHP 服务器，是最简化编译的，php -m 查了一下
php -m [PHP Modules] Core ctype curl date dom fileinfo filter gettext hash iconv json libxml openssl pcre PDO pdo_sqlite Phar posix Reflection session SimpleXML SPL sqlite3 standard tokenizer xml xmlreader xmlwriter [Zend Modules] 居然没有 socket 模块，没办法，找到源代码，编译一个安装，原有的 php 安装路径是 /export/servers/php
$ tar zxvf php-7.4.0.tar.gz $ cd php-7.4.0/sockets $ /export/servers/php/bin/phpize $ ./configure --enable-sockets --with-php-config=/export/servers/php/bin/php-config $ make $ make install 又看了一眼，是 php-fpm，居然没有 php.ini ，得，再生成一个，放在 /export/servers/php/lib/php.ini"><meta property="og:locale" content="zh"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-10-28T09:30:11+08:00"><meta property="article:modified_time" content="2021-10-28T09:30:11+08:00"><meta property="og:image" content="https://rendoumi.com/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://rendoumi.com/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="PHP程序如何发送syslog到远程服务器"><meta name=twitter:description content="给同事做了个 PHP 接口，转发发送短信的请求，同时要把发送记录发送到远程的 cacti 的 syslog 去
很简单，但是也不简单
首先是 PHP 服务器，是最简化编译的，php  -m 查了一下
php -m
[PHP Modules]
Core
ctype
curl
date
dom
fileinfo
filter
gettext
hash
iconv
json
libxml
openssl
pcre
PDO
pdo_sqlite
Phar
posix
Reflection
session
SimpleXML
SPL
sqlite3
standard
tokenizer
xml
xmlreader
xmlwriter

[Zend Modules]
居然没有 socket 模块，没办法，找到源代码，编译一个安装，原有的 php 安装路径是 /export/servers/php
$ tar zxvf php-7.4.0.tar.gz 
$ cd php-7.4.0/sockets
$ /export/servers/php/bin/phpize
$ ./configure --enable-sockets --with-php-config=/export/servers/php/bin/php-config
$ make
$ make install
又看了一眼，是 php-fpm，居然没有 php.ini ，得，再生成一个，放在 /export/servers/php/lib/php.ini"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"所有文章","item":"https://rendoumi.com/posts/"},{"@type":"ListItem","position":2,"name":"PHP程序如何发送syslog到远程服务器","item":"https://rendoumi.com/posts/20211028-php_syslog/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"PHP程序如何发送syslog到远程服务器","name":"PHP程序如何发送syslog到远程服务器","description":"给同事做了个 PHP 接口，转发发送短信的请求，同时要把发送记录发送到远程的 cacti 的 syslog 去\n很简单，但是也不简单\n首先是 PHP 服务器，是最简化编译的，php -m 查了一下\nphp -m [PHP Modules] Core ctype curl date dom fileinfo filter gettext hash iconv json libxml openssl pcre PDO pdo_sqlite Phar posix Reflection session SimpleXML SPL sqlite3 standard tokenizer xml xmlreader xmlwriter [Zend Modules] 居然没有 socket 模块，没办法，找到源代码，编译一个安装，原有的 php 安装路径是 /export/servers/php\n$ tar zxvf php-7.4.0.tar.gz $ cd php-7.4.0/sockets $ /export/servers/php/bin/phpize $ ./configure --enable-sockets --with-php-config=/export/servers/php/bin/php-config $ make $ make install 又看了一眼，是 php-fpm，居然没有 php.ini ，得，再生成一个，放在 /export/servers/php/lib/php.ini\n","keywords":[],"articleBody":"给同事做了个 PHP 接口，转发发送短信的请求，同时要把发送记录发送到远程的 cacti 的 syslog 去\n很简单，但是也不简单\n首先是 PHP 服务器，是最简化编译的，php -m 查了一下\nphp -m [PHP Modules] Core ctype curl date dom fileinfo filter gettext hash iconv json libxml openssl pcre PDO pdo_sqlite Phar posix Reflection session SimpleXML SPL sqlite3 standard tokenizer xml xmlreader xmlwriter [Zend Modules] 居然没有 socket 模块，没办法，找到源代码，编译一个安装，原有的 php 安装路径是 /export/servers/php\n$ tar zxvf php-7.4.0.tar.gz $ cd php-7.4.0/sockets $ /export/servers/php/bin/phpize $ ./configure --enable-sockets --with-php-config=/export/servers/php/bin/php-config $ make $ make install 又看了一眼，是 php-fpm，居然没有 php.ini ，得，再生成一个，放在 /export/servers/php/lib/php.ini\nextension_dir = \"/export/servers/php740/lib/php/extensions/no-debug-non-zts-20190902/\" extension = sockets.so 然后重启 php-fpm ，重新 php -m 检查，发现有 socket 模块就 ok 了。\n接下来就是 php 源代码了\n\u003c?php date_default_timezone_set('Asia/Shanghai'); function send_remote_syslog($message) { $sock = socket_create(AF_INET, SOCK_DGRAM, SOL_UDP); foreach(explode(\"\\n\", $message) as $line) { $syslog_message = \"\u003c22\u003e\" . date('M d H:i:s ') . 'Qi_an_xin sms_log: ' . $line; socket_sendto($sock, $syslog_message, strlen($syslog_message), 0, '172.18.31.6', 514); } socket_close($sock); } send_remote_syslog(\"ABC 验证码: 39792192\"); ?\u003e 这样就可以了，上面代码比较难理解的是\u003c22\u003e，那是报错级别的计算方法，Facility + Severity：\n* Facility values: * 0 kernel messages * 1 user-level messages * 2 mail system * 3 system daemons * 4 security/authorization messages * 5 messages generated internally by syslogd * 6 line printer subsystem * 7 network news subsystem * 8 UUCP subsystem * 9 clock daemon * 10 security/authorization messages * 11 FTP daemon * 12 NTP subsystem * 13 log audit * 14 log alert * 15 clock daemon * 16 local user 0 (local0) (default value) * 17 local user 1 (local1) * 18 local user 2 (local2) * 19 local user 3 (local3) * 20 local user 4 (local4) * 21 local user 5 (local5) * 22 local user 6 (local6) * 23 local user 7 (local7) * * Severity values: * 0 Emergency: system is unusable * 1 Alert: action must be taken immediately * 2 Critical: critical conditions * 3 Error: error conditions * 4 Warning: warning conditions * 5 Notice: normal but significant condition (default value) * 6 Informational: informational messages * 7 Debug: debug-level messages 计算方法就是 （facility*8 + severity），这里的22+0，可以理解成 local6 ，就是级别6\n如果发了一个 “local use 4” 和 Serverity = 5 的消息，那么就是 20×8+5=165 ，包头就是 \u003c165\u003e\n","wordCount":"332","inLanguage":"zh","image":"https://rendoumi.com/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"2021-10-28T09:30:11+08:00","dateModified":"2021-10-28T09:30:11+08:00","author":{"@type":"Person","name":"八戒"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://rendoumi.com/posts/20211028-php_syslog/"},"publisher":{"@type":"Organization","name":"八戒的技术博客","logo":{"@type":"ImageObject","url":"https://rendoumi.com/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://rendoumi.com/ accesskey=h title="Home (Alt + H)"><img src=https://rendoumi.com/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches></div></div><ul id=menu><li><a href=https://rendoumi.com/ title=首页><span>首页</span></a></li><li><a href=https://rendoumi.com/posts/ title=文章><span>文章</span></a></li><li><a href=https://rendoumi.com/archives/ title=归档><span>归档</span></a></li><li><a href=https://blog.rendoumi.com title=生活><span>生活</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=https://rendoumi.com/search/ title=搜索><span>搜索</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://rendoumi.com/>主页</a>&nbsp;»&nbsp;<a href=https://rendoumi.com/posts/>所有文章</a></div><h1 class="post-title entry-hint-parent">PHP程序如何发送syslog到远程服务器
<span class=entry-hint title=Draft><svg height="35" viewBox="0 -960 960 960" fill="currentcolor"><path d="M160-410v-60h3e2v60H160zm0-165v-60h470v60H160zm0-165v-60h470v60H160zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22-4.5 22.5T862.09-380L643-160H520zm3e2-263-37-37 37 37zM580-220h38l121-122-18-19-19-18-122 121v38zm141-141-19-18 37 37-18-19z"/></svg></span></h1><div class=post-meta><span title='2021-10-28 09:30:11 +0800 CST'>2021年28月</span>&nbsp;·&nbsp;<span>2 分钟</span>&nbsp;·&nbsp;<span>332 字</span>&nbsp;·&nbsp;<span>八戒</span></div></header><div class=post-content><p>给同事做了个 PHP 接口，转发发送短信的请求，同时要把发送记录发送到远程的 cacti 的 syslog 去</p><p>很简单，但是也不简单</p><p>首先是 PHP 服务器，是最简化编译的，php -m 查了一下</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ini data-lang=ini><span class=line><span class=cl><span class=na>php -m</span>
</span></span><span class=line><span class=cl><span class=k>[PHP Modules]</span>
</span></span><span class=line><span class=cl><span class=na>Core</span>
</span></span><span class=line><span class=cl><span class=na>ctype</span>
</span></span><span class=line><span class=cl><span class=na>curl</span>
</span></span><span class=line><span class=cl><span class=na>date</span>
</span></span><span class=line><span class=cl><span class=na>dom</span>
</span></span><span class=line><span class=cl><span class=na>fileinfo</span>
</span></span><span class=line><span class=cl><span class=na>filter</span>
</span></span><span class=line><span class=cl><span class=na>gettext</span>
</span></span><span class=line><span class=cl><span class=na>hash</span>
</span></span><span class=line><span class=cl><span class=na>iconv</span>
</span></span><span class=line><span class=cl><span class=na>json</span>
</span></span><span class=line><span class=cl><span class=na>libxml</span>
</span></span><span class=line><span class=cl><span class=na>openssl</span>
</span></span><span class=line><span class=cl><span class=na>pcre</span>
</span></span><span class=line><span class=cl><span class=na>PDO</span>
</span></span><span class=line><span class=cl><span class=na>pdo_sqlite</span>
</span></span><span class=line><span class=cl><span class=na>Phar</span>
</span></span><span class=line><span class=cl><span class=na>posix</span>
</span></span><span class=line><span class=cl><span class=na>Reflection</span>
</span></span><span class=line><span class=cl><span class=na>session</span>
</span></span><span class=line><span class=cl><span class=na>SimpleXML</span>
</span></span><span class=line><span class=cl><span class=na>SPL</span>
</span></span><span class=line><span class=cl><span class=na>sqlite3</span>
</span></span><span class=line><span class=cl><span class=na>standard</span>
</span></span><span class=line><span class=cl><span class=na>tokenizer</span>
</span></span><span class=line><span class=cl><span class=na>xml</span>
</span></span><span class=line><span class=cl><span class=na>xmlreader</span>
</span></span><span class=line><span class=cl><span class=na>xmlwriter</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>[Zend Modules]</span>
</span></span></code></pre></div><p>居然没有 socket 模块，没办法，找到源代码，编译一个安装，原有的 php 安装路径是 /export/servers/php</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-shell data-lang=shell><span class=line><span class=cl>$ tar zxvf php-7.4.0.tar.gz 
</span></span><span class=line><span class=cl>$ <span class=nb>cd</span> php-7.4.0/sockets
</span></span><span class=line><span class=cl>$ /export/servers/php/bin/phpize
</span></span><span class=line><span class=cl>$ ./configure --enable-sockets --with-php-config<span class=o>=</span>/export/servers/php/bin/php-config
</span></span><span class=line><span class=cl>$ make
</span></span><span class=line><span class=cl>$ make install
</span></span></code></pre></div><p>又看了一眼，是 php-fpm，居然没有 php.ini ，得，再生成一个，放在 /export/servers/php/lib/php.ini</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ini data-lang=ini><span class=line><span class=cl><span class=na>extension_dir</span> <span class=o>=</span> <span class=s>&#34;/export/servers/php740/lib/php/extensions/no-debug-non-zts-20190902/&#34;</span>
</span></span><span class=line><span class=cl><span class=na>extension</span> <span class=o>=</span> <span class=s>sockets.so</span>
</span></span></code></pre></div><p>然后重启 php-fpm ，重新 php -m 检查，发现有 socket 模块就 ok 了。</p><p>接下来就是 php 源代码了</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-php data-lang=php><span class=line><span class=cl><span class=o>&lt;?</span><span class=nx>php</span>
</span></span><span class=line><span class=cl><span class=nx>date_default_timezone_set</span><span class=p>(</span><span class=s1>&#39;Asia/Shanghai&#39;</span><span class=p>);</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>function</span> <span class=nf>send_remote_syslog</span><span class=p>(</span><span class=nv>$message</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>    <span class=nv>$sock</span> <span class=o>=</span> <span class=nx>socket_create</span><span class=p>(</span><span class=nx>AF_INET</span><span class=p>,</span> <span class=nx>SOCK_DGRAM</span><span class=p>,</span> <span class=nx>SOL_UDP</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=k>foreach</span><span class=p>(</span><span class=nx>explode</span><span class=p>(</span><span class=s2>&#34;</span><span class=se>\n</span><span class=s2>&#34;</span><span class=p>,</span> <span class=nv>$message</span><span class=p>)</span> <span class=k>as</span> <span class=nv>$line</span><span class=p>)</span> <span class=p>{</span>
</span></span><span class=line><span class=cl>      <span class=nv>$syslog_message</span> <span class=o>=</span> <span class=s2>&#34;&lt;22&gt;&#34;</span> <span class=o>.</span> <span class=nx>date</span><span class=p>(</span><span class=s1>&#39;M d H:i:s &#39;</span><span class=p>)</span> <span class=o>.</span> <span class=s1>&#39;Qi_an_xin sms_log: &#39;</span> <span class=o>.</span> <span class=nv>$line</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=nx>socket_sendto</span><span class=p>(</span><span class=nv>$sock</span><span class=p>,</span> <span class=nv>$syslog_message</span><span class=p>,</span> <span class=nx>strlen</span><span class=p>(</span><span class=nv>$syslog_message</span><span class=p>),</span> <span class=mi>0</span><span class=p>,</span> <span class=s1>&#39;172.18.31.6&#39;</span><span class=p>,</span> <span class=mi>514</span><span class=p>);</span>
</span></span><span class=line><span class=cl>    <span class=p>}</span>
</span></span><span class=line><span class=cl>    <span class=nx>socket_close</span><span class=p>(</span><span class=nv>$sock</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=p>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nx>send_remote_syslog</span><span class=p>(</span><span class=s2>&#34;ABC 验证码: 39792192&#34;</span><span class=p>);</span>
</span></span><span class=line><span class=cl><span class=cp>?&gt;</span><span class=err>    
</span></span></span></code></pre></div><p>这样就可以了，上面代码比较难理解的是&lt;22>，那是报错级别的计算方法，Facility + Severity：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-ini data-lang=ini><span class=line><span class=cl> <span class=na>*   Facility values:</span>
</span></span><span class=line><span class=cl> <span class=na>*      0 kernel messages</span>
</span></span><span class=line><span class=cl> <span class=na>*      1 user-level messages</span>
</span></span><span class=line><span class=cl> <span class=na>*      2 mail system</span>
</span></span><span class=line><span class=cl> <span class=na>*      3 system daemons</span>
</span></span><span class=line><span class=cl> <span class=na>*      4 security/authorization messages</span>
</span></span><span class=line><span class=cl> <span class=na>*      5 messages generated internally by syslogd</span>
</span></span><span class=line><span class=cl> <span class=na>*      6 line printer subsystem</span>
</span></span><span class=line><span class=cl> <span class=na>*      7 network news subsystem</span>
</span></span><span class=line><span class=cl> <span class=na>*      8 UUCP subsystem</span>
</span></span><span class=line><span class=cl> <span class=na>*      9 clock daemon</span>
</span></span><span class=line><span class=cl> <span class=na>*     10 security/authorization messages</span>
</span></span><span class=line><span class=cl> <span class=na>*     11 FTP daemon</span>
</span></span><span class=line><span class=cl> <span class=na>*     12 NTP subsystem</span>
</span></span><span class=line><span class=cl> <span class=na>*     13 log audit</span>
</span></span><span class=line><span class=cl> <span class=na>*     14 log alert</span>
</span></span><span class=line><span class=cl> <span class=na>*     15 clock daemon</span>
</span></span><span class=line><span class=cl> <span class=na>*     16 local user 0 (local0) (default value)</span>
</span></span><span class=line><span class=cl> <span class=na>*     17 local user 1 (local1)</span>
</span></span><span class=line><span class=cl> <span class=na>*     18 local user 2 (local2)</span>
</span></span><span class=line><span class=cl> <span class=na>*     19 local user 3 (local3)</span>
</span></span><span class=line><span class=cl> <span class=na>*     20 local user 4 (local4)</span>
</span></span><span class=line><span class=cl> <span class=na>*     21 local user 5 (local5)</span>
</span></span><span class=line><span class=cl> <span class=na>*     22 local user 6 (local6)</span>
</span></span><span class=line><span class=cl> <span class=na>*     23 local user 7 (local7)</span>
</span></span><span class=line><span class=cl> <span class=na>*</span>
</span></span><span class=line><span class=cl> <span class=na>*   Severity values:</span>
</span></span><span class=line><span class=cl> <span class=na>*     0 Emergency: system is unusable</span>
</span></span><span class=line><span class=cl> <span class=na>*     1 Alert: action must be taken immediately</span>
</span></span><span class=line><span class=cl> <span class=na>*     2 Critical: critical conditions</span>
</span></span><span class=line><span class=cl> <span class=na>*     3 Error: error conditions</span>
</span></span><span class=line><span class=cl> <span class=na>*     4 Warning: warning conditions</span>
</span></span><span class=line><span class=cl> <span class=na>*     5 Notice: normal but significant condition (default value)</span>
</span></span><span class=line><span class=cl> <span class=na>*     6 Informational: informational messages</span>
</span></span><span class=line><span class=cl> <span class=na>*     7 Debug: debug-level messages</span>
</span></span></code></pre></div><p>计算方法就是 （facility*8 + severity），这里的22+0，可以理解成 local6 ，就是级别6</p><p><img alt=image-20211028114512589 loading=lazy src=/posts/20211028-php_syslog/image-20211028114512589.png></p><p>如果发了一个 &ldquo;local use 4&rdquo; 和 Serverity = 5 的消息，那么就是 20×8+5=165 ，包头就是 &lt;165></p></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=https://rendoumi.com/posts/20211028-dockerfile/><span class=title>« 上一页</span><br><span>Dockerfile的编写与调试技巧</span>
</a><a class=next href=https://rendoumi.com/posts/20211027-docker_extract_file/><span class=title>下一页 »</span><br><span>没有装Docker如何从镜像中释放出文件</span></a></nav></footer><div id=comments></div><script src=https://cwd.js.org/cwd.js></script><script>const comments=new CWDComments({el:"#comments",apiBaseUrl:"https://cwd.rendoumi.qzz.io"});comments.mount()</script></article></main><footer class=footer><span>Copyright © 2020-2025 Zhang Ranrui. All Rights Reserved.</span><br>·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script></body></html>