<!doctype html><html lang=zh dir=auto data-theme=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3988508441804851" crossorigin=anonymous></script><title>Xpath金手指 | 八戒的技术博客</title>
<meta name=keywords content><meta name=description content="最近在搞puppeteer的自动化，有很多地方需要用到CSS Selector，但是某些地方又是用Xpath方便，金手指放一下，备查：
Test queries in the Xpath test bed:

Xpath test bed (whitebeam.org)

Browser console
$x(&#34;//div&#34;)
Works in Firefox and Chrome.
#Selectors
Descendant selectors

  
      
          h1
          //h1
          
      
  
  
      
          div p
          `//div//p
          
      
      
          ul > li
          `//ul/li
          
      
      
          ul > li > a
          //ul/li/a
          
      
      
          div > *
          //div/*
          
      
      
          :root
          `/
          
      
      
          :root > body
          /body
          
      
  

Attribute selectors

  
      
          #id
          //*[@id=&#34;id&#34;]
          
      
  
  
      
          .class
          //*[@class=&#34;class&#34;] …kinda
          
      
      
          input[type=&#34;submit&#34;]
          //input[@type=&#34;submit&#34;]
          
      
      
          a#abc[for=&#34;xyz&#34;]
          `//a[@id=&ldquo;abc&rdquo;][@for=&ldquo;xyz&rdquo;]
          
      
      
          a[rel]
          //a[@rel]
          
      
      
          a[href^='/']
          `//a[starts-with(@href, &lsquo;/&rsquo;)]
          
      
      
          a[href$='pdf']
          //a[ends-with(@href, '.pdf')]
          
      
      
          a[href*='://']
          //a[contains(@href, '://')]
          
      
      
          a[rel~='help']
          //a[contains(@rel, 'help')] …kinda
          
      
  

Order selectors

  
      
          ul > li:first-of-type
          `//ul/li[1]
          
      
  
  
      
          ul > li:nth-of-type(2)
          //ul/li[2]
          
      
      
          ul > li:last-of-type
          //ul/li[last()]
          
      
      
          li#id:first-of-type
          `//li[1][@id=&ldquo;id&rdquo;]
          
      
      
          a:first-child
          //*[1][name()=&#34;a&#34;]
          
      
      
          a:last-child
          //*[last()][name()=&#34;a&#34;]
          
      
  

Siblings

  
      
          h1 ~ ul
          `//h1/following-sibling::ul
          
      
  
  
      
          h1 + ul
          //h1/following-sibling::ul[1]
          
      
      
          h1 ~ #id
          //h1/following-sibling::[@id=&#34;id&#34;]
          
      
  

jQuery

  
      
          $('ul > li').parent()
          `//ul/li/..
          
      
  
  
      
          $('li').closest('section')
          //li/ancestor-or-self::section
          
      
      
          $('a').attr('href')
          `//a/@href
          
      
      
          $('span').text()
          //span/text()
          
      
  

Other things

  
      
          h1:not([id])
          `//h1[not(@id)]
          
      
  
  
      
          Text match
          `//button[text()=&ldquo;Submit&rdquo;]
          
      
      
          Text match (substring)
          //button[contains(text(),&#34;Go&#34;)]
          
      
      
          Arithmetic
          //product[@price > 2.50]
          
      
      
          Has children
          //ul[*]
          
      
      
          Has children (specific)
          //ul[li]
          
      
      
          Or logic
          `//a[@name or @href]
          
      
      
          Union (joins results)
          `//a | //div
          
      
  

Class check
//div[contains(concat(' ',normalize-space(@class),' '),' foobar ')]
Xpath doesn’t have the “check if part of space-separated list” operator, so this is the workaround (source)."><meta name=author content="八戒"><link rel=canonical href=https://rendoumi.com/posts/20240122-xpath_css_selector/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.5d8a858b4ad07d913988e10d3c3dbc8c171f45316a396de8a60d67f44840812d.css integrity="sha256-XYqFi0rQfZE5iOENPD28jBcfRTFqOW3opg1n9EhAgS0=" rel="preload stylesheet" as=style><link rel=icon href=https://rendoumi.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://rendoumi.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://rendoumi.com/favicon-32x32.png><link rel=apple-touch-icon href=https://rendoumi.com/apple-touch-icon.png><link rel=mask-icon href=https://rendoumi.com/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh href=https://rendoumi.com/posts/20240122-xpath_css_selector/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51);color-scheme:dark}.list{background:var(--theme)}.toc{background:var(--entry)}}@media(prefers-color-scheme:light){.list::-webkit-scrollbar-thumb{border-color:var(--code-bg)}}</style></noscript><script>window.matchMedia("(prefers-color-scheme: dark)").matches?document.querySelector("html").dataset.theme="dark":document.querySelector("html").dataset.theme="light"</script><meta property="og:url" content="https://rendoumi.com/posts/20240122-xpath_css_selector/"><meta property="og:site_name" content="八戒的技术博客"><meta property="og:title" content="Xpath金手指"><meta property="og:description" content="最近在搞puppeteer的自动化，有很多地方需要用到CSS Selector，但是某些地方又是用Xpath方便，金手指放一下，备查：
Test queries in the Xpath test bed: Xpath test bed (whitebeam.org) Browser console $x(&#34;//div&#34;) Works in Firefox and Chrome.
#Selectors Descendant selectors h1 //h1 div p `//div//p ul > li `//ul/li ul > li > a //ul/li/a div > * //div/* :root `/ :root > body /body Attribute selectors #id //*[@id=&#34;id&#34;] .class //*[@class=&#34;class&#34;] …kinda input[type=&#34;submit&#34;] //input[@type=&#34;submit&#34;] a#abc[for=&#34;xyz&#34;] `//a[@id=“abc”][@for=“xyz”] a[rel] //a[@rel] a[href^='/'] `//a[starts-with(@href, ‘/’)] a[href$='pdf'] //a[ends-with(@href, '.pdf')] a[href*='://'] //a[contains(@href, '://')] a[rel~='help'] //a[contains(@rel, 'help')] …kinda Order selectors ul > li:first-of-type `//ul/li[1] ul > li:nth-of-type(2) //ul/li[2] ul > li:last-of-type //ul/li[last()] li#id:first-of-type `//li[1][@id=“id”] a:first-child //*[1][name()=&#34;a&#34;] a:last-child //*[last()][name()=&#34;a&#34;] Siblings h1 ~ ul `//h1/following-sibling::ul h1 + ul //h1/following-sibling::ul[1] h1 ~ #id //h1/following-sibling::[@id=&#34;id&#34;] jQuery $('ul > li').parent() `//ul/li/.. $('li').closest('section') //li/ancestor-or-self::section $('a').attr('href') `//a/@href $('span').text() //span/text() Other things h1:not([id]) `//h1[not(@id)] Text match `//button[text()=“Submit”] Text match (substring) //button[contains(text(),&#34;Go&#34;)] Arithmetic //product[@price > 2.50] Has children //ul[*] Has children (specific) //ul[li] Or logic `//a[@name or @href] Union (joins results) `//a | //div Class check //div[contains(concat(' ',normalize-space(@class),' '),' foobar ')] Xpath doesn’t have the “check if part of space-separated list” operator, so this is the workaround (source)."><meta property="og:locale" content="zh"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-01-22T09:10:11+08:00"><meta property="article:modified_time" content="2024-01-22T09:10:11+08:00"><meta property="og:image" content="https://rendoumi.com/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://rendoumi.com/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="Xpath金手指"><meta name=twitter:description content="最近在搞puppeteer的自动化，有很多地方需要用到CSS Selector，但是某些地方又是用Xpath方便，金手指放一下，备查：
Test queries in the Xpath test bed:

Xpath test bed (whitebeam.org)

Browser console
$x(&#34;//div&#34;)
Works in Firefox and Chrome.
#Selectors
Descendant selectors

  
      
          h1
          //h1
          
      
  
  
      
          div p
          `//div//p
          
      
      
          ul > li
          `//ul/li
          
      
      
          ul > li > a
          //ul/li/a
          
      
      
          div > *
          //div/*
          
      
      
          :root
          `/
          
      
      
          :root > body
          /body
          
      
  

Attribute selectors

  
      
          #id
          //*[@id=&#34;id&#34;]
          
      
  
  
      
          .class
          //*[@class=&#34;class&#34;] …kinda
          
      
      
          input[type=&#34;submit&#34;]
          //input[@type=&#34;submit&#34;]
          
      
      
          a#abc[for=&#34;xyz&#34;]
          `//a[@id=&ldquo;abc&rdquo;][@for=&ldquo;xyz&rdquo;]
          
      
      
          a[rel]
          //a[@rel]
          
      
      
          a[href^='/']
          `//a[starts-with(@href, &lsquo;/&rsquo;)]
          
      
      
          a[href$='pdf']
          //a[ends-with(@href, '.pdf')]
          
      
      
          a[href*='://']
          //a[contains(@href, '://')]
          
      
      
          a[rel~='help']
          //a[contains(@rel, 'help')] …kinda
          
      
  

Order selectors

  
      
          ul > li:first-of-type
          `//ul/li[1]
          
      
  
  
      
          ul > li:nth-of-type(2)
          //ul/li[2]
          
      
      
          ul > li:last-of-type
          //ul/li[last()]
          
      
      
          li#id:first-of-type
          `//li[1][@id=&ldquo;id&rdquo;]
          
      
      
          a:first-child
          //*[1][name()=&#34;a&#34;]
          
      
      
          a:last-child
          //*[last()][name()=&#34;a&#34;]
          
      
  

Siblings

  
      
          h1 ~ ul
          `//h1/following-sibling::ul
          
      
  
  
      
          h1 + ul
          //h1/following-sibling::ul[1]
          
      
      
          h1 ~ #id
          //h1/following-sibling::[@id=&#34;id&#34;]
          
      
  

jQuery

  
      
          $('ul > li').parent()
          `//ul/li/..
          
      
  
  
      
          $('li').closest('section')
          //li/ancestor-or-self::section
          
      
      
          $('a').attr('href')
          `//a/@href
          
      
      
          $('span').text()
          //span/text()
          
      
  

Other things

  
      
          h1:not([id])
          `//h1[not(@id)]
          
      
  
  
      
          Text match
          `//button[text()=&ldquo;Submit&rdquo;]
          
      
      
          Text match (substring)
          //button[contains(text(),&#34;Go&#34;)]
          
      
      
          Arithmetic
          //product[@price > 2.50]
          
      
      
          Has children
          //ul[*]
          
      
      
          Has children (specific)
          //ul[li]
          
      
      
          Or logic
          `//a[@name or @href]
          
      
      
          Union (joins results)
          `//a | //div
          
      
  

Class check
//div[contains(concat(' ',normalize-space(@class),' '),' foobar ')]
Xpath doesn’t have the “check if part of space-separated list” operator, so this is the workaround (source)."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"所有文章","item":"https://rendoumi.com/posts/"},{"@type":"ListItem","position":2,"name":"Xpath金手指","item":"https://rendoumi.com/posts/20240122-xpath_css_selector/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Xpath金手指","name":"Xpath金手指","description":"最近在搞puppeteer的自动化，有很多地方需要用到CSS Selector，但是某些地方又是用Xpath方便，金手指放一下，备查：\nTest queries in the Xpath test bed: Xpath test bed (whitebeam.org) Browser console $x(\u0026#34;//div\u0026#34;) Works in Firefox and Chrome.\n#Selectors Descendant selectors h1 //h1 div p `//div//p ul \u0026gt; li `//ul/li ul \u0026gt; li \u0026gt; a //ul/li/a div \u0026gt; * //div/* :root `/ :root \u0026gt; body /body Attribute selectors #id //*[@id=\u0026quot;id\u0026quot;] .class //*[@class=\u0026quot;class\u0026quot;] …kinda input[type=\u0026quot;submit\u0026quot;] //input[@type=\u0026quot;submit\u0026quot;] a#abc[for=\u0026quot;xyz\u0026quot;] `//a[@id=\u0026ldquo;abc\u0026rdquo;][@for=\u0026ldquo;xyz\u0026rdquo;] a[rel] //a[@rel] a[href^='/'] `//a[starts-with(@href, \u0026lsquo;/\u0026rsquo;)] a[href$='pdf'] //a[ends-with(@href, '.pdf')] a[href*='://'] //a[contains(@href, '://')] a[rel~='help'] //a[contains(@rel, 'help')] …kinda Order selectors ul \u0026gt; li:first-of-type `//ul/li[1] ul \u0026gt; li:nth-of-type(2) //ul/li[2] ul \u0026gt; li:last-of-type //ul/li[last()] li#id:first-of-type `//li[1][@id=\u0026ldquo;id\u0026rdquo;] a:first-child //*[1][name()=\u0026quot;a\u0026quot;] a:last-child //*[last()][name()=\u0026quot;a\u0026quot;] Siblings h1 ~ ul `//h1/following-sibling::ul h1 + ul //h1/following-sibling::ul[1] h1 ~ #id //h1/following-sibling::[@id=\u0026quot;id\u0026quot;] jQuery $('ul \u0026gt; li').parent() `//ul/li/.. $('li').closest('section') //li/ancestor-or-self::section $('a').attr('href') `//a/@href $('span').text() //span/text() Other things h1:not([id]) `//h1[not(@id)] Text match `//button[text()=\u0026ldquo;Submit\u0026rdquo;] Text match (substring) //button[contains(text(),\u0026quot;Go\u0026quot;)] Arithmetic //product[@price \u0026gt; 2.50] Has children //ul[*] Has children (specific) //ul[li] Or logic `//a[@name or @href] Union (joins results) `//a | //div Class check //div[contains(concat(\u0026#39; \u0026#39;,normalize-space(@class),\u0026#39; \u0026#39;),\u0026#39; foobar \u0026#39;)] Xpath doesn’t have the “check if part of space-separated list” operator, so this is the workaround (source).\n","keywords":[],"articleBody":"最近在搞puppeteer的自动化，有很多地方需要用到CSS Selector，但是某些地方又是用Xpath方便，金手指放一下，备查：\nTest queries in the Xpath test bed: Xpath test bed (whitebeam.org) Browser console $x(\"//div\") Works in Firefox and Chrome.\n#Selectors Descendant selectors h1 //h1 div p `//div//p ul \u003e li `//ul/li ul \u003e li \u003e a //ul/li/a div \u003e * //div/* :root `/ :root \u003e body /body Attribute selectors #id //*[@id=\"id\"] .class //*[@class=\"class\"] …kinda input[type=\"submit\"] //input[@type=\"submit\"] a#abc[for=\"xyz\"] `//a[@id=“abc”][@for=“xyz”] a[rel] //a[@rel] a[href^='/'] `//a[starts-with(@href, ‘/’)] a[href$='pdf'] //a[ends-with(@href, '.pdf')] a[href*='://'] //a[contains(@href, '://')] a[rel~='help'] //a[contains(@rel, 'help')] …kinda Order selectors ul \u003e li:first-of-type `//ul/li[1] ul \u003e li:nth-of-type(2) //ul/li[2] ul \u003e li:last-of-type //ul/li[last()] li#id:first-of-type `//li[1][@id=“id”] a:first-child //*[1][name()=\"a\"] a:last-child //*[last()][name()=\"a\"] Siblings h1 ~ ul `//h1/following-sibling::ul h1 + ul //h1/following-sibling::ul[1] h1 ~ #id //h1/following-sibling::[@id=\"id\"] jQuery $('ul \u003e li').parent() `//ul/li/.. $('li').closest('section') //li/ancestor-or-self::section $('a').attr('href') `//a/@href $('span').text() //span/text() Other things h1:not([id]) `//h1[not(@id)] Text match `//button[text()=“Submit”] Text match (substring) //button[contains(text(),\"Go\")] Arithmetic //product[@price \u003e 2.50] Has children //ul[*] Has children (specific) //ul[li] Or logic `//a[@name or @href] Union (joins results) `//a | //div Class check //div[contains(concat(' ',normalize-space(@class),' '),' foobar ')] Xpath doesn’t have the “check if part of space-separated list” operator, so this is the workaround (source).\n#Expressions Steps and axes // ul / a[@id='link'] Axis Step Axis Step Prefixes Prefix Example What // //hr[@class='edge'] Anywhere ./ ./a Relative / /html/body/div Root Begin your expression with any of these.\nAxes Axis Example What / //ul/li/a Child // //[@id=\"list\"]//a Descendant Separate your steps with /. Use two (//) if you don’t want to select direct children.\nSteps //div //div[@name='box'] //[@id='link'] A step may have an element name (div) and predicates ([...]). Both are optional. They can also be these other things:\n//a/text() #=\u003e \"Go home\" //a/@href #=\u003e \"index.html\" //a/* #=\u003e All a's child elements #Predicates Predicates //div[true()] //div[@class=\"head\"] //div[@class=\"head\"][@id=\"top\"] Restricts a nodeset only if some condition is true. They can be chained.\nOperators # Comparison //a[@id = \"xyz\"] //a[@id != \"xyz\"] //a[@price \u003e 25] # Logic (and/or) //div[@id=\"head\" and position()=2] //div[(x and y) or not(z)] Use comparison and logic operators to make conditionals.\nUsing nodes # Use them inside functions //ul[count(li) \u003e 2] //ul[count(li[@class='hide']) \u003e 0] # This returns `` that has a `` child //ul[li] You can use nodes inside predicates.\nIndexing //a[1] # first //a[last()] # last //ol/li[2] # second //ol/li[position()=2] # same as above //ol/li[position()\u003e1] # :not(:first-of-type) Use [] with a number, or last() or position().\nChaining order a[1][@href='/'] a[@href='/'][1] Order is significant, these two are different.\nNesting predicates //section[.//h1[@id='hi']] This returns if it has an descendant with id='hi'.\n#Functions Node functions name() # //[starts-with(name(), 'h')] text() # //button[text()=\"Submit\"] # //button/text() lang(str) namespace-uri() count() # //table[count(tr)=1] position() # //ol/li[position()=2] Boolean functions not(expr) # button[not(starts-with(text(),\"Submit\"))] String functions contains() # font[contains(@class,\"head\")] starts-with() # font[starts-with(@class,\"head\")] ends-with() # font[ends-with(@class,\"head\")] concat(x,y) substring(str, start, len) substring-before(\"01/02\", \"/\") #=\u003e 01 substring-after(\"01/02\", \"/\") #=\u003e 02 translate() normalize-space() string-length() Type conversion string() number() boolean() #Axes Using axes //ul/li # ul \u003e li //ul/child::li # ul \u003e li (same) //ul/following-sibling::li # ul ~ li //ul/descendant-or-self::li # ul li //ul/ancestor-or-self::li # $('ul').closest('li') Steps of an expression are separated by /, usually used to pick child nodes. That’s not always true: you can specify a different “axis” with ::.\n// ul /child:: li Axis Step Axis Step Child axis # both the same //ul/li/a //child::ul/child::li/child::a child:: is the default axis. This makes //a/b/c work.\n# both the same # this works because `child::li` is truthy, so the predicate succeeds //ul[li] //ul[child::li] # both the same //ul[count(li) \u003e 2] //ul[count(child::li) \u003e 2] Descendant-or-self axis # both the same //div//h4 //div/descendant-or-self::h4 // is short for the descendant-or-self:: axis.\n# both the same //ul//[last()] //ul/descendant-or-self::[last()] Other axes Axis Abbrev Notes ancestor ancestor-or-self attribute @ @href is short for attribute::href child div is short for child::div descendant descendant-or-self // // is short for /descendant-or-self::node()/ namespace self . . is short for self::node() parent .. .. is short for parent::node() following following-sibling preceding preceding-sibling There are other axes you can use.\nUnions //a | //span Use | to join two expressions.\n#More examples Examples //* # all elements count(//*) # count all elements (//h1)[1]/text() # text of the first h1 heading //li[span] # find a with an inside it # ...expands to //li[child::span] //ul/li/.. # use .. to select a parent Find a parent //section[h1[@id='section-name']] Finds a that directly contains h1#section-name\n//section[//h1[@id='section-name']] Finds a that contains h1#section-name. (Same as above, but uses descendant-or-self instead of child)\nClosest ./ancestor-or-self::[@class=\"box\"] Works like jQuery’s $().closest('.box').\nAttributes //item[@price \u003e 2*@discount] Finds and check its attributes\n#References Xpath test bed (whitebeam.org) ","wordCount":"740","inLanguage":"zh","image":"https://rendoumi.com/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"2024-01-22T09:10:11+08:00","dateModified":"2024-01-22T09:10:11+08:00","author":{"@type":"Person","name":"八戒"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://rendoumi.com/posts/20240122-xpath_css_selector/"},"publisher":{"@type":"Organization","name":"八戒的技术博客","logo":{"@type":"ImageObject","url":"https://rendoumi.com/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://rendoumi.com/ accesskey=h title="Home (Alt + H)"><img src=https://rendoumi.com/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches></div></div><ul id=menu><li><a href=https://rendoumi.com/ title=首页><span>首页</span></a></li><li><a href=https://rendoumi.com/posts/ title=文章><span>文章</span></a></li><li><a href=https://rendoumi.com/archives/ title=归档><span>归档</span></a></li><li><a href=https://blog.rendoumi.com title=生活><span>生活</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=https://rendoumi.com/search/ title=搜索><span>搜索</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://rendoumi.com/>主页</a>&nbsp;»&nbsp;<a href=https://rendoumi.com/posts/>所有文章</a></div><h1 class="post-title entry-hint-parent">Xpath金手指
<span class=entry-hint title=Draft><svg height="35" viewBox="0 -960 960 960" fill="currentcolor"><path d="M160-410v-60h3e2v60H160zm0-165v-60h470v60H160zm0-165v-60h470v60H160zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22-4.5 22.5T862.09-380L643-160H520zm3e2-263-37-37 37 37zM580-220h38l121-122-18-19-19-18-122 121v38zm141-141-19-18 37 37-18-19z"/></svg></span></h1><div class=post-meta><span title='2024-01-22 09:10:11 +0800 CST'>2024年22月</span>&nbsp;·&nbsp;<span>4 分钟</span>&nbsp;·&nbsp;<span>740 字</span>&nbsp;·&nbsp;<span>八戒</span></div></header><div class=post-content><p>最近在搞puppeteer的自动化，有很多地方需要用到CSS Selector，但是某些地方又是用Xpath方便，金手指放一下，备查：</p><h3 id=test-queries-in-the-xpath-test-bed>Test queries in the Xpath test bed:<a hidden class=anchor aria-hidden=true href=#test-queries-in-the-xpath-test-bed>#</a></h3><ul><li><a href=http://www.whitebeam.org/library/guide/TechNotes/xpathtestbed.rhtm>Xpath test bed</a> <em>(whitebeam.org)</em></li></ul><h3 id=browser-console>Browser console<a hidden class=anchor aria-hidden=true href=#browser-console>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-js data-lang=js><span class=line><span class=cl><span class=nx>$x</span><span class=p>(</span><span class=s2>&#34;//div&#34;</span><span class=p>)</span>
</span></span></code></pre></div><p>Works in Firefox and Chrome.</p><h2 id=selectors><a href=https://devhints.io/xpath#selectors>#</a>Selectors<a hidden class=anchor aria-hidden=true href=#selectors>#</a></h2><h3 id=descendant-selectors>Descendant selectors<a hidden class=anchor aria-hidden=true href=#descendant-selectors>#</a></h3><table><thead><tr><th><code>h1</code></th><th><code>//h1</code></th><th></th></tr></thead><tbody><tr><td><code>div p</code></td><td>`//div//p</td><td></td></tr><tr><td><code>ul > li</code></td><td>`//ul/li</td><td></td></tr><tr><td><code>ul > li > a</code></td><td><code>//ul/li/a</code></td><td></td></tr><tr><td><code>div > *</code></td><td><code>//div/*</code></td><td></td></tr><tr><td><code>:root</code></td><td>`/</td><td></td></tr><tr><td><code>:root > body</code></td><td><code>/body</code></td><td></td></tr></tbody></table><h3 id=attribute-selectors>Attribute selectors<a hidden class=anchor aria-hidden=true href=#attribute-selectors>#</a></h3><table><thead><tr><th><code>#id</code></th><th><code>//*[@id="id"]</code></th><th></th></tr></thead><tbody><tr><td><code>.class</code></td><td><code>//*[@class="class"]</code> <em>…<a href=https://devhints.io/xpath#class-check>kinda</a></em></td><td></td></tr><tr><td><code>input[type="submit"]</code></td><td><code>//input[@type="submit"]</code></td><td></td></tr><tr><td><code>a#abc[for="xyz"]</code></td><td>`//a[@id=&ldquo;abc&rdquo;][@for=&ldquo;xyz&rdquo;]</td><td></td></tr><tr><td><code>a[rel]</code></td><td><code>//a[@rel]</code></td><td></td></tr><tr><td><code>a[href^='/']</code></td><td>`//a[starts-with(@href, &lsquo;/&rsquo;)]</td><td></td></tr><tr><td><code>a[href$='pdf']</code></td><td><code>//a[ends-with(@href, '.pdf')]</code></td><td></td></tr><tr><td><code>a[href*='://']</code></td><td><code>//a[contains(@href, '://')]</code></td><td></td></tr><tr><td><code>a[rel~='help']</code></td><td><code>//a[contains(@rel, 'help')]</code> <em>…<a href=https://devhints.io/xpath#class-check>kinda</a></em></td><td></td></tr></tbody></table><h3 id=order-selectors>Order selectors<a hidden class=anchor aria-hidden=true href=#order-selectors>#</a></h3><table><thead><tr><th><code>ul > li:first-of-type</code></th><th>`//ul/li[1]</th><th></th></tr></thead><tbody><tr><td><code>ul > li:nth-of-type(2)</code></td><td><code>//ul/li[2]</code></td><td></td></tr><tr><td><code>ul > li:last-of-type</code></td><td><code>//ul/li[last()]</code></td><td></td></tr><tr><td><code>li#id:first-of-type</code></td><td>`//li[1][@id=&ldquo;id&rdquo;]</td><td></td></tr><tr><td><code>a:first-child</code></td><td><code>//*[1][name()="a"]</code></td><td></td></tr><tr><td><code>a:last-child</code></td><td><code>//*[last()][name()="a"]</code></td><td></td></tr></tbody></table><h3 id=siblings>Siblings<a hidden class=anchor aria-hidden=true href=#siblings>#</a></h3><table><thead><tr><th><code>h1 ~ ul</code></th><th>`//h1/following-sibling::ul</th><th></th></tr></thead><tbody><tr><td><code>h1 + ul</code></td><td><code>//h1/following-sibling::ul[1]</code></td><td></td></tr><tr><td><code>h1 ~ #id</code></td><td><code>//h1/following-sibling::[@id="id"]</code></td><td></td></tr></tbody></table><h3 id=jquery>jQuery<a hidden class=anchor aria-hidden=true href=#jquery>#</a></h3><table><thead><tr><th><code>$('ul > li').parent()</code></th><th>`//ul/li/..</th><th></th></tr></thead><tbody><tr><td><code>$('li').closest('section')</code></td><td><code>//li/ancestor-or-self::section</code></td><td></td></tr><tr><td><code>$('a').attr('href')</code></td><td>`//a/@href</td><td></td></tr><tr><td><code>$('span').text()</code></td><td><code>//span/text()</code></td><td></td></tr></tbody></table><h3 id=other-things>Other things<a hidden class=anchor aria-hidden=true href=#other-things>#</a></h3><table><thead><tr><th><code>h1:not([id])</code></th><th>`//h1[not(@id)]</th><th></th></tr></thead><tbody><tr><td>Text match</td><td>`//button[text()=&ldquo;Submit&rdquo;]</td><td></td></tr><tr><td>Text match (substring)</td><td><code>//button[contains(text(),"Go")]</code></td><td></td></tr><tr><td>Arithmetic</td><td><code>//product[@price > 2.50]</code></td><td></td></tr><tr><td>Has children</td><td><code>//ul[*]</code></td><td></td></tr><tr><td>Has children (specific)</td><td><code>//ul[li]</code></td><td></td></tr><tr><td>Or logic</td><td>`//a[@name or @href]</td><td></td></tr><tr><td>Union (joins results)</td><td>`//a | //div</td><td></td></tr></tbody></table><h3 id=class-check>Class check<a hidden class=anchor aria-hidden=true href=#class-check>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>//div<span class=o>[</span>contains<span class=o>(</span>concat<span class=o>(</span><span class=s1>&#39; &#39;</span>,normalize-space<span class=o>(</span>@class<span class=o>)</span>,<span class=s1>&#39; &#39;</span><span class=o>)</span>,<span class=s1>&#39; foobar &#39;</span><span class=o>)]</span>
</span></span></code></pre></div><p>Xpath doesn’t have the “check if part of space-separated list” operator, so this is the workaround (<a href=http://pivotallabs.com/xpath-css-class-matching/>source</a>).</p><h2 id=expressions><a href=https://devhints.io/xpath#expressions>#</a>Expressions<a hidden class=anchor aria-hidden=true href=#expressions>#</a></h2><h3 id=steps-and-axes>Steps and axes<a hidden class=anchor aria-hidden=true href=#steps-and-axes>#</a></h3><table><thead><tr><th><code>//</code></th><th><code>ul</code></th><th><code>/</code></th><th><code>a[@id='link']</code></th></tr></thead><tbody><tr><td>Axis</td><td>Step</td><td>Axis</td><td>Step</td></tr></tbody></table><h3 id=prefixes>Prefixes<a hidden class=anchor aria-hidden=true href=#prefixes>#</a></h3><table><thead><tr><th>Prefix</th><th>Example</th><th>What</th></tr></thead><tbody><tr><td><code>//</code></td><td><code>//hr[@class='edge']</code></td><td>Anywhere</td></tr><tr><td><code>./</code></td><td><code>./a</code></td><td>Relative</td></tr><tr><td><code>/</code></td><td><code>/html/body/div</code></td><td>Root</td></tr></tbody></table><p>Begin your expression with any of these.</p><h3 id=axes>Axes<a hidden class=anchor aria-hidden=true href=#axes>#</a></h3><table><thead><tr><th>Axis</th><th>Example</th><th>What</th></tr></thead><tbody><tr><td><code>/</code></td><td><code>//ul/li/a</code></td><td>Child</td></tr><tr><td><code>//</code></td><td><code>//[@id="list"]//a</code></td><td>Descendant</td></tr></tbody></table><p>Separate your steps with <code>/</code>. Use two (<code>//</code>) if you don’t want to select direct children.</p><h3 id=steps>Steps<a hidden class=anchor aria-hidden=true href=#steps>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>//div
</span></span><span class=line><span class=cl>//div<span class=o>[</span>@name<span class=o>=</span><span class=s1>&#39;box&#39;</span><span class=o>]</span>
</span></span><span class=line><span class=cl>//<span class=o>[</span>@id<span class=o>=</span><span class=s1>&#39;link&#39;</span><span class=o>]</span>
</span></span></code></pre></div><p>A step may have an element name (<code>div</code>) and <a href=https://devhints.io/xpath#predicate>predicates</a> (<code>[...]</code>). Both are optional. They can also be these other things:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>//a/text<span class=o>()</span>     <span class=c1>#=&gt; &#34;Go home&#34;</span>
</span></span><span class=line><span class=cl>//a/@href      <span class=c1>#=&gt; &#34;index.html&#34;</span>
</span></span><span class=line><span class=cl>//a/*          <span class=c1>#=&gt; All a&#39;s child elements</span>
</span></span></code></pre></div><h2 id=predicates><a href=https://devhints.io/xpath#predicates>#</a>Predicates<a hidden class=anchor aria-hidden=true href=#predicates>#</a></h2><h3 id=predicates-1>Predicates<a hidden class=anchor aria-hidden=true href=#predicates-1>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>//div<span class=o>[</span>true<span class=o>()]</span>
</span></span><span class=line><span class=cl>//div<span class=o>[</span>@class<span class=o>=</span><span class=s2>&#34;head&#34;</span><span class=o>]</span>
</span></span><span class=line><span class=cl>//div<span class=o>[</span>@class<span class=o>=</span><span class=s2>&#34;head&#34;</span><span class=o>][</span>@id<span class=o>=</span><span class=s2>&#34;top&#34;</span><span class=o>]</span>
</span></span></code></pre></div><p>Restricts a nodeset only if some condition is true. They can be chained.</p><h3 id=operators>Operators<a hidden class=anchor aria-hidden=true href=#operators>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Comparison</span>
</span></span><span class=line><span class=cl>//a<span class=o>[</span>@id <span class=o>=</span> <span class=s2>&#34;xyz&#34;</span><span class=o>]</span>
</span></span><span class=line><span class=cl>//a<span class=o>[</span>@id !<span class=o>=</span> <span class=s2>&#34;xyz&#34;</span><span class=o>]</span>
</span></span><span class=line><span class=cl>//a<span class=o>[</span>@price &gt; 25<span class=o>]</span>
</span></span><span class=line><span class=cl><span class=c1># Logic (and/or)</span>
</span></span><span class=line><span class=cl>//div<span class=o>[</span>@id<span class=o>=</span><span class=s2>&#34;head&#34;</span> and position<span class=o>()=</span>2<span class=o>]</span>
</span></span><span class=line><span class=cl>//div<span class=o>[(</span>x and y<span class=o>)</span> or not<span class=o>(</span>z<span class=o>)]</span>
</span></span></code></pre></div><p>Use comparison and logic operators to make conditionals.</p><h3 id=using-nodes>Using nodes<a hidden class=anchor aria-hidden=true href=#using-nodes>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># Use them inside functions</span>
</span></span><span class=line><span class=cl>//ul<span class=o>[</span>count<span class=o>(</span>li<span class=o>)</span> &gt; 2<span class=o>]</span>
</span></span><span class=line><span class=cl>//ul<span class=o>[</span>count<span class=o>(</span>li<span class=o>[</span>@class<span class=o>=</span><span class=s1>&#39;hide&#39;</span><span class=o>])</span> &gt; 0<span class=o>]</span>
</span></span><span class=line><span class=cl><span class=c1># This returns `&lt;ul&gt;` that has a `&lt;li&gt;` child</span>
</span></span><span class=line><span class=cl>//ul<span class=o>[</span>li<span class=o>]</span>
</span></span></code></pre></div><p>You can use nodes inside predicates.</p><h3 id=indexing>Indexing<a hidden class=anchor aria-hidden=true href=#indexing>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>//a<span class=o>[</span>1<span class=o>]</span>                  <span class=c1># first &lt;a&gt;</span>
</span></span><span class=line><span class=cl>//a<span class=o>[</span>last<span class=o>()]</span>             <span class=c1># last &lt;a&gt;</span>
</span></span><span class=line><span class=cl>//ol/li<span class=o>[</span>2<span class=o>]</span>              <span class=c1># second &lt;li&gt;</span>
</span></span><span class=line><span class=cl>//ol/li<span class=o>[</span>position<span class=o>()=</span>2<span class=o>]</span>   <span class=c1># same as above</span>
</span></span><span class=line><span class=cl>//ol/li<span class=o>[</span>position<span class=o>()</span>&gt;1<span class=o>]</span>   <span class=c1># :not(:first-of-type)</span>
</span></span></code></pre></div><p>Use <code>[]</code> with a number, or <code>last()</code> or <code>position()</code>.</p><h3 id=chaining-order>Chaining order<a hidden class=anchor aria-hidden=true href=#chaining-order>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>a<span class=o>[</span>1<span class=o>][</span>@href<span class=o>=</span><span class=s1>&#39;/&#39;</span><span class=o>]</span>
</span></span><span class=line><span class=cl>a<span class=o>[</span>@href<span class=o>=</span><span class=s1>&#39;/&#39;</span><span class=o>][</span>1<span class=o>]</span>
</span></span></code></pre></div><p>Order is significant, these two are different.</p><h3 id=nesting-predicates>Nesting predicates<a hidden class=anchor aria-hidden=true href=#nesting-predicates>#</a></h3><pre tabindex=0><code>//section[.//h1[@id=&#39;hi&#39;]]
</code></pre><p>This returns <code>&lt;section></code> if it has an <code>&lt;h1></code> descendant with <code>id='hi'</code>.</p><h2 id=functions><a href=https://devhints.io/xpath#functions>#</a>Functions<a hidden class=anchor aria-hidden=true href=#functions>#</a></h2><h3 id=node-functions>Node functions<a hidden class=anchor aria-hidden=true href=#node-functions>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>name<span class=o>()</span>                     <span class=c1># //[starts-with(name(), &#39;h&#39;)]</span>
</span></span><span class=line><span class=cl>text<span class=o>()</span>                     <span class=c1># //button[text()=&#34;Submit&#34;]</span>
</span></span><span class=line><span class=cl>                           <span class=c1># //button/text()</span>
</span></span><span class=line><span class=cl>lang<span class=o>(</span>str<span class=o>)</span>
</span></span><span class=line><span class=cl>namespace-uri<span class=o>()</span>
</span></span><span class=line><span class=cl>count<span class=o>()</span>                    <span class=c1># //table[count(tr)=1]</span>
</span></span><span class=line><span class=cl>position<span class=o>()</span>                 <span class=c1># //ol/li[position()=2]</span>
</span></span></code></pre></div><h3 id=boolean-functions>Boolean functions<a hidden class=anchor aria-hidden=true href=#boolean-functions>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>not<span class=o>(</span>expr<span class=o>)</span>                  <span class=c1># button[not(starts-with(text(),&#34;Submit&#34;))]</span>
</span></span></code></pre></div><h3 id=string-functions>String functions<a hidden class=anchor aria-hidden=true href=#string-functions>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>contains<span class=o>()</span>                 <span class=c1># font[contains(@class,&#34;head&#34;)]</span>
</span></span><span class=line><span class=cl>starts-with<span class=o>()</span>              <span class=c1># font[starts-with(@class,&#34;head&#34;)]</span>
</span></span><span class=line><span class=cl>ends-with<span class=o>()</span>                <span class=c1># font[ends-with(@class,&#34;head&#34;)]</span>
</span></span><span class=line><span class=cl>concat<span class=o>(</span>x,y<span class=o>)</span>
</span></span><span class=line><span class=cl>substring<span class=o>(</span>str, start, len<span class=o>)</span>
</span></span><span class=line><span class=cl>substring-before<span class=o>(</span><span class=s2>&#34;01/02&#34;</span>, <span class=s2>&#34;/&#34;</span><span class=o>)</span>  <span class=c1>#=&gt; 01</span>
</span></span><span class=line><span class=cl>substring-after<span class=o>(</span><span class=s2>&#34;01/02&#34;</span>, <span class=s2>&#34;/&#34;</span><span class=o>)</span>   <span class=c1>#=&gt; 02</span>
</span></span><span class=line><span class=cl>translate<span class=o>()</span>
</span></span><span class=line><span class=cl>normalize-space<span class=o>()</span>
</span></span><span class=line><span class=cl>string-length<span class=o>()</span>
</span></span></code></pre></div><h3 id=type-conversion>Type conversion<a hidden class=anchor aria-hidden=true href=#type-conversion>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>string<span class=o>()</span>
</span></span><span class=line><span class=cl>number<span class=o>()</span>
</span></span><span class=line><span class=cl>boolean<span class=o>()</span>
</span></span></code></pre></div><h2 id=axes-1><a href=https://devhints.io/xpath#axes-1>#</a>Axes<a hidden class=anchor aria-hidden=true href=#axes-1>#</a></h2><h3 id=using-axes>Using axes<a hidden class=anchor aria-hidden=true href=#using-axes>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>//ul/li                       <span class=c1># ul &gt; li</span>
</span></span><span class=line><span class=cl>//ul/child::li                <span class=c1># ul &gt; li (same)</span>
</span></span><span class=line><span class=cl>//ul/following-sibling::li    <span class=c1># ul ~ li</span>
</span></span><span class=line><span class=cl>//ul/descendant-or-self::li   <span class=c1># ul li</span>
</span></span><span class=line><span class=cl>//ul/ancestor-or-self::li     <span class=c1># $(&#39;ul&#39;).closest(&#39;li&#39;)</span>
</span></span></code></pre></div><p>Steps of an expression are separated by <code>/</code>, usually used to pick child nodes. That’s not always true: you can specify a different “axis” with <code>::</code>.</p><table><thead><tr><th><code>//</code></th><th><code>ul</code></th><th><code>/child::</code></th><th><code>li</code></th></tr></thead><tbody><tr><td>Axis</td><td>Step</td><td>Axis</td><td>Step</td></tr></tbody></table><h3 id=child-axis>Child axis<a hidden class=anchor aria-hidden=true href=#child-axis>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># both the same</span>
</span></span><span class=line><span class=cl>//ul/li/a
</span></span><span class=line><span class=cl>//child::ul/child::li/child::a
</span></span></code></pre></div><p><code>child::</code> is the default axis. This makes <code>//a/b/c</code> work.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># both the same</span>
</span></span><span class=line><span class=cl><span class=c1># this works because `child::li` is truthy, so the predicate succeeds</span>
</span></span><span class=line><span class=cl>//ul<span class=o>[</span>li<span class=o>]</span>
</span></span><span class=line><span class=cl>//ul<span class=o>[</span>child::li<span class=o>]</span>
</span></span><span class=line><span class=cl><span class=c1># both the same</span>
</span></span><span class=line><span class=cl>//ul<span class=o>[</span>count<span class=o>(</span>li<span class=o>)</span> &gt; 2<span class=o>]</span>
</span></span><span class=line><span class=cl>//ul<span class=o>[</span>count<span class=o>(</span>child::li<span class=o>)</span> &gt; 2<span class=o>]</span>
</span></span></code></pre></div><h3 id=descendant-or-self-axis>Descendant-or-self axis<a hidden class=anchor aria-hidden=true href=#descendant-or-self-axis>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># both the same</span>
</span></span><span class=line><span class=cl>//div//h4
</span></span><span class=line><span class=cl>//div/descendant-or-self::h4
</span></span></code></pre></div><p><code>//</code> is short for the <code>descendant-or-self::</code> axis.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1># both the same</span>
</span></span><span class=line><span class=cl>//ul//<span class=o>[</span>last<span class=o>()]</span>
</span></span><span class=line><span class=cl>//ul/descendant-or-self::<span class=o>[</span>last<span class=o>()]</span>
</span></span></code></pre></div><h3 id=other-axes>Other axes<a hidden class=anchor aria-hidden=true href=#other-axes>#</a></h3><table><thead><tr><th>Axis</th><th>Abbrev</th><th>Notes</th></tr></thead><tbody><tr><td><code>ancestor</code></td><td></td><td></td></tr><tr><td><code>ancestor-or-self</code></td><td></td><td></td></tr><tr><td><code>attribute</code></td><td><code>@</code></td><td><code>@href</code> is short for <code>attribute::href</code></td></tr><tr><td><code>child</code></td><td></td><td><code>div</code> is short for <code>child::div</code></td></tr><tr><td><code>descendant</code></td><td></td><td></td></tr><tr><td><code>descendant-or-self</code></td><td><code>//</code></td><td><code>//</code> is short for <code>/descendant-or-self::node()/</code></td></tr><tr><td><code>namespace</code></td><td></td><td></td></tr><tr><td><code>self</code></td><td><code>.</code></td><td><code>.</code> is short for <code>self::node()</code></td></tr><tr><td><code>parent</code></td><td><code>..</code></td><td><code>..</code> is short for <code>parent::node()</code></td></tr><tr><td><code>following</code></td><td></td><td></td></tr><tr><td><code>following-sibling</code></td><td></td><td></td></tr><tr><td><code>preceding</code></td><td></td><td></td></tr><tr><td><code>preceding-sibling</code></td><td></td><td></td></tr></tbody></table><p>There are other axes you can use.</p><h3 id=unions>Unions<a hidden class=anchor aria-hidden=true href=#unions>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>//a <span class=p>|</span> //span
</span></span></code></pre></div><p>Use <code>|</code> to join two expressions.</p><h2 id=more-examples><a href=https://devhints.io/xpath#more-examples>#</a>More examples<a hidden class=anchor aria-hidden=true href=#more-examples>#</a></h2><h3 id=examples>Examples<a hidden class=anchor aria-hidden=true href=#examples>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>//*                 <span class=c1># all elements</span>
</span></span><span class=line><span class=cl>count<span class=o>(</span>//*<span class=o>)</span>          <span class=c1># count all elements</span>
</span></span><span class=line><span class=cl><span class=o>(</span>//h1<span class=o>)[</span>1<span class=o>]</span>/text<span class=o>()</span>    <span class=c1># text of the first h1 heading</span>
</span></span><span class=line><span class=cl>//li<span class=o>[</span>span<span class=o>]</span>          <span class=c1># find a &lt;li&gt; with an &lt;span&gt; inside it</span>
</span></span><span class=line><span class=cl>                    <span class=c1># ...expands to //li[child::span]</span>
</span></span><span class=line><span class=cl>//ul/li/..          <span class=c1># use .. to select a parent</span>
</span></span></code></pre></div><h3 id=find-a-parent>Find a parent<a hidden class=anchor aria-hidden=true href=#find-a-parent>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>//section<span class=o>[</span>h1<span class=o>[</span>@id<span class=o>=</span><span class=s1>&#39;section-name&#39;</span><span class=o>]]</span>
</span></span></code></pre></div><p>Finds a <code>&lt;section></code> that directly contains <code>h1#section-name</code></p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>//section<span class=o>[</span>//h1<span class=o>[</span>@id<span class=o>=</span><span class=s1>&#39;section-name&#39;</span><span class=o>]]</span>
</span></span></code></pre></div><p>Finds a <code>&lt;section></code> that contains <code>h1#section-name</code>. (Same as above, but uses descendant-or-self instead of child)</p><h3 id=closest>Closest<a hidden class=anchor aria-hidden=true href=#closest>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>./ancestor-or-self::<span class=o>[</span>@class<span class=o>=</span><span class=s2>&#34;box&#34;</span><span class=o>]</span>
</span></span></code></pre></div><p>Works like jQuery’s <code>$().closest('.box')</code>.</p><h3 id=attributes>Attributes<a hidden class=anchor aria-hidden=true href=#attributes>#</a></h3><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>//item<span class=o>[</span>@price &gt; 2*@discount<span class=o>]</span>
</span></span></code></pre></div><p>Finds <code>&lt;item></code> and check its attributes</p><h2 id=references><a href=https://devhints.io/xpath#references>#</a>References<a hidden class=anchor aria-hidden=true href=#references>#</a></h2><ul><li><a href=http://www.whitebeam.org/library/guide/TechNotes/xpathtestbed.rhtm>Xpath test bed</a> <em>(whitebeam.org)</em></li></ul></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=https://rendoumi.com/posts/20240123-syslog_priority/><span class=title>« 上一页</span><br><span>syslog级别详解</span>
</a><a class=next href=https://rendoumi.com/posts/20240121-rsyslog_dns/><span class=title>下一页 »</span><br><span>禁掉Rsyslog的dns解析</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Xpath金手指 on x" href="https://x.com/intent/tweet/?text=Xpath%e9%87%91%e6%89%8b%e6%8c%87&amp;url=https%3a%2f%2frendoumi.com%2fposts%2f20240122-xpath_css_selector%2f&amp;hashtags="><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Xpath金手指 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2frendoumi.com%2fposts%2f20240122-xpath_css_selector%2f&amp;title=Xpath%e9%87%91%e6%89%8b%e6%8c%87&amp;summary=Xpath%e9%87%91%e6%89%8b%e6%8c%87&amp;source=https%3a%2f%2frendoumi.com%2fposts%2f20240122-xpath_css_selector%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Xpath金手指 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2frendoumi.com%2fposts%2f20240122-xpath_css_selector%2f&title=Xpath%e9%87%91%e6%89%8b%e6%8c%87"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Xpath金手指 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2frendoumi.com%2fposts%2f20240122-xpath_css_selector%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Xpath金手指 on whatsapp" href="https://api.whatsapp.com/send?text=Xpath%e9%87%91%e6%89%8b%e6%8c%87%20-%20https%3a%2f%2frendoumi.com%2fposts%2f20240122-xpath_css_selector%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Xpath金手指 on telegram" href="https://telegram.me/share/url?text=Xpath%e9%87%91%e6%89%8b%e6%8c%87&amp;url=https%3a%2f%2frendoumi.com%2fposts%2f20240122-xpath_css_selector%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Xpath金手指 on ycombinator" href="https://news.ycombinator.com/submitlink?t=Xpath%e9%87%91%e6%89%8b%e6%8c%87&u=https%3a%2f%2frendoumi.com%2fposts%2f20240122-xpath_css_selector%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer><div id=comments></div><script src=https://cwd.js.org/cwd.js></script><script>const comments=new CWDComments({el:"#comments",apiBaseUrl:"https://cwd.rendoumi.qzz.io"});comments.mount()</script></article></main><footer class=footer><span>Copyright © 2020-2025 Zhang Ranrui. All Rights Reserved.</span><br>·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script></body></html>