<!doctype html><html lang=zh dir=auto data-theme=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Freelancer任务之二：建一个scramble obfuscated opevpn | 八戒的技术博客</title>
<meta name=keywords content><meta name=description content='这个很奇怪撒，仔细查了下，原作者是这么说的：
I have created a patch which introduces some forms of scrambling to the packet payload of any OpenVPN connection.  
I have been successfully using the patch with Iranian and Chinese users for some time now.  
看来伊朗也比较糟糕啊。
无语，鉴于在森华易腾无法建openvpn，不知道是直接封了1194的udp端口，还是从协议上封掉了openvpn，总之，都很shit。
简单说就是对openvpn协议进行了混淆，多了一个配置项：
scramble 参数  
scramble reverse #对传输的数据进行反转，通常这一句就已经可以绕过China和Iran的检测机制了  
scramble xorptrpos #对传输的package中的有效数据进行xor运算  
scramble obfuscate password #更强烈的加密。反转+xor+密码三种方式全用上. "password" 是你设定的密码

用上这个配置项后，建议设置cipher none, 因为如此这般以后，没有必要再制定cipher方式了。另外，用cipher会消耗cpu，而采用scramble消耗cpu的程度比cipher低。
搭一个试试看 这里采用的是openvpn 2.4.4版本和相应的patch
下载：

2.4.4.zip
master.zip

#centos 
yum -y install unzip  
yum -y groupinstall "development tools"  

#ubuntu
apt update
apt install build-essential

unzip -x 2.4.4.zip  
unzip -x master.zip  
应用补丁：'><meta name=author content><link rel=canonical href=https://rendoumi.com/posts/20240124_freelancer_2/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.74dff769c849e7908342c626b27d92486e2c568e0a3c69bddd21ad6aad6674d3.css integrity="sha256-dN/3achJ55CDQsYmsn2SSG4sVo4KPGm93SGtaq1mdNM=" rel="preload stylesheet" as=style><link rel=icon href=https://rendoumi.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://rendoumi.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://rendoumi.com/favicon-32x32.png><link rel=apple-touch-icon href=https://rendoumi.com/apple-touch-icon.png><link rel=mask-icon href=https://rendoumi.com/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh href=https://rendoumi.com/posts/20240124_freelancer_2/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51);color-scheme:dark}.list{background:var(--theme)}.toc{background:var(--entry)}}@media(prefers-color-scheme:light){.list::-webkit-scrollbar-thumb{border-color:var(--code-bg)}}</style></noscript><script>localStorage.getItem("pref-theme")==="dark"?document.querySelector("html").dataset.theme="dark":localStorage.getItem("pref-theme")==="light"?document.querySelector("html").dataset.theme="light":window.matchMedia("(prefers-color-scheme: dark)").matches?document.querySelector("html").dataset.theme="dark":document.querySelector("html").dataset.theme="light"</script><meta property="og:url" content="https://rendoumi.com/posts/20240124_freelancer_2/"><meta property="og:site_name" content="八戒的技术博客"><meta property="og:title" content="Freelancer任务之二：建一个scramble obfuscated opevpn"><meta property="og:description" content='这个很奇怪撒，仔细查了下，原作者是这么说的：
I have created a patch which introduces some forms of scrambling to the packet payload of any OpenVPN connection. I have been successfully using the patch with Iranian and Chinese users for some time now. 看来伊朗也比较糟糕啊。
无语，鉴于在森华易腾无法建openvpn，不知道是直接封了1194的udp端口，还是从协议上封掉了openvpn，总之，都很shit。
简单说就是对openvpn协议进行了混淆，多了一个配置项：
scramble 参数 scramble reverse #对传输的数据进行反转，通常这一句就已经可以绕过China和Iran的检测机制了 scramble xorptrpos #对传输的package中的有效数据进行xor运算 scramble obfuscate password #更强烈的加密。反转+xor+密码三种方式全用上. "password" 是你设定的密码 用上这个配置项后，建议设置cipher none, 因为如此这般以后，没有必要再制定cipher方式了。另外，用cipher会消耗cpu，而采用scramble消耗cpu的程度比cipher低。 搭一个试试看 这里采用的是openvpn 2.4.4版本和相应的patch
下载：
2.4.4.zip master.zip #centos yum -y install unzip yum -y groupinstall "development tools" #ubuntu apt update apt install build-essential unzip -x 2.4.4.zip unzip -x master.zip 应用补丁：'><meta property="og:locale" content="zh"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2024-01-24T10:06:11+08:00"><meta property="article:modified_time" content="2024-01-24T10:06:11+08:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Freelancer任务之二：建一个scramble obfuscated opevpn"><meta name=twitter:description content='这个很奇怪撒，仔细查了下，原作者是这么说的：
I have created a patch which introduces some forms of scrambling to the packet payload of any OpenVPN connection.  
I have been successfully using the patch with Iranian and Chinese users for some time now.  
看来伊朗也比较糟糕啊。
无语，鉴于在森华易腾无法建openvpn，不知道是直接封了1194的udp端口，还是从协议上封掉了openvpn，总之，都很shit。
简单说就是对openvpn协议进行了混淆，多了一个配置项：
scramble 参数  
scramble reverse #对传输的数据进行反转，通常这一句就已经可以绕过China和Iran的检测机制了  
scramble xorptrpos #对传输的package中的有效数据进行xor运算  
scramble obfuscate password #更强烈的加密。反转+xor+密码三种方式全用上. "password" 是你设定的密码

用上这个配置项后，建议设置cipher none, 因为如此这般以后，没有必要再制定cipher方式了。另外，用cipher会消耗cpu，而采用scramble消耗cpu的程度比cipher低。
搭一个试试看 这里采用的是openvpn 2.4.4版本和相应的patch
下载：

2.4.4.zip
master.zip

#centos 
yum -y install unzip  
yum -y groupinstall "development tools"  

#ubuntu
apt update
apt install build-essential

unzip -x 2.4.4.zip  
unzip -x master.zip  
应用补丁：'><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"所有文章","item":"https://rendoumi.com/posts/"},{"@type":"ListItem","position":2,"name":"Freelancer任务之二：建一个scramble obfuscated opevpn","item":"https://rendoumi.com/posts/20240124_freelancer_2/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Freelancer任务之二：建一个scramble obfuscated opevpn","name":"Freelancer任务之二：建一个scramble obfuscated opevpn","description":"这个很奇怪撒，仔细查了下，原作者是这么说的：\nI have created a patch which introduces some forms of scrambling to the packet payload of any OpenVPN connection. I have been successfully using the patch with Iranian and Chinese users for some time now. 看来伊朗也比较糟糕啊。\n无语，鉴于在森华易腾无法建openvpn，不知道是直接封了1194的udp端口，还是从协议上封掉了openvpn，总之，都很shit。\n简单说就是对openvpn协议进行了混淆，多了一个配置项：\nscramble 参数 scramble reverse #对传输的数据进行反转，通常这一句就已经可以绕过China和Iran的检测机制了 scramble xorptrpos #对传输的package中的有效数据进行xor运算 scramble obfuscate password #更强烈的加密。反转+xor+密码三种方式全用上. \u0026#34;password\u0026#34; 是你设定的密码 用上这个配置项后，建议设置cipher none, 因为如此这般以后，没有必要再制定cipher方式了。另外，用cipher会消耗cpu，而采用scramble消耗cpu的程度比cipher低。 搭一个试试看 这里采用的是openvpn 2.4.4版本和相应的patch\n下载：\n2.4.4.zip master.zip #centos yum -y install unzip yum -y groupinstall \u0026#34;development tools\u0026#34; #ubuntu apt update apt install build-essential unzip -x 2.4.4.zip unzip -x master.zip 应用补丁：\n","keywords":[],"articleBody":"这个很奇怪撒，仔细查了下，原作者是这么说的：\nI have created a patch which introduces some forms of scrambling to the packet payload of any OpenVPN connection. I have been successfully using the patch with Iranian and Chinese users for some time now. 看来伊朗也比较糟糕啊。\n无语，鉴于在森华易腾无法建openvpn，不知道是直接封了1194的udp端口，还是从协议上封掉了openvpn，总之，都很shit。\n简单说就是对openvpn协议进行了混淆，多了一个配置项：\nscramble 参数 scramble reverse #对传输的数据进行反转，通常这一句就已经可以绕过China和Iran的检测机制了 scramble xorptrpos #对传输的package中的有效数据进行xor运算 scramble obfuscate password #更强烈的加密。反转+xor+密码三种方式全用上. \"password\" 是你设定的密码 用上这个配置项后，建议设置cipher none, 因为如此这般以后，没有必要再制定cipher方式了。另外，用cipher会消耗cpu，而采用scramble消耗cpu的程度比cipher低。 搭一个试试看 这里采用的是openvpn 2.4.4版本和相应的patch\n下载：\n2.4.4.zip master.zip #centos yum -y install unzip yum -y groupinstall \"development tools\" #ubuntu apt update apt install build-essential unzip -x 2.4.4.zip unzip -x master.zip 应用补丁：\ncd openvpn-release-2.4/ git apply ../openvpn_xorpatch-master/openvpn_xor.patch 安装依赖包并编译：\n#cetnos yum install -y openssl-devel lz4-devel net-tools lzo-devel pam-devel #ubuntu apt install autoreconf liblzo2-dev libpam0g-dev autoreconf -i -v -f ./configure --prefix=/export/servers/openvpn make make install 安装easy-rsa-3.0，不得不击节叫好啊，easy-rsa 3.0比2.0进化多了，就一个可执行文件，也轻省多了：\nwget http://img.rendoumi.com/soft/vpn/easy-rsa.zip unzip -x easy-rsa.zip 建立openvpn配置文件夹\nmkdir -p /etc/openvpn/conf cp -r easy-rsa-master/easyrsa3/* /etc/openvpn 看看新版easy-rsa-3.0都有什么命令\ncd /etc/openvpn ./easyrsa Easy-RSA 3 usage and overview USAGE: easyrsa [options] COMMAND [command-options] A list of commands is shown below. To get detailed usage and help for a command, run: ./easyrsa help COMMAND For a listing of options that can be supplied before the command, use: ./easyrsa help options Here is the list of commands available with a short syntax reminder. Use the 'help' command above to get full usage details. init-pki build-ca [ cmd-opts ] gen-dh gen-req [ cmd-opts ] sign-req build-client-full [ cmd-opts ] build-server-full [ cmd-opts ] revoke gen-crl update-db show-req [ cmd-opts ] show-cert [ cmd-opts ] import-req export-p7 [ cmd-opts ] export-p12 [ cmd-opts ] set-rsa-pass [ cmd-opts ] set-ec-pass [ cmd-opts ] DIRECTORY STATUS (commands would take effect on these locations) EASYRSA: . PKI: /etc/openvpn/pki 简单明了，一目了然，来吧，一气呵成\ncd /etc/openvpn ./easyrsa init-pki ./easyrsa --batch build-ca nopass ./easyrsa --batch build-server-full server nopass ./easyrsa --batch build-client-full client1 nopass ./easyrsa gen-dh 什么都不用管，就全弄好了，比起easy-rsa 2.0一堆脚本，修改vars，省事多了！！！\n准备server端的配置文件：\ncd /etc/openvpn/ cp pki/ca.crt pki/dh.pem pki/private/client1.key pki/private/server.key pki/issued/* /etc/openvpn/conf cd /etc/openvpn/conf /export/servers/openvpn/sbin/openvpn --genkey --secret ta.key 这样/etc/openvpn/conf下就会有7个文件\nca.crt server.key client1.key client1.crt dh.pem server.crt ta.key 准备个模板：\ncat\u003c\u003e/etc/openvpn/conf/server.conf port 1194 proto udp dev tun server 10.8.0.0 255.255.255.0 scramble obfuscate fuckfuckfuck ca /etc/openvpn/conf/ca.crt cert /etc/openvpn/conf/server.crt key /etc/openvpn/conf/server.key tls-auth /etc/openvpn/conf/ta.key 0 key-direction 0 dh /etc/openvpn/conf/dh.pem cipher none #push \"route 172.16.0.0 255.255.0.0\" client-to-client comp-lzo persist-key persist-tun user nobody group nobody ifconfig-pool-persist /etc/openvpn/conf/ipp.txt status /var/log/openvpn-status.log log /var/log/openvpn.log log-append /var/log/openvpn.log keepalive 5 30 verb 3 EOF 启动server端\n/export/servers/openvpn/sbin/openvpn --config /etc/openvpn/server.conf --daemon 准备客户端文件\ncat\u003c\u003e/etc/openvpn/conf/client1.ovpn client dev tun proto udp remote change_this_to_server_address 1194 scramble obfuscate fuckfuckfuck resolv-retry infinite nobind persist-key persist-tun user nobody group nogroup ca ca.crt cert client1.crt key client1.key tls-auth ta.key 1 remote-cert-tls server key-direction 1 cipher none comp-lzo keepalive 5 30 verb 3 EOF 合并出一个单独的客户端文件 注意merge.sh里面文件的配置：\nca=\"ca.crt\" cert=\"client1.crt\" key=\"client1.key\" tlsauth=\"ta.key\" ovpndest=\"client1.ovpn\" cd /etc/openvpn/conf wget http://img.rendoumi.com/soft/vpn/merge.sh chmod 755 merge.sh ./merge.sh 这样就会合并出一个client1.ovpn客户端连接文件来，全部合一，其实server.conf也可以把所有东西包括进去\nclient dev tun proto udp remote change_this_to_server_address 1194 scramble obfuscate fuckfuckfuck resolv-retry infinite nobind persist-key persist-tun remote-cert-tls server cipher none comp-lzo verb 3 key-direction 1 -----BEGIN CERTIFICATE----- MIIDKzCCAhOgAwIBAgIJAOG5arbs5t9RMA0GCSqGSIb3DQEBCwUAMBMxETAPBgNV BAMTCENoYW5nZU1lMB4XDTE4MDMyODAzNDkyMloXDTI4MDMyNTAzNDkyMlowEzER MA8GA1UEAxMIQ2hhbmdlTWUwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIB AQDMOUuQg49OstGbfPLjTgzwb5YBmBeVxyF3+5jmKbgPXujZ3dvdBwxaslVUwre6 XsMUBz3vbB7Kf1BBDHe2jt60p2x2O+ptTb3rRhTPLhdhd9C3HUhwkNYc7jv1+ua3 sUlwiYikltKhXGVU3e/XYB+Aiw63mem4ex5T4kJ/KIKoulGhUsaOl9JtPPKbeIlV BgUzBLHNt/9bY7r7m2Fh0VmbD5p5YMZEGrg+WX0qzT4wKD/734VdxuAoFwd7as6s CH73w0ykscV7evUJEaNu1keTqgqG5SuE3HzQ1cmWSSeF84gUes+l2JAivpQ/XTkF wdLnq2caXVTMDF8t/Y1e8JfVAgMBAAGjgYEwfzAdBgNVHQ4EFgQU+SKBqluAW6hQ p8y9Q22ZBhkTw5IwQwYDVR0jBDwwOoAU+SKBqluAW6hQp8y9Q22ZBhkTw5KhF6QV MBMxETAPBgNVBAMTCENoYW5nZU1lggkA4blqtuzm31EwDAYDVR0TBAUwAwEB/zAL BgNVHQ8EBAMCAQYwDQYJKoZIhvcNAQELBQADggEBAL9ZqyMSrrJ2ss/5pQhUBw71 nmjeT8DPg7Optiq02oAPdIo06WdJ77Y+mFypGKw8uUHp/h0mL5wBr6NBYbdw+5Lc vv4tCpOzzNW7PJngJWilIdvL1W+y3i3/AolSs7jAradaOQOpI23tOeQAQUmwchmt hvgKH8kyIWlOzxGIHdG9Spv8Oi1X6dwD0t4ddaNqcnCbyC2cBX4TvlXeVixMdBLY xq/5+G6dlJhaUzD4lG9Co7PTctwOFzKIP+mCrhLFCh7v5L6HCqL5ZLI7bWYTy0rm XURbleynyld95FKuul5YFRyb/j+I8iBd3Sw9TWhVuqKb4JX9n6zB1FxkNUX1r4g= -----END CERTIFICATE----- -----BEGIN CERTIFICATE----- MIIDRTCCAi2gAwIBAgIRALV3i3gqfdbfWujom75JgiwwDQYJKoZIhvcNAQELBQAw EzERMA8GA1UEAxMIQ2hhbmdlTWUwHhcNMTgwMzI4MDg1NjQ5WhcNMjgwMzI1MDg1 NjQ5WjASMRAwDgYDVQQDEwdjbGllbnQxMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8A MIIBCgKCAQEAqXq+oaXFyp24OBuXrAPRxnyg4t7eKl7jh4EmL+T2xnQ5qZfwDBz/ 0mI6MDgqPFDC8DWeO3iJZlNlIBNrHpza2kj53Fw7UB1yyi9fArt3Luj2HdjqXyDw yLTX6dVV/m+dP7Jq1OnnpaG7gbkjKaaS8inc79v1ismJK9ZAwaiQobv1T3Th7eL+ nrKfjCJ/gevHfXocR7PuEe1CwyUEp124Z5fhq7S6JAgmt3WbiBVPIg5lp/pCyfbh K6z1Y5abPVCAJXTqgbaYBLIorO88wn5zn5D6ZFXDTdo3gJgQSlbax6AN5CqyK+Qi U2mF7Cf8+Ma+0eLbOFM62kulaqXX+uUojwIDAQABo4GUMIGRMAkGA1UdEwQCMAAw HQYDVR0OBBYEFJaAOw/CP8O/dnncm/VwlPow8kM9MEMGA1UdIwQ8MDqAFPkigapb gFuoUKfMvUNtmQYZE8OSoRekFTATMREwDwYDVQQDEwhDaGFuZ2VNZYIJAOG5arbs 5t9RMBMGA1UdJQQMMAoGCCsGAQUFBwMCMAsGA1UdDwQEAwIHgDANBgkqhkiG9w0B AQsFAAOCAQEAmU9Y+dP4PH0eh4KMNW0QhseN0t0CK1Nzyu3hNcuIntns3J3VpJ1u 1WKA16mnH8nLu2hNUKnWkOnuvPnwXIprWdg9Zvmct/QEtys4THnG3+5Ni7wVexhU lNU0qZcwGNwqQiZBrHcZZq6pAKtrAH0kD6/l5qCeScPrDIy6w3eFfGa/AJcEBNEN Wruj3hUQxRsv35XFfxEROaklfuLrfr0U1OlWDySSGMQafXjZCmLdxRb5IkI90255 t3yksT9Bj7v/2n++ttlQTH0FK5zY7Uz76A21idiRCw/aVeXvJkafYqi+o/9kkVJh w+Q9Lm+AKGkaaMgz0dt0cmVZgHsnyzOzhQ== -----END CERTIFICATE----- -----BEGIN PRIVATE KEY----- MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQCper6hpcXKnbg4 G5esA9HGfKDi3t4qXuOHgSYv5PbGdDmpl/AMHP/SYjowOCo8UMLwNZ47eIlmU2Ug E2senNraSPncXDtQHXLKL18Cu3cu6PYd2OpfIPDItNfp1VX+b50/smrU6eelobuB uSMpppLyKdzv2/WKyYkr1kDBqJChu/VPdOHt4v6esp+MIn+B68d9ehxHs+4R7ULD JQSnXbhnl+GrtLokCCa3dZuIFU8iDmWn+kLJ9uErrPVjlps9UIAldOqBtpgEsiis 7zzCfnOfkPpkVcNN2jeAmBBKVtrHoA3kKrIr5CJTaYXsJ/z4xr7R4ts4UzraS6Vq pdf65SiPAgMBAAECggEAKwlSUzYHTfZTC1xmXXXy1RZcvH+fpt7FpGk1S0A3Mhnd cqV0fX73r3LmF8yLXRmdBuZ2sd9f9K4EpeqIbxOht4CEgmKhZSy1M4Zn+AemsjDS Hq4whcuVmUHi+iwEVEH/imdCHaLwAe1Z8g0TUsZL1lavFfGjHoUi4hDcDNFDOO5Z +gOL+ZLtAwCibcdTgdW7xXZMY6U4Mg4f7VggFqpuxe90ebaa1DHUYOm4XFQdrEOg KtC93wkFKuz9fXvyCyjk5t3oXO3EQvLSsm0W1LhBYkdZp8fUmkgh7Lz2J/h7/qK9 FYxbkvbFE7Zl1FE0g4kYNgMRq94Dy7IPhrbCXh1XUQKBgQDXYJt0KlfNdIQrZVsg kGkvE9eeEw3XhRCzsKIqnD3DkvkgowD6kpq9rU3tTg1x830QbfPu9L5cQEt5Hlsg zzCWKsjvC8Gnblz4ctvUvl+o9jbIKBf1aSykGGLZqB8rITd+gY8jcRDE637pxmKO HHhN0hjXyhSpjSCeWfvHHt4OdQKBgQDJcfq3nVmO6JBjn8Csywi9OHhodI4IKcLH EuEoJR0akv5l07UQGZXjkT60UUg5uAIU+z/Bk7UOErJckxvMCLzg9/O1ZRCEppdP GKMP4DM/xxdf37zEifBtFzBG9LCoIEJqRwzhaD7jyEg8jEv9G+ege/Bp5W9WDS2P 9bWWF3DCcwKBgHN+0t4QdtUuTlIXIC7uQfmE4nNaNGoGaVZyugOvlU9zWTUvNC8q vuBINymyWXNp5v8Qd2cEx7Agqlhg9u05LgzZFLdbzpVCkYiJz2jeTd4FaosbNP3d UJsOmLOvfEdcoK2uPFv9Hcj7oCssv10F112j9L6DF2F01LEV//ZfjyShAoGAEHjo hoEwZJYx0GOszrRfh5GJjwkQ4CwCCGNL1AuM4LJqaQsxwBpHfm9PEFGhNU8NpIeT BBI++OKggR9qY3nHcCH2ZLvZ6O7yan5aPx8XMbzm9WkHN48MAO+ne/XgSC8zHxum OvxaQCgNeB4EzLKucxoPY6lmPEQhmKb/7UEHcG8CgYEAxhtREMFAL0+uDAJ72WLx qCEM0x9zet5DOLOqxUSlBJILAwwcgGA1DXdjMej/BxZbIHgZANZ3Gj+k3D5m4GQl Pe3DtI3HBLbVH8DeyZC6fJxjaNi16/mbD6puRpPs+w0D2pQwJr6k2uR8+G883RW5 4vcpovBkutR5n1M09M3DyeU= -----END PRIVATE KEY----- -----BEGIN OpenVPN Static key V1----- 79a3add18ba52b97045de864939a9a9e a0a07657bce8a0210c41b7d83d48ec48 81c89db3dbec8b4bfc13424d3813711d f34a4770ebeaf181eeffcd3f38cea425 78006c5b7506a5d9dcb0079daa3b3412 5434af9df560f3a0d29bc8b333479943 0f5839fee349f2079d03c9d31d6e2bf4 26a32180c8e4f6c1579acbfef7596335 a4147c64395ff77927ebe02f2a757d17 a2df3245670c1eff89f9e1025dbc4b07 8d3fcfaf4fbad44d9becf17f5d6d34ee 50d616fb58bc0e29da54a934353701a9 973df9b1f9041706642ff8ed00b24462 5cb52768dd5472093855d0e8fa5b8762 cca2aa48bda3d8964a19842fbf9d2081 ff0075295379f663129723ee9319a789 -----END OpenVPN Static key V1----- ok，把这个client1.ovpn拷贝出来，准备弄到windows上用\n在windows上下载原始的openvpn-gui:\nhttp://img.rendoumi.com/soft/vpn/openvpn-install-2.4.4-I601.exe 然后下载对应的openvpn主文件\nhttps://github.com/lawtancool/openvpn-windows-xor/releases 先安装好openvpn，然后到\nC:\\Program Files\\OpenVPN\\config 把client1.ovpn放进去\n然后以管理员身份启动桌面上的OpenVPN-GUI，右键点击连接就可以连上了。\n","wordCount":"587","inLanguage":"zh","datePublished":"2024-01-24T10:06:11+08:00","dateModified":"2024-01-24T10:06:11+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://rendoumi.com/posts/20240124_freelancer_2/"},"publisher":{"@type":"Organization","name":"八戒的技术博客","logo":{"@type":"ImageObject","url":"https://rendoumi.com/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://rendoumi.com/ accesskey=h title="八戒的技术博客 (Alt + H)">八戒的技术博客</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://rendoumi.com/ title=首页><span>首页</span></a></li><li><a href=https://rendoumi.com/posts/ title=文章><span>文章</span></a></li><li><a href=https://rendoumi.com/archives/ title=归档><span>归档</span></a></li><li><a href=https://blog.rendoumi.com title=生活><span>生活</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=https://rendoumi.com/search/ title=搜索><span>搜索</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">Freelancer任务之二：建一个scramble obfuscated opevpn
<span class=entry-hint title=Draft><svg height="35" viewBox="0 -960 960 960" fill="currentcolor"><path d="M160-410v-60h3e2v60H160zm0-165v-60h470v60H160zm0-165v-60h470v60H160zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22-4.5 22.5T862.09-380L643-160H520zm3e2-263-37-37 37 37zM580-220h38l121-122-18-19-19-18-122 121v38zm141-141-19-18 37 37-18-19z"/></svg></span></h1><div class=post-meta><span title='2024-01-24 10:06:11 +0800 CST'>2024年1月24日</span></div></header><div class=post-content><p>这个很奇怪撒，仔细查了下，原作者是这么说的：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>I have created a patch which introduces some forms of scrambling to the packet payload of any OpenVPN connection.  
</span></span><span class=line><span class=cl>I have been successfully using the patch with Iranian and Chinese users <span class=k>for</span> some <span class=nb>time</span> now.  
</span></span></code></pre></div><p>看来伊朗也比较糟糕啊。</p><p>无语，鉴于在森华易腾无法建openvpn，不知道是直接封了1194的udp端口，还是从协议上封掉了openvpn，总之，都很shit。</p><p>简单说就是对openvpn协议进行了混淆，多了一个配置项：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>scramble 参数  
</span></span><span class=line><span class=cl>scramble reverse <span class=c1>#对传输的数据进行反转，通常这一句就已经可以绕过China和Iran的检测机制了  </span>
</span></span><span class=line><span class=cl>scramble xorptrpos <span class=c1>#对传输的package中的有效数据进行xor运算  </span>
</span></span><span class=line><span class=cl>scramble obfuscate password <span class=c1>#更强烈的加密。反转+xor+密码三种方式全用上. &#34;password&#34; 是你设定的密码</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>用上这个配置项后，建议设置cipher none, 因为如此这般以后，没有必要再制定cipher方式了。另外，用cipher会消耗cpu，而采用scramble消耗cpu的程度比cipher低。
</span></span></code></pre></div><p>搭一个试试看 这里采用的是openvpn 2.4.4版本和相应的patch</p><p>下载：</p><ol><li><a href=2.4.4.zip>2.4.4.zip</a></li><li><a href=master.zip>master.zip</a></li></ol><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1>#centos </span>
</span></span><span class=line><span class=cl>yum -y install unzip  
</span></span><span class=line><span class=cl>yum -y groupinstall <span class=s2>&#34;development tools&#34;</span>  
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#ubuntu</span>
</span></span><span class=line><span class=cl>apt update
</span></span><span class=line><span class=cl>apt install build-essential
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>unzip -x 2.4.4.zip  
</span></span><span class=line><span class=cl>unzip -x master.zip  
</span></span></code></pre></div><p>应用补丁：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> openvpn-release-2.4/  
</span></span><span class=line><span class=cl>git apply ../openvpn_xorpatch-master/openvpn_xor.patch  
</span></span></code></pre></div><p>安装依赖包并编译：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=c1>#cetnos</span>
</span></span><span class=line><span class=cl>yum install -y openssl-devel lz4-devel net-tools lzo-devel pam-devel
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1>#ubuntu</span>
</span></span><span class=line><span class=cl>apt install autoreconf liblzo2-dev libpam0g-dev
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>autoreconf -i -v -f  
</span></span><span class=line><span class=cl>./configure --prefix<span class=o>=</span>/export/servers/openvpn
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>make  
</span></span><span class=line><span class=cl>make install  
</span></span></code></pre></div><p>安装easy-rsa-3.0，不得不击节叫好啊，easy-rsa 3.0比2.0进化多了，就一个可执行文件，也轻省多了：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>wget http://img.rendoumi.com/soft/vpn/easy-rsa.zip  
</span></span><span class=line><span class=cl>unzip -x easy-rsa.zip  
</span></span></code></pre></div><p>建立openvpn配置文件夹</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>mkdir -p /etc/openvpn/conf  
</span></span><span class=line><span class=cl>cp -r easy-rsa-master/easyrsa3/* /etc/openvpn  
</span></span></code></pre></div><p>看看新版easy-rsa-3.0都有什么命令</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /etc/openvpn  
</span></span><span class=line><span class=cl>./easyrsa 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Easy-RSA <span class=m>3</span> usage and overview
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>USAGE: easyrsa <span class=o>[</span>options<span class=o>]</span> COMMAND <span class=o>[</span>command-options<span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>A list of commands is shown below. To get detailed usage and <span class=nb>help</span> <span class=k>for</span> a  
</span></span><span class=line><span class=cl>command, run:  
</span></span><span class=line><span class=cl>  ./easyrsa <span class=nb>help</span> COMMAND
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>For a listing of options that can be supplied before the command, use:  
</span></span><span class=line><span class=cl>  ./easyrsa <span class=nb>help</span> options
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Here is the list of commands available with a short syntax reminder. Use the  
</span></span><span class=line><span class=cl><span class=s1>&#39;help&#39;</span> <span class=nb>command</span> above to get full usage details.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  init-pki
</span></span><span class=line><span class=cl>  build-ca <span class=o>[</span> cmd-opts <span class=o>]</span>
</span></span><span class=line><span class=cl>  gen-dh
</span></span><span class=line><span class=cl>  gen-req &lt;filename_base&gt; <span class=o>[</span> cmd-opts <span class=o>]</span>
</span></span><span class=line><span class=cl>  sign-req &lt;type&gt; &lt;filename_base&gt;
</span></span><span class=line><span class=cl>  build-client-full &lt;filename_base&gt; <span class=o>[</span> cmd-opts <span class=o>]</span>
</span></span><span class=line><span class=cl>  build-server-full &lt;filename_base&gt; <span class=o>[</span> cmd-opts <span class=o>]</span>
</span></span><span class=line><span class=cl>  revoke &lt;filename_base&gt;
</span></span><span class=line><span class=cl>  gen-crl
</span></span><span class=line><span class=cl>  update-db
</span></span><span class=line><span class=cl>  show-req &lt;filename_base&gt; <span class=o>[</span> cmd-opts <span class=o>]</span>
</span></span><span class=line><span class=cl>  show-cert &lt;filename_base&gt; <span class=o>[</span> cmd-opts <span class=o>]</span>
</span></span><span class=line><span class=cl>  import-req &lt;request_file_path&gt; &lt;short_basename&gt;
</span></span><span class=line><span class=cl>  export-p7 &lt;filename_base&gt; <span class=o>[</span> cmd-opts <span class=o>]</span>
</span></span><span class=line><span class=cl>  export-p12 &lt;filename_base&gt; <span class=o>[</span> cmd-opts <span class=o>]</span>
</span></span><span class=line><span class=cl>  set-rsa-pass &lt;filename_base&gt; <span class=o>[</span> cmd-opts <span class=o>]</span>
</span></span><span class=line><span class=cl>  set-ec-pass &lt;filename_base&gt; <span class=o>[</span> cmd-opts <span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>DIRECTORY STATUS <span class=o>(</span>commands would take effect on these locations<span class=o>)</span>  
</span></span><span class=line><span class=cl>  EASYRSA: .
</span></span><span class=line><span class=cl>      PKI:  /etc/openvpn/pki
</span></span></code></pre></div><p>简单明了，一目了然，来吧，一气呵成</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /etc/openvpn  
</span></span><span class=line><span class=cl>./easyrsa init-pki
</span></span><span class=line><span class=cl>./easyrsa --batch build-ca nopass
</span></span><span class=line><span class=cl>./easyrsa --batch build-server-full server nopass
</span></span><span class=line><span class=cl>./easyrsa --batch build-client-full client1 nopass
</span></span><span class=line><span class=cl>./easyrsa gen-dh
</span></span></code></pre></div><p>什么都不用管，就全弄好了，比起easy-rsa 2.0一堆脚本，修改vars，省事多了！！！</p><p>准备server端的配置文件：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nb>cd</span> /etc/openvpn/  
</span></span><span class=line><span class=cl>cp pki/ca.crt pki/dh.pem pki/private/client1.key pki/private/server.key pki/issued/* /etc/openvpn/conf  
</span></span><span class=line><span class=cl><span class=nb>cd</span> /etc/openvpn/conf  
</span></span><span class=line><span class=cl>/export/servers/openvpn/sbin/openvpn --genkey --secret ta.key
</span></span></code></pre></div><p>这样/etc/openvpn/conf下就会有7个文件</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>ca.crt  
</span></span><span class=line><span class=cl>server.key  
</span></span><span class=line><span class=cl>client1.key  
</span></span><span class=line><span class=cl>client1.crt  
</span></span><span class=line><span class=cl>dh.pem  
</span></span><span class=line><span class=cl>server.crt  
</span></span><span class=line><span class=cl>ta.key  
</span></span></code></pre></div><p>准备个模板：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat<span class=s>&lt;&lt;EOF&gt;&gt;/etc/openvpn/conf/server.conf  
</span></span></span><span class=line><span class=cl><span class=s>port 1194  
</span></span></span><span class=line><span class=cl><span class=s>proto udp  
</span></span></span><span class=line><span class=cl><span class=s>dev tun
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>server 10.8.0.0 255.255.255.0
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>scramble obfuscate fuckfuckfuck
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>ca /etc/openvpn/conf/ca.crt  
</span></span></span><span class=line><span class=cl><span class=s>cert /etc/openvpn/conf/server.crt  
</span></span></span><span class=line><span class=cl><span class=s>key /etc/openvpn/conf/server.key  
</span></span></span><span class=line><span class=cl><span class=s>tls-auth /etc/openvpn/conf/ta.key 0  
</span></span></span><span class=line><span class=cl><span class=s>key-direction 0  
</span></span></span><span class=line><span class=cl><span class=s>dh /etc/openvpn/conf/dh.pem  
</span></span></span><span class=line><span class=cl><span class=s>cipher none
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>#push &#34;route 172.16.0.0 255.255.0.0&#34;
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>client-to-client  
</span></span></span><span class=line><span class=cl><span class=s>comp-lzo
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>persist-key  
</span></span></span><span class=line><span class=cl><span class=s>persist-tun
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>user nobody  
</span></span></span><span class=line><span class=cl><span class=s>group nobody
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>ifconfig-pool-persist /etc/openvpn/conf/ipp.txt  
</span></span></span><span class=line><span class=cl><span class=s>status      /var/log/openvpn-status.log  
</span></span></span><span class=line><span class=cl><span class=s>log         /var/log/openvpn.log  
</span></span></span><span class=line><span class=cl><span class=s>log-append  /var/log/openvpn.log
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>keepalive 5 30
</span></span></span><span class=line><span class=cl><span class=s>
</span></span></span><span class=line><span class=cl><span class=s>verb 3  
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>  
</span></span></code></pre></div><p>启动server端</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>/export/servers/openvpn/sbin/openvpn --config /etc/openvpn/server.conf --daemon
</span></span></code></pre></div><p>准备客户端文件</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>cat<span class=s>&lt;&lt;EOF&gt;&gt;/etc/openvpn/conf/client1.ovpn  
</span></span></span><span class=line><span class=cl><span class=s>client  
</span></span></span><span class=line><span class=cl><span class=s>dev tun  
</span></span></span><span class=line><span class=cl><span class=s>proto udp  
</span></span></span><span class=line><span class=cl><span class=s>remote change_this_to_server_address 1194  
</span></span></span><span class=line><span class=cl><span class=s>scramble obfuscate fuckfuckfuck  
</span></span></span><span class=line><span class=cl><span class=s>resolv-retry infinite  
</span></span></span><span class=line><span class=cl><span class=s>nobind  
</span></span></span><span class=line><span class=cl><span class=s>persist-key  
</span></span></span><span class=line><span class=cl><span class=s>persist-tun  
</span></span></span><span class=line><span class=cl><span class=s>user nobody  
</span></span></span><span class=line><span class=cl><span class=s>group nogroup  
</span></span></span><span class=line><span class=cl><span class=s>ca ca.crt  
</span></span></span><span class=line><span class=cl><span class=s>cert client1.crt  
</span></span></span><span class=line><span class=cl><span class=s>key client1.key  
</span></span></span><span class=line><span class=cl><span class=s>tls-auth ta.key 1  
</span></span></span><span class=line><span class=cl><span class=s>remote-cert-tls server  
</span></span></span><span class=line><span class=cl><span class=s>key-direction 1  
</span></span></span><span class=line><span class=cl><span class=s>cipher none  
</span></span></span><span class=line><span class=cl><span class=s>comp-lzo  
</span></span></span><span class=line><span class=cl><span class=s>keepalive 5 30  
</span></span></span><span class=line><span class=cl><span class=s>verb 3  
</span></span></span><span class=line><span class=cl><span class=s>EOF</span>  
</span></span></code></pre></div><p>合并出一个单独的客户端文件 注意merge.sh里面文件的配置：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=nv>ca</span><span class=o>=</span><span class=s2>&#34;ca.crt&#34;</span>  
</span></span><span class=line><span class=cl><span class=nv>cert</span><span class=o>=</span><span class=s2>&#34;client1.crt&#34;</span>  
</span></span><span class=line><span class=cl><span class=nv>key</span><span class=o>=</span><span class=s2>&#34;client1.key&#34;</span>  
</span></span><span class=line><span class=cl><span class=nv>tlsauth</span><span class=o>=</span><span class=s2>&#34;ta.key&#34;</span>  
</span></span><span class=line><span class=cl><span class=nv>ovpndest</span><span class=o>=</span><span class=s2>&#34;client1.ovpn&#34;</span>  
</span></span><span class=line><span class=cl><span class=nb>cd</span> /etc/openvpn/conf  
</span></span><span class=line><span class=cl>wget http://img.rendoumi.com/soft/vpn/merge.sh  
</span></span><span class=line><span class=cl>chmod <span class=m>755</span> merge.sh  
</span></span><span class=line><span class=cl>./merge.sh
</span></span></code></pre></div><p>这样就会合并出一个client1.ovpn客户端连接文件来，全部合一，其实server.conf也可以把所有东西包括进去</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>client  
</span></span><span class=line><span class=cl>dev tun  
</span></span><span class=line><span class=cl>proto udp  
</span></span><span class=line><span class=cl>remote change_this_to_server_address <span class=m>1194</span>  
</span></span><span class=line><span class=cl>scramble obfuscate fuckfuckfuck  
</span></span><span class=line><span class=cl>resolv-retry infinite  
</span></span><span class=line><span class=cl>nobind  
</span></span><span class=line><span class=cl>persist-key  
</span></span><span class=line><span class=cl>persist-tun  
</span></span><span class=line><span class=cl>remote-cert-tls server  
</span></span><span class=line><span class=cl>cipher none  
</span></span><span class=line><span class=cl>comp-lzo  
</span></span><span class=line><span class=cl>verb <span class=m>3</span>  
</span></span><span class=line><span class=cl>key-direction <span class=m>1</span>  
</span></span><span class=line><span class=cl>&lt;ca&gt;  
</span></span><span class=line><span class=cl>-----BEGIN CERTIFICATE-----
</span></span><span class=line><span class=cl>MIIDKzCCAhOgAwIBAgIJAOG5arbs5t9RMA0GCSqGSIb3DQEBCwUAMBMxETAPBgNV  
</span></span><span class=line><span class=cl>BAMTCENoYW5nZU1lMB4XDTE4MDMyODAzNDkyMloXDTI4MDMyNTAzNDkyMlowEzER  
</span></span><span class=line><span class=cl>MA8GA1UEAxMIQ2hhbmdlTWUwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIB  
</span></span><span class=line><span class=cl>AQDMOUuQg49OstGbfPLjTgzwb5YBmBeVxyF3+5jmKbgPXujZ3dvdBwxaslVUwre6  
</span></span><span class=line><span class=cl>XsMUBz3vbB7Kf1BBDHe2jt60p2x2O+ptTb3rRhTPLhdhd9C3HUhwkNYc7jv1+ua3  
</span></span><span class=line><span class=cl>sUlwiYikltKhXGVU3e/XYB+Aiw63mem4ex5T4kJ/KIKoulGhUsaOl9JtPPKbeIlV  
</span></span><span class=line><span class=cl>BgUzBLHNt/9bY7r7m2Fh0VmbD5p5YMZEGrg+WX0qzT4wKD/734VdxuAoFwd7as6s  
</span></span><span class=line><span class=cl>CH73w0ykscV7evUJEaNu1keTqgqG5SuE3HzQ1cmWSSeF84gUes+l2JAivpQ/XTkF  
</span></span><span class=line><span class=cl>wdLnq2caXVTMDF8t/Y1e8JfVAgMBAAGjgYEwfzAdBgNVHQ4EFgQU+SKBqluAW6hQ  
</span></span><span class=line><span class=cl>p8y9Q22ZBhkTw5IwQwYDVR0jBDwwOoAU+SKBqluAW6hQp8y9Q22ZBhkTw5KhF6QV  
</span></span><span class=line><span class=cl>MBMxETAPBgNVBAMTCENoYW5nZU1lggkA4blqtuzm31EwDAYDVR0TBAUwAwEB/zAL  
</span></span><span class=line><span class=cl>BgNVHQ8EBAMCAQYwDQYJKoZIhvcNAQELBQADggEBAL9ZqyMSrrJ2ss/5pQhUBw71  
</span></span><span class=line><span class=cl>nmjeT8DPg7Optiq02oAPdIo06WdJ77Y+mFypGKw8uUHp/h0mL5wBr6NBYbdw+5Lc  
</span></span><span class=line><span class=cl>vv4tCpOzzNW7PJngJWilIdvL1W+y3i3/AolSs7jAradaOQOpI23tOeQAQUmwchmt  
</span></span><span class=line><span class=cl>hvgKH8kyIWlOzxGIHdG9Spv8Oi1X6dwD0t4ddaNqcnCbyC2cBX4TvlXeVixMdBLY  
</span></span><span class=line><span class=cl>xq/5+G6dlJhaUzD4lG9Co7PTctwOFzKIP+mCrhLFCh7v5L6HCqL5ZLI7bWYTy0rm  
</span></span><span class=line><span class=cl>XURbleynyld95FKuul5YFRyb/j+I8iBd3Sw9TWhVuqKb4JX9n6zB1FxkNUX1r4g<span class=o>=</span>  
</span></span><span class=line><span class=cl>-----END CERTIFICATE-----
</span></span><span class=line><span class=cl>&lt;/ca&gt;  
</span></span><span class=line><span class=cl>&lt;cert&gt;  
</span></span><span class=line><span class=cl>-----BEGIN CERTIFICATE-----
</span></span><span class=line><span class=cl>MIIDRTCCAi2gAwIBAgIRALV3i3gqfdbfWujom75JgiwwDQYJKoZIhvcNAQELBQAw  
</span></span><span class=line><span class=cl>EzERMA8GA1UEAxMIQ2hhbmdlTWUwHhcNMTgwMzI4MDg1NjQ5WhcNMjgwMzI1MDg1  
</span></span><span class=line><span class=cl>NjQ5WjASMRAwDgYDVQQDEwdjbGllbnQxMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8A  
</span></span><span class=line><span class=cl>MIIBCgKCAQEAqXq+oaXFyp24OBuXrAPRxnyg4t7eKl7jh4EmL+T2xnQ5qZfwDBz/  
</span></span><span class=line><span class=cl>0mI6MDgqPFDC8DWeO3iJZlNlIBNrHpza2kj53Fw7UB1yyi9fArt3Luj2HdjqXyDw  
</span></span><span class=line><span class=cl>yLTX6dVV/m+dP7Jq1OnnpaG7gbkjKaaS8inc79v1ismJK9ZAwaiQobv1T3Th7eL+  
</span></span><span class=line><span class=cl>nrKfjCJ/gevHfXocR7PuEe1CwyUEp124Z5fhq7S6JAgmt3WbiBVPIg5lp/pCyfbh  
</span></span><span class=line><span class=cl>K6z1Y5abPVCAJXTqgbaYBLIorO88wn5zn5D6ZFXDTdo3gJgQSlbax6AN5CqyK+Qi  
</span></span><span class=line><span class=cl>U2mF7Cf8+Ma+0eLbOFM62kulaqXX+uUojwIDAQABo4GUMIGRMAkGA1UdEwQCMAAw  
</span></span><span class=line><span class=cl>HQYDVR0OBBYEFJaAOw/CP8O/dnncm/VwlPow8kM9MEMGA1UdIwQ8MDqAFPkigapb  
</span></span><span class=line><span class=cl>gFuoUKfMvUNtmQYZE8OSoRekFTATMREwDwYDVQQDEwhDaGFuZ2VNZYIJAOG5arbs  
</span></span><span class=line><span class=cl>5t9RMBMGA1UdJQQMMAoGCCsGAQUFBwMCMAsGA1UdDwQEAwIHgDANBgkqhkiG9w0B  
</span></span><span class=line><span class=cl>AQsFAAOCAQEAmU9Y+dP4PH0eh4KMNW0QhseN0t0CK1Nzyu3hNcuIntns3J3VpJ1u  
</span></span><span class=line><span class=cl>1WKA16mnH8nLu2hNUKnWkOnuvPnwXIprWdg9Zvmct/QEtys4THnG3+5Ni7wVexhU  
</span></span><span class=line><span class=cl>lNU0qZcwGNwqQiZBrHcZZq6pAKtrAH0kD6/l5qCeScPrDIy6w3eFfGa/AJcEBNEN  
</span></span><span class=line><span class=cl>Wruj3hUQxRsv35XFfxEROaklfuLrfr0U1OlWDySSGMQafXjZCmLdxRb5IkI90255  
</span></span><span class=line><span class=cl>t3yksT9Bj7v/2n++ttlQTH0FK5zY7Uz76A21idiRCw/aVeXvJkafYqi+o/9kkVJh  
</span></span><span class=line><span class=cl>w+Q9Lm+AKGkaaMgz0dt0cmVZgHsnyzOzhQ<span class=o>==</span>  
</span></span><span class=line><span class=cl>-----END CERTIFICATE-----
</span></span><span class=line><span class=cl>&lt;/cert&gt;  
</span></span><span class=line><span class=cl>&lt;key&gt;  
</span></span><span class=line><span class=cl>-----BEGIN PRIVATE KEY-----
</span></span><span class=line><span class=cl>MIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQCper6hpcXKnbg4  
</span></span><span class=line><span class=cl>G5esA9HGfKDi3t4qXuOHgSYv5PbGdDmpl/AMHP/SYjowOCo8UMLwNZ47eIlmU2Ug  
</span></span><span class=line><span class=cl>E2senNraSPncXDtQHXLKL18Cu3cu6PYd2OpfIPDItNfp1VX+b50/smrU6eelobuB  
</span></span><span class=line><span class=cl>uSMpppLyKdzv2/WKyYkr1kDBqJChu/VPdOHt4v6esp+MIn+B68d9ehxHs+4R7ULD  
</span></span><span class=line><span class=cl>JQSnXbhnl+GrtLokCCa3dZuIFU8iDmWn+kLJ9uErrPVjlps9UIAldOqBtpgEsiis  
</span></span><span class=line><span class=cl>7zzCfnOfkPpkVcNN2jeAmBBKVtrHoA3kKrIr5CJTaYXsJ/z4xr7R4ts4UzraS6Vq  
</span></span><span class=line><span class=cl>pdf65SiPAgMBAAECggEAKwlSUzYHTfZTC1xmXXXy1RZcvH+fpt7FpGk1S0A3Mhnd  
</span></span><span class=line><span class=cl>cqV0fX73r3LmF8yLXRmdBuZ2sd9f9K4EpeqIbxOht4CEgmKhZSy1M4Zn+AemsjDS  
</span></span><span class=line><span class=cl>Hq4whcuVmUHi+iwEVEH/imdCHaLwAe1Z8g0TUsZL1lavFfGjHoUi4hDcDNFDOO5Z  
</span></span><span class=line><span class=cl>+gOL+ZLtAwCibcdTgdW7xXZMY6U4Mg4f7VggFqpuxe90ebaa1DHUYOm4XFQdrEOg
</span></span><span class=line><span class=cl>KtC93wkFKuz9fXvyCyjk5t3oXO3EQvLSsm0W1LhBYkdZp8fUmkgh7Lz2J/h7/qK9  
</span></span><span class=line><span class=cl>FYxbkvbFE7Zl1FE0g4kYNgMRq94Dy7IPhrbCXh1XUQKBgQDXYJt0KlfNdIQrZVsg  
</span></span><span class=line><span class=cl>kGkvE9eeEw3XhRCzsKIqnD3DkvkgowD6kpq9rU3tTg1x830QbfPu9L5cQEt5Hlsg  
</span></span><span class=line><span class=cl>zzCWKsjvC8Gnblz4ctvUvl+o9jbIKBf1aSykGGLZqB8rITd+gY8jcRDE637pxmKO  
</span></span><span class=line><span class=cl>HHhN0hjXyhSpjSCeWfvHHt4OdQKBgQDJcfq3nVmO6JBjn8Csywi9OHhodI4IKcLH  
</span></span><span class=line><span class=cl>EuEoJR0akv5l07UQGZXjkT60UUg5uAIU+z/Bk7UOErJckxvMCLzg9/O1ZRCEppdP  
</span></span><span class=line><span class=cl>GKMP4DM/xxdf37zEifBtFzBG9LCoIEJqRwzhaD7jyEg8jEv9G+ege/Bp5W9WDS2P  
</span></span><span class=line><span class=cl>9bWWF3DCcwKBgHN+0t4QdtUuTlIXIC7uQfmE4nNaNGoGaVZyugOvlU9zWTUvNC8q  
</span></span><span class=line><span class=cl>vuBINymyWXNp5v8Qd2cEx7Agqlhg9u05LgzZFLdbzpVCkYiJz2jeTd4FaosbNP3d  
</span></span><span class=line><span class=cl>UJsOmLOvfEdcoK2uPFv9Hcj7oCssv10F112j9L6DF2F01LEV//ZfjyShAoGAEHjo  
</span></span><span class=line><span class=cl>hoEwZJYx0GOszrRfh5GJjwkQ4CwCCGNL1AuM4LJqaQsxwBpHfm9PEFGhNU8NpIeT  
</span></span><span class=line><span class=cl>BBI++OKggR9qY3nHcCH2ZLvZ6O7yan5aPx8XMbzm9WkHN48MAO+ne/XgSC8zHxum  
</span></span><span class=line><span class=cl>OvxaQCgNeB4EzLKucxoPY6lmPEQhmKb/7UEHcG8CgYEAxhtREMFAL0+uDAJ72WLx  
</span></span><span class=line><span class=cl>qCEM0x9zet5DOLOqxUSlBJILAwwcgGA1DXdjMej/BxZbIHgZANZ3Gj+k3D5m4GQl  
</span></span><span class=line><span class=cl>Pe3DtI3HBLbVH8DeyZC6fJxjaNi16/mbD6puRpPs+w0D2pQwJr6k2uR8+G883RW5  
</span></span><span class=line><span class=cl><span class=nv>4vcpovBkutR5n1M09M3DyeU</span><span class=o>=</span>  
</span></span><span class=line><span class=cl>-----END PRIVATE KEY-----
</span></span><span class=line><span class=cl>&lt;/key&gt;  
</span></span><span class=line><span class=cl>&lt;tls-auth&gt;  
</span></span><span class=line><span class=cl>-----BEGIN OpenVPN Static key V1-----
</span></span><span class=line><span class=cl>79a3add18ba52b97045de864939a9a9e  
</span></span><span class=line><span class=cl>a0a07657bce8a0210c41b7d83d48ec48  
</span></span><span class=line><span class=cl>81c89db3dbec8b4bfc13424d3813711d  
</span></span><span class=line><span class=cl>f34a4770ebeaf181eeffcd3f38cea425  
</span></span><span class=line><span class=cl>78006c5b7506a5d9dcb0079daa3b3412  
</span></span><span class=line><span class=cl>5434af9df560f3a0d29bc8b333479943  
</span></span><span class=line><span class=cl>0f5839fee349f2079d03c9d31d6e2bf4  
</span></span><span class=line><span class=cl>26a32180c8e4f6c1579acbfef7596335  
</span></span><span class=line><span class=cl>a4147c64395ff77927ebe02f2a757d17  
</span></span><span class=line><span class=cl>a2df3245670c1eff89f9e1025dbc4b07  
</span></span><span class=line><span class=cl>8d3fcfaf4fbad44d9becf17f5d6d34ee  
</span></span><span class=line><span class=cl>50d616fb58bc0e29da54a934353701a9  
</span></span><span class=line><span class=cl>973df9b1f9041706642ff8ed00b24462  
</span></span><span class=line><span class=cl>5cb52768dd5472093855d0e8fa5b8762  
</span></span><span class=line><span class=cl>cca2aa48bda3d8964a19842fbf9d2081  
</span></span><span class=line><span class=cl>ff0075295379f663129723ee9319a789  
</span></span><span class=line><span class=cl>-----END OpenVPN Static key V1-----
</span></span><span class=line><span class=cl>&lt;/tls-auth&gt;  
</span></span></code></pre></div><p>ok，把这个client1.ovpn拷贝出来，准备弄到windows上用</p><p>在windows上下载原始的openvpn-gui:</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>http://img.rendoumi.com/soft/vpn/openvpn-install-2.4.4-I601.exe  
</span></span></code></pre></div><p>然后下载对应的openvpn主文件</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl> https://github.com/lawtancool/openvpn-windows-xor/releases
</span></span></code></pre></div><p>先安装好openvpn，然后到</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>C:<span class=se>\P</span>rogram Files<span class=se>\O</span>penVPN<span class=se>\c</span>onfig  
</span></span></code></pre></div><p>把client1.ovpn放进去</p><p>然后以<code>管理员</code>身份启动桌面上的OpenVPN-GUI，右键点击连接就可以连上了。</p><p><img alt=image-20240124105244194 loading=lazy src=/posts/20240124_freelancer_2/image-20240124105244194.png></p><p><img alt=image-20240124105323120 loading=lazy src=/posts/20240124_freelancer_2/image-20240124105323120.png></p></div><footer class=post-footer><ul class=post-tags></ul></footer></article></main><footer class=footer><span>Copyright © 2020-2025 Zhang Ranrui. All Rights Reserved.</span><br>·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{const e=document.querySelector("html");e.dataset.theme==="dark"?(e.dataset.theme="light",localStorage.setItem("pref-theme","light")):(e.dataset.theme="dark",localStorage.setItem("pref-theme","dark"))})</script></body></html>