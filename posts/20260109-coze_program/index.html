<!doctype html><html lang=zh dir=auto data-theme=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3988508441804851" crossorigin=anonymous></script><title>薅羊毛之扣子编程 | 八戒的技术博客</title>
<meta name=keywords content><meta name=description content="前几天佬友说扣子编程出了一个免费版，所以也想薅一把
事先声明：扣子编程是国内的，所以无法翻墙，本质也是一个容器。能做一个代理隐藏IP来访问国内的网站。
所以，说老实话，自己很少有这个场景来使用
废话不多说，直接开始:
扣子编程的网址：https://code.coze.cn
本质是火山引擎旗下的东西，也是一个容器，而且吧，比较有意思，跟 claude 和 codex 差不多
基本是：讲述式编程方式，一天智能建3个项目，一个项目是1cpu，2G内存
打开网站，新建项目，然后点击网页应用，下面的文本输入框就是编程的地方了：

我们先让它自己生成一个应用，再在生成的基础上进行修改，直接硬来会有无穷的麻烦，它有自己固定的架构
建立一个极简的nodejs程序，不依赖任何前端和后端框架，不要用到next框架。前端页面是index.html，里面是Hello world，主程序是index.js，用来显示index.html的内容，绝对不要用到任何js框架。
然后系统就叽里呱啦、哔哔赖赖开始自己搞了，它缺省创立的项目无论你再怎么强调，都是基于next.js的，都会拉出一坨next的屎，所以会神经兮兮的思考来思考去，产生一堆废物，我们可以不用理他
然后显示正常

从上图我们得到几个关键信息：

端口是5000
文件夹可以看到文件，里面有一堆缺省的配置，就算强调，依然有next拉的屎
部署按钮，我们部署测试一下

按部署按钮，会得到一个域名

然后部署成功，点击箭头

打开后，就是我们想要的

我们记下来这个域名，大善人啊，免费域名和免费证书
然后回到文件夹，来修改三个文件，index.html 和 index.js 和 package.json
先来改 package.json, 在dependencies中，加两句，注意这两句的上一句需要加个逗号，axios最后没有逗号

    &#34;ws&#34;: &#34;^8.14.2&#34;,
    &#34;axios&#34;: &#34;^1.12.2&#34;

注意：写到最后，发现这里可以再部署一下再改index.jsp和index.html比较好，就不用经历我下面的回档了！！！！！
我下面是没有再部署，直接硬改，点开文件夹图标，选中index.js，先别贴，需要修改混淆的：
const http = require('http');
const https = require('https');
const fs = require('fs');
const dns = require('dns');
const axios = require('axios');
const net = require('net');
const path = require('path');
const crypto = require('crypto');
const { Buffer } = require('buffer');
const { WebSocket, createWebSocketStream } = require('ws');

// 生成 UUID v4
function generateUUID() {
  return crypto.randomUUID();
}

const UUID = process.env.UUID || generateUUID();
const DOMAIN = process.env.DOMAIN || 'xxxxxxxx.coze.site'; // 填写项目域名
const WSPATH = process.env.WSPATH || UUID.slice(0, 8);     // 节点路径，默认获取uuid前8位
const SUB_PATH = process.env.SUB_PATH || 'sub';            // 节点的订阅路径
const NAME = process.env.NAME || '';                       // 节点名称
const PORT = process.env.PORT || 5000;                     // http和ws服务端口
const TLS_KEY_PATH = process.env.TLS_KEY_PATH || '';
const TLS_CERT_PATH = process.env.TLS_CERT_PATH || ''; 

let ISP = '';
const GetISP = async () => {
  try {
    const res = await axios.get('https://api.ip.sb/geoip');
    const data = res.data;
    ISP = `${data.country_code}-${data.isp}`.replace(/ /g, '_');
  } catch (e) {
    ISP = 'Unknown';
  }
}
GetISP();

function normalizeSecret(value) {
  if (!value) return '';
  return value.includes('\\n') ? value.replace(/\\n/g, '\n') : value;
}

function readOptionalFile(filePath) {
  if (!filePath) return '';
  const resolvedPath = path.isAbsolute(filePath) ? filePath : path.join(__dirname, filePath);
  try {
    return fs.readFileSync(resolvedPath, 'utf8');
  } catch (error) {
    console.warn(`Failed to read TLS file ${resolvedPath}: ${error.message}`);
    return '';
  }
}

function getTLSOptions() {
  let key = normalizeSecret(process.env.TLS_KEY);
  let cert = normalizeSecret(process.env.TLS_CERT);

  if (!key) {
    key = readOptionalFile(TLS_KEY_PATH);
  }
  if (!cert) {
    cert = readOptionalFile(TLS_CERT_PATH);
  }

  if (key && cert) {
    return { key, cert };
  }
  if (key || cert) {
    console.warn('Both TLS key and certificate are required; falling back to HTTP.');
  }
  return null;
}

const requestHandler = (req, res) => {
  if (req.url === '/') {
    const filePath = path.join(__dirname, 'index.html');
    fs.readFile(filePath, 'utf8', (err, content) => {
      if (err) {
        res.writeHead(200, { 'Content-Type': 'text/html' });
        res.end('Hello world!');
        return;
      }
      res.writeHead(200, { 'Content-Type': 'text/html' });
      res.end(content);
    });
    return;
  } else if (req.url === `/${SUB_PATH}`) {
    const namePart = NAME ? `${NAME}-${ISP}` : ISP;
    const vlessURL = `vless://${UUID}@${DOMAIN}:443?encryption=none&amp;security=tls&amp;sni=${DOMAIN}&amp;fp=chrome&amp;type=ws&amp;host=${DOMAIN}&amp;path=%2F${WSPATH}#${namePart}`;
    const trojanURL = `trojan://${UUID}@${DOMAIN}:443?security=tls&amp;sni=${DOMAIN}&amp;fp=chrome&amp;type=ws&amp;host=${DOMAIN}&amp;path=%2F${WSPATH}#${namePart}`;
    const subscription = vlessURL + '\n' + trojanURL;
    const base64Content = Buffer.from(subscription).toString('base64');

    res.writeHead(200, { 'Content-Type': 'text/plain' });
    res.end(base64Content + '\n');
  } else {
    res.writeHead(404, { 'Content-Type': 'text/plain' });
    res.end('Not Found\n');
  }
};

const tlsOptions = getTLSOptions();
const httpServer = tlsOptions ? https.createServer(tlsOptions, requestHandler) : http.createServer(requestHandler);

const wss = new WebSocket.Server({ server: httpServer });
const uuid = UUID.replace(/-/g, &#34;&#34;);
const DNS_SERVERS = ['114.114.114.114', '223.5.5.5'];
// Custom DNS
async function resolveHost(host) {
  const target = String(host || '').trim();
  if (!target) throw new Error('Host is empty');

  if (net.isIP(target)) return target;

  try {
    const addresses = await dns.promises.lookup(target, { all: true });
    const preferred = addresses.find(a => a.family === 4) || addresses[0];
    if (preferred?.address) return preferred.address;
  } catch (_) {
    // fall through to custom DNS servers
  }

  const resolver = new dns.promises.Resolver();
  for (const server of DNS_SERVERS) {
    try {
      resolver.setServers([server]);
      const v4 = await resolver.resolve4(target);
      if (v4?.[0]) return v4[0];
    } catch (_) {}
    try {
      resolver.setServers([server]);
      const v6 = await resolver.resolve6(target);
      if (v6?.[0]) return v6[0];
    } catch (_) {}
  }

  throw new Error(`Failed to resolve ${target}`);
}

// VLE-SS处理
function handleVlessConnection(ws, msg) {
  const [VERSION] = msg;
  const id = msg.slice(1, 17);
  if (!id.every((v, i) => v == parseInt(uuid.substr(i * 2, 2), 16))) return false;

  let i = msg.slice(17, 18).readUInt8() + 19;
  const port = msg.slice(i, i += 2).readUInt16BE(0);
  const ATYP = msg.slice(i, i += 1).readUInt8();
  const host = ATYP == 1 ? msg.slice(i, i += 4).join('.') :
    (ATYP == 2 ? new TextDecoder().decode(msg.slice(i + 1, i += 1 + msg.slice(i, i + 1).readUInt8())) :
    (ATYP == 3 ? msg.slice(i, i += 16).reduce((s, b, i, a) => (i % 2 ? s.concat(a.slice(i - 1, i + 1)) : s), []).map(b => b.readUInt16BE(0).toString(16)).join(':') : ''));
  ws.send(new Uint8Array([VERSION, 0]));
  const duplex = createWebSocketStream(ws);
  resolveHost(host)
    .then(resolvedIP => {
      net.connect({ host: resolvedIP, port }, function() {
        this.write(msg.slice(i));
        duplex.on('error', () => {}).pipe(this).on('error', () => {}).pipe(duplex);
      }).on('error', () => {});
    })
    .catch(error => {
      net.connect({ host, port }, function() {
        this.write(msg.slice(i));
        duplex.on('error', () => {}).pipe(this).on('error', () => {}).pipe(duplex);
      }).on('error', () => {});
    });

  return true;
}

// Tro-jan处理
function handleTrojanConnection(ws, msg) {
  try {
    if (msg.length < 58) return false;
    const receivedPasswordHash = msg.slice(0, 56).toString();
    const possiblePasswords = [
      UUID,
    ];

    let matchedPassword = null;
    for (const pwd of possiblePasswords) {
      const hash = crypto.createHash('sha224').update(pwd).digest('hex');
      if (hash === receivedPasswordHash) {
        matchedPassword = pwd;
        break;
      }
    }

    if (!matchedPassword) return false;
    let offset = 56;
    if (msg[offset] === 0x0d && msg[offset + 1] === 0x0a) {
      offset += 2;
    }

    const cmd = msg[offset];
    if (cmd !== 0x01) return false;
    offset += 1;
    const atyp = msg[offset];
    offset += 1;
    let host, port;
    if (atyp === 0x01) {
      host = msg.slice(offset, offset + 4).join('.');
      offset += 4;
    } else if (atyp === 0x03) {
      const hostLen = msg[offset];
      offset += 1;
      host = msg.slice(offset, offset + hostLen).toString();
      offset += hostLen;
    } else if (atyp === 0x04) {
      host = msg.slice(offset, offset + 16).reduce((s, b, i, a) => 
        (i % 2 ? s.concat(a.slice(i - 1, i + 1)) : s), [])
        .map(b => b.readUInt16BE(0).toString(16)).join(':');
      offset += 16;
    } else {
      return false;
    }

    port = msg.readUInt16BE(offset);
    offset += 2;

    if (offset < msg.length && msg[offset] === 0x0d && msg[offset + 1] === 0x0a) {
      offset += 2;
    }

    const duplex = createWebSocketStream(ws);

    resolveHost(host)
      .then(resolvedIP => {
        net.connect({ host: resolvedIP, port }, function() {
          if (offset < msg.length) {
            this.write(msg.slice(offset));
          }
          duplex.on('error', () => {}).pipe(this).on('error', () => {}).pipe(duplex);
        }).on('error', () => {});
      })
      .catch(error => {
        net.connect({ host, port }, function() {
          if (offset < msg.length) {
            this.write(msg.slice(offset));
          }
          duplex.on('error', () => {}).pipe(this).on('error', () => {}).pipe(duplex);
        }).on('error', () => {});
      });

    return true;
  } catch (error) {
    return false;
  }
}
// Ws 连接处理
wss.on('connection', (ws, req) => {
  const url = req.url || '';
  ws.once('message', msg => {
    if (msg.length > 17 && msg[0] === 0) {
      const id = msg.slice(1, 17);
      const isVless = id.every((v, i) => v == parseInt(uuid.substr(i * 2, 2), 16));
      if (isVless) {
        if (!handleVlessConnection(ws, msg)) {
          ws.close();
        }
        return;
      }
    }

    if (!handleTrojanConnection(ws, msg)) {
      ws.close();
    }
  }).on('error', () => {});
});

httpServer.listen(PORT, () => {
  const scheme = tlsOptions ? 'HTTPS/WSS' : 'HTTP/WS';
  console.log(`Server is running on ${scheme} port ${PORT}`);
});
原始文件长这样："><meta name=author content="八戒"><link rel=canonical href=https://rendoumi.com/posts/20260109-coze_program/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.5d8a858b4ad07d913988e10d3c3dbc8c171f45316a396de8a60d67f44840812d.css integrity="sha256-XYqFi0rQfZE5iOENPD28jBcfRTFqOW3opg1n9EhAgS0=" rel="preload stylesheet" as=style><link rel=icon href=https://rendoumi.com/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://rendoumi.com/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://rendoumi.com/favicon-32x32.png><link rel=apple-touch-icon href=https://rendoumi.com/apple-touch-icon.png><link rel=mask-icon href=https://rendoumi.com/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=zh href=https://rendoumi.com/posts/20260109-coze_program/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51);color-scheme:dark}.list{background:var(--theme)}.toc{background:var(--entry)}}@media(prefers-color-scheme:light){.list::-webkit-scrollbar-thumb{border-color:var(--code-bg)}}</style></noscript><script>window.matchMedia("(prefers-color-scheme: dark)").matches?document.querySelector("html").dataset.theme="dark":document.querySelector("html").dataset.theme="light"</script><meta property="og:url" content="https://rendoumi.com/posts/20260109-coze_program/"><meta property="og:site_name" content="八戒的技术博客"><meta property="og:title" content="薅羊毛之扣子编程"><meta property="og:description" content="前几天佬友说扣子编程出了一个免费版，所以也想薅一把
事先声明：扣子编程是国内的，所以无法翻墙，本质也是一个容器。能做一个代理隐藏IP来访问国内的网站。
所以，说老实话，自己很少有这个场景来使用
废话不多说，直接开始:
扣子编程的网址：https://code.coze.cn
本质是火山引擎旗下的东西，也是一个容器，而且吧，比较有意思，跟 claude 和 codex 差不多
基本是：讲述式编程方式，一天智能建3个项目，一个项目是1cpu，2G内存
打开网站，新建项目，然后点击网页应用，下面的文本输入框就是编程的地方了：
我们先让它自己生成一个应用，再在生成的基础上进行修改，直接硬来会有无穷的麻烦，它有自己固定的架构
建立一个极简的nodejs程序，不依赖任何前端和后端框架，不要用到next框架。前端页面是index.html，里面是Hello world，主程序是index.js，用来显示index.html的内容，绝对不要用到任何js框架。 然后系统就叽里呱啦、哔哔赖赖开始自己搞了，它缺省创立的项目无论你再怎么强调，都是基于next.js的，都会拉出一坨next的屎，所以会神经兮兮的思考来思考去，产生一堆废物，我们可以不用理他
然后显示正常
从上图我们得到几个关键信息：
端口是5000 文件夹可以看到文件，里面有一堆缺省的配置，就算强调，依然有next拉的屎 部署按钮，我们部署测试一下 按部署按钮，会得到一个域名
然后部署成功，点击箭头
打开后，就是我们想要的
我们记下来这个域名，大善人啊，免费域名和免费证书
然后回到文件夹，来修改三个文件，index.html 和 index.js 和 package.json
先来改 package.json, 在dependencies中，加两句，注意这两句的上一句需要加个逗号，axios最后没有逗号
&#34;ws&#34;: &#34;^8.14.2&#34;, &#34;axios&#34;: &#34;^1.12.2&#34; 注意：写到最后，发现这里可以再部署一下再改index.jsp和index.html比较好，就不用经历我下面的回档了！！！！！
我下面是没有再部署，直接硬改，点开文件夹图标，选中index.js，先别贴，需要修改混淆的：
const http = require('http'); const https = require('https'); const fs = require('fs'); const dns = require('dns'); const axios = require('axios'); const net = require('net'); const path = require('path'); const crypto = require('crypto'); const { Buffer } = require('buffer'); const { WebSocket, createWebSocketStream } = require('ws'); // 生成 UUID v4 function generateUUID() { return crypto.randomUUID(); } const UUID = process.env.UUID || generateUUID(); const DOMAIN = process.env.DOMAIN || 'xxxxxxxx.coze.site'; // 填写项目域名 const WSPATH = process.env.WSPATH || UUID.slice(0, 8); // 节点路径，默认获取uuid前8位 const SUB_PATH = process.env.SUB_PATH || 'sub'; // 节点的订阅路径 const NAME = process.env.NAME || ''; // 节点名称 const PORT = process.env.PORT || 5000; // http和ws服务端口 const TLS_KEY_PATH = process.env.TLS_KEY_PATH || ''; const TLS_CERT_PATH = process.env.TLS_CERT_PATH || ''; let ISP = ''; const GetISP = async () => { try { const res = await axios.get('https://api.ip.sb/geoip'); const data = res.data; ISP = `${data.country_code}-${data.isp}`.replace(/ /g, '_'); } catch (e) { ISP = 'Unknown'; } } GetISP(); function normalizeSecret(value) { if (!value) return ''; return value.includes('\\n') ? value.replace(/\\n/g, '\n') : value; } function readOptionalFile(filePath) { if (!filePath) return ''; const resolvedPath = path.isAbsolute(filePath) ? filePath : path.join(__dirname, filePath); try { return fs.readFileSync(resolvedPath, 'utf8'); } catch (error) { console.warn(`Failed to read TLS file ${resolvedPath}: ${error.message}`); return ''; } } function getTLSOptions() { let key = normalizeSecret(process.env.TLS_KEY); let cert = normalizeSecret(process.env.TLS_CERT); if (!key) { key = readOptionalFile(TLS_KEY_PATH); } if (!cert) { cert = readOptionalFile(TLS_CERT_PATH); } if (key && cert) { return { key, cert }; } if (key || cert) { console.warn('Both TLS key and certificate are required; falling back to HTTP.'); } return null; } const requestHandler = (req, res) => { if (req.url === '/') { const filePath = path.join(__dirname, 'index.html'); fs.readFile(filePath, 'utf8', (err, content) => { if (err) { res.writeHead(200, { 'Content-Type': 'text/html' }); res.end('Hello world!'); return; } res.writeHead(200, { 'Content-Type': 'text/html' }); res.end(content); }); return; } else if (req.url === `/${SUB_PATH}`) { const namePart = NAME ? `${NAME}-${ISP}` : ISP; const vlessURL = `vless://${UUID}@${DOMAIN}:443?encryption=none&amp;security=tls&amp;sni=${DOMAIN}&amp;fp=chrome&amp;type=ws&amp;host=${DOMAIN}&amp;path=%2F${WSPATH}#${namePart}`; const trojanURL = `trojan://${UUID}@${DOMAIN}:443?security=tls&amp;sni=${DOMAIN}&amp;fp=chrome&amp;type=ws&amp;host=${DOMAIN}&amp;path=%2F${WSPATH}#${namePart}`; const subscription = vlessURL + '\n' + trojanURL; const base64Content = Buffer.from(subscription).toString('base64'); res.writeHead(200, { 'Content-Type': 'text/plain' }); res.end(base64Content + '\n'); } else { res.writeHead(404, { 'Content-Type': 'text/plain' }); res.end('Not Found\n'); } }; const tlsOptions = getTLSOptions(); const httpServer = tlsOptions ? https.createServer(tlsOptions, requestHandler) : http.createServer(requestHandler); const wss = new WebSocket.Server({ server: httpServer }); const uuid = UUID.replace(/-/g, &#34;&#34;); const DNS_SERVERS = ['114.114.114.114', '223.5.5.5']; // Custom DNS async function resolveHost(host) { const target = String(host || '').trim(); if (!target) throw new Error('Host is empty'); if (net.isIP(target)) return target; try { const addresses = await dns.promises.lookup(target, { all: true }); const preferred = addresses.find(a => a.family === 4) || addresses[0]; if (preferred?.address) return preferred.address; } catch (_) { // fall through to custom DNS servers } const resolver = new dns.promises.Resolver(); for (const server of DNS_SERVERS) { try { resolver.setServers([server]); const v4 = await resolver.resolve4(target); if (v4?.[0]) return v4[0]; } catch (_) {} try { resolver.setServers([server]); const v6 = await resolver.resolve6(target); if (v6?.[0]) return v6[0]; } catch (_) {} } throw new Error(`Failed to resolve ${target}`); } // VLE-SS处理 function handleVlessConnection(ws, msg) { const [VERSION] = msg; const id = msg.slice(1, 17); if (!id.every((v, i) => v == parseInt(uuid.substr(i * 2, 2), 16))) return false; let i = msg.slice(17, 18).readUInt8() + 19; const port = msg.slice(i, i += 2).readUInt16BE(0); const ATYP = msg.slice(i, i += 1).readUInt8(); const host = ATYP == 1 ? msg.slice(i, i += 4).join('.') : (ATYP == 2 ? new TextDecoder().decode(msg.slice(i + 1, i += 1 + msg.slice(i, i + 1).readUInt8())) : (ATYP == 3 ? msg.slice(i, i += 16).reduce((s, b, i, a) => (i % 2 ? s.concat(a.slice(i - 1, i + 1)) : s), []).map(b => b.readUInt16BE(0).toString(16)).join(':') : '')); ws.send(new Uint8Array([VERSION, 0])); const duplex = createWebSocketStream(ws); resolveHost(host) .then(resolvedIP => { net.connect({ host: resolvedIP, port }, function() { this.write(msg.slice(i)); duplex.on('error', () => {}).pipe(this).on('error', () => {}).pipe(duplex); }).on('error', () => {}); }) .catch(error => { net.connect({ host, port }, function() { this.write(msg.slice(i)); duplex.on('error', () => {}).pipe(this).on('error', () => {}).pipe(duplex); }).on('error', () => {}); }); return true; } // Tro-jan处理 function handleTrojanConnection(ws, msg) { try { if (msg.length < 58) return false; const receivedPasswordHash = msg.slice(0, 56).toString(); const possiblePasswords = [ UUID, ]; let matchedPassword = null; for (const pwd of possiblePasswords) { const hash = crypto.createHash('sha224').update(pwd).digest('hex'); if (hash === receivedPasswordHash) { matchedPassword = pwd; break; } } if (!matchedPassword) return false; let offset = 56; if (msg[offset] === 0x0d && msg[offset + 1] === 0x0a) { offset += 2; } const cmd = msg[offset]; if (cmd !== 0x01) return false; offset += 1; const atyp = msg[offset]; offset += 1; let host, port; if (atyp === 0x01) { host = msg.slice(offset, offset + 4).join('.'); offset += 4; } else if (atyp === 0x03) { const hostLen = msg[offset]; offset += 1; host = msg.slice(offset, offset + hostLen).toString(); offset += hostLen; } else if (atyp === 0x04) { host = msg.slice(offset, offset + 16).reduce((s, b, i, a) => (i % 2 ? s.concat(a.slice(i - 1, i + 1)) : s), []) .map(b => b.readUInt16BE(0).toString(16)).join(':'); offset += 16; } else { return false; } port = msg.readUInt16BE(offset); offset += 2; if (offset < msg.length && msg[offset] === 0x0d && msg[offset + 1] === 0x0a) { offset += 2; } const duplex = createWebSocketStream(ws); resolveHost(host) .then(resolvedIP => { net.connect({ host: resolvedIP, port }, function() { if (offset < msg.length) { this.write(msg.slice(offset)); } duplex.on('error', () => {}).pipe(this).on('error', () => {}).pipe(duplex); }).on('error', () => {}); }) .catch(error => { net.connect({ host, port }, function() { if (offset < msg.length) { this.write(msg.slice(offset)); } duplex.on('error', () => {}).pipe(this).on('error', () => {}).pipe(duplex); }).on('error', () => {}); }); return true; } catch (error) { return false; } } // Ws 连接处理 wss.on('connection', (ws, req) => { const url = req.url || ''; ws.once('message', msg => { if (msg.length > 17 && msg[0] === 0) { const id = msg.slice(1, 17); const isVless = id.every((v, i) => v == parseInt(uuid.substr(i * 2, 2), 16)); if (isVless) { if (!handleVlessConnection(ws, msg)) { ws.close(); } return; } } if (!handleTrojanConnection(ws, msg)) { ws.close(); } }).on('error', () => {}); }); httpServer.listen(PORT, () => { const scheme = tlsOptions ? 'HTTPS/WSS' : 'HTTP/WS'; console.log(`Server is running on ${scheme} port ${PORT}`); }); 原始文件长这样："><meta property="og:locale" content="zh"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2026-01-06T09:01:02+08:00"><meta property="article:modified_time" content="2026-01-06T09:01:02+08:00"><meta property="og:image" content="https://rendoumi.com/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://rendoumi.com/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="薅羊毛之扣子编程"><meta name=twitter:description content="前几天佬友说扣子编程出了一个免费版，所以也想薅一把
事先声明：扣子编程是国内的，所以无法翻墙，本质也是一个容器。能做一个代理隐藏IP来访问国内的网站。
所以，说老实话，自己很少有这个场景来使用
废话不多说，直接开始:
扣子编程的网址：https://code.coze.cn
本质是火山引擎旗下的东西，也是一个容器，而且吧，比较有意思，跟 claude 和 codex 差不多
基本是：讲述式编程方式，一天智能建3个项目，一个项目是1cpu，2G内存
打开网站，新建项目，然后点击网页应用，下面的文本输入框就是编程的地方了：

我们先让它自己生成一个应用，再在生成的基础上进行修改，直接硬来会有无穷的麻烦，它有自己固定的架构
建立一个极简的nodejs程序，不依赖任何前端和后端框架，不要用到next框架。前端页面是index.html，里面是Hello world，主程序是index.js，用来显示index.html的内容，绝对不要用到任何js框架。
然后系统就叽里呱啦、哔哔赖赖开始自己搞了，它缺省创立的项目无论你再怎么强调，都是基于next.js的，都会拉出一坨next的屎，所以会神经兮兮的思考来思考去，产生一堆废物，我们可以不用理他
然后显示正常

从上图我们得到几个关键信息：

端口是5000
文件夹可以看到文件，里面有一堆缺省的配置，就算强调，依然有next拉的屎
部署按钮，我们部署测试一下

按部署按钮，会得到一个域名

然后部署成功，点击箭头

打开后，就是我们想要的

我们记下来这个域名，大善人啊，免费域名和免费证书
然后回到文件夹，来修改三个文件，index.html 和 index.js 和 package.json
先来改 package.json, 在dependencies中，加两句，注意这两句的上一句需要加个逗号，axios最后没有逗号

    &#34;ws&#34;: &#34;^8.14.2&#34;,
    &#34;axios&#34;: &#34;^1.12.2&#34;

注意：写到最后，发现这里可以再部署一下再改index.jsp和index.html比较好，就不用经历我下面的回档了！！！！！
我下面是没有再部署，直接硬改，点开文件夹图标，选中index.js，先别贴，需要修改混淆的：
const http = require('http');
const https = require('https');
const fs = require('fs');
const dns = require('dns');
const axios = require('axios');
const net = require('net');
const path = require('path');
const crypto = require('crypto');
const { Buffer } = require('buffer');
const { WebSocket, createWebSocketStream } = require('ws');

// 生成 UUID v4
function generateUUID() {
  return crypto.randomUUID();
}

const UUID = process.env.UUID || generateUUID();
const DOMAIN = process.env.DOMAIN || 'xxxxxxxx.coze.site'; // 填写项目域名
const WSPATH = process.env.WSPATH || UUID.slice(0, 8);     // 节点路径，默认获取uuid前8位
const SUB_PATH = process.env.SUB_PATH || 'sub';            // 节点的订阅路径
const NAME = process.env.NAME || '';                       // 节点名称
const PORT = process.env.PORT || 5000;                     // http和ws服务端口
const TLS_KEY_PATH = process.env.TLS_KEY_PATH || '';
const TLS_CERT_PATH = process.env.TLS_CERT_PATH || ''; 

let ISP = '';
const GetISP = async () => {
  try {
    const res = await axios.get('https://api.ip.sb/geoip');
    const data = res.data;
    ISP = `${data.country_code}-${data.isp}`.replace(/ /g, '_');
  } catch (e) {
    ISP = 'Unknown';
  }
}
GetISP();

function normalizeSecret(value) {
  if (!value) return '';
  return value.includes('\\n') ? value.replace(/\\n/g, '\n') : value;
}

function readOptionalFile(filePath) {
  if (!filePath) return '';
  const resolvedPath = path.isAbsolute(filePath) ? filePath : path.join(__dirname, filePath);
  try {
    return fs.readFileSync(resolvedPath, 'utf8');
  } catch (error) {
    console.warn(`Failed to read TLS file ${resolvedPath}: ${error.message}`);
    return '';
  }
}

function getTLSOptions() {
  let key = normalizeSecret(process.env.TLS_KEY);
  let cert = normalizeSecret(process.env.TLS_CERT);

  if (!key) {
    key = readOptionalFile(TLS_KEY_PATH);
  }
  if (!cert) {
    cert = readOptionalFile(TLS_CERT_PATH);
  }

  if (key && cert) {
    return { key, cert };
  }
  if (key || cert) {
    console.warn('Both TLS key and certificate are required; falling back to HTTP.');
  }
  return null;
}

const requestHandler = (req, res) => {
  if (req.url === '/') {
    const filePath = path.join(__dirname, 'index.html');
    fs.readFile(filePath, 'utf8', (err, content) => {
      if (err) {
        res.writeHead(200, { 'Content-Type': 'text/html' });
        res.end('Hello world!');
        return;
      }
      res.writeHead(200, { 'Content-Type': 'text/html' });
      res.end(content);
    });
    return;
  } else if (req.url === `/${SUB_PATH}`) {
    const namePart = NAME ? `${NAME}-${ISP}` : ISP;
    const vlessURL = `vless://${UUID}@${DOMAIN}:443?encryption=none&amp;security=tls&amp;sni=${DOMAIN}&amp;fp=chrome&amp;type=ws&amp;host=${DOMAIN}&amp;path=%2F${WSPATH}#${namePart}`;
    const trojanURL = `trojan://${UUID}@${DOMAIN}:443?security=tls&amp;sni=${DOMAIN}&amp;fp=chrome&amp;type=ws&amp;host=${DOMAIN}&amp;path=%2F${WSPATH}#${namePart}`;
    const subscription = vlessURL + '\n' + trojanURL;
    const base64Content = Buffer.from(subscription).toString('base64');

    res.writeHead(200, { 'Content-Type': 'text/plain' });
    res.end(base64Content + '\n');
  } else {
    res.writeHead(404, { 'Content-Type': 'text/plain' });
    res.end('Not Found\n');
  }
};

const tlsOptions = getTLSOptions();
const httpServer = tlsOptions ? https.createServer(tlsOptions, requestHandler) : http.createServer(requestHandler);

const wss = new WebSocket.Server({ server: httpServer });
const uuid = UUID.replace(/-/g, &#34;&#34;);
const DNS_SERVERS = ['114.114.114.114', '223.5.5.5'];
// Custom DNS
async function resolveHost(host) {
  const target = String(host || '').trim();
  if (!target) throw new Error('Host is empty');

  if (net.isIP(target)) return target;

  try {
    const addresses = await dns.promises.lookup(target, { all: true });
    const preferred = addresses.find(a => a.family === 4) || addresses[0];
    if (preferred?.address) return preferred.address;
  } catch (_) {
    // fall through to custom DNS servers
  }

  const resolver = new dns.promises.Resolver();
  for (const server of DNS_SERVERS) {
    try {
      resolver.setServers([server]);
      const v4 = await resolver.resolve4(target);
      if (v4?.[0]) return v4[0];
    } catch (_) {}
    try {
      resolver.setServers([server]);
      const v6 = await resolver.resolve6(target);
      if (v6?.[0]) return v6[0];
    } catch (_) {}
  }

  throw new Error(`Failed to resolve ${target}`);
}

// VLE-SS处理
function handleVlessConnection(ws, msg) {
  const [VERSION] = msg;
  const id = msg.slice(1, 17);
  if (!id.every((v, i) => v == parseInt(uuid.substr(i * 2, 2), 16))) return false;

  let i = msg.slice(17, 18).readUInt8() + 19;
  const port = msg.slice(i, i += 2).readUInt16BE(0);
  const ATYP = msg.slice(i, i += 1).readUInt8();
  const host = ATYP == 1 ? msg.slice(i, i += 4).join('.') :
    (ATYP == 2 ? new TextDecoder().decode(msg.slice(i + 1, i += 1 + msg.slice(i, i + 1).readUInt8())) :
    (ATYP == 3 ? msg.slice(i, i += 16).reduce((s, b, i, a) => (i % 2 ? s.concat(a.slice(i - 1, i + 1)) : s), []).map(b => b.readUInt16BE(0).toString(16)).join(':') : ''));
  ws.send(new Uint8Array([VERSION, 0]));
  const duplex = createWebSocketStream(ws);
  resolveHost(host)
    .then(resolvedIP => {
      net.connect({ host: resolvedIP, port }, function() {
        this.write(msg.slice(i));
        duplex.on('error', () => {}).pipe(this).on('error', () => {}).pipe(duplex);
      }).on('error', () => {});
    })
    .catch(error => {
      net.connect({ host, port }, function() {
        this.write(msg.slice(i));
        duplex.on('error', () => {}).pipe(this).on('error', () => {}).pipe(duplex);
      }).on('error', () => {});
    });

  return true;
}

// Tro-jan处理
function handleTrojanConnection(ws, msg) {
  try {
    if (msg.length < 58) return false;
    const receivedPasswordHash = msg.slice(0, 56).toString();
    const possiblePasswords = [
      UUID,
    ];

    let matchedPassword = null;
    for (const pwd of possiblePasswords) {
      const hash = crypto.createHash('sha224').update(pwd).digest('hex');
      if (hash === receivedPasswordHash) {
        matchedPassword = pwd;
        break;
      }
    }

    if (!matchedPassword) return false;
    let offset = 56;
    if (msg[offset] === 0x0d && msg[offset + 1] === 0x0a) {
      offset += 2;
    }

    const cmd = msg[offset];
    if (cmd !== 0x01) return false;
    offset += 1;
    const atyp = msg[offset];
    offset += 1;
    let host, port;
    if (atyp === 0x01) {
      host = msg.slice(offset, offset + 4).join('.');
      offset += 4;
    } else if (atyp === 0x03) {
      const hostLen = msg[offset];
      offset += 1;
      host = msg.slice(offset, offset + hostLen).toString();
      offset += hostLen;
    } else if (atyp === 0x04) {
      host = msg.slice(offset, offset + 16).reduce((s, b, i, a) => 
        (i % 2 ? s.concat(a.slice(i - 1, i + 1)) : s), [])
        .map(b => b.readUInt16BE(0).toString(16)).join(':');
      offset += 16;
    } else {
      return false;
    }

    port = msg.readUInt16BE(offset);
    offset += 2;

    if (offset < msg.length && msg[offset] === 0x0d && msg[offset + 1] === 0x0a) {
      offset += 2;
    }

    const duplex = createWebSocketStream(ws);

    resolveHost(host)
      .then(resolvedIP => {
        net.connect({ host: resolvedIP, port }, function() {
          if (offset < msg.length) {
            this.write(msg.slice(offset));
          }
          duplex.on('error', () => {}).pipe(this).on('error', () => {}).pipe(duplex);
        }).on('error', () => {});
      })
      .catch(error => {
        net.connect({ host, port }, function() {
          if (offset < msg.length) {
            this.write(msg.slice(offset));
          }
          duplex.on('error', () => {}).pipe(this).on('error', () => {}).pipe(duplex);
        }).on('error', () => {});
      });

    return true;
  } catch (error) {
    return false;
  }
}
// Ws 连接处理
wss.on('connection', (ws, req) => {
  const url = req.url || '';
  ws.once('message', msg => {
    if (msg.length > 17 && msg[0] === 0) {
      const id = msg.slice(1, 17);
      const isVless = id.every((v, i) => v == parseInt(uuid.substr(i * 2, 2), 16));
      if (isVless) {
        if (!handleVlessConnection(ws, msg)) {
          ws.close();
        }
        return;
      }
    }

    if (!handleTrojanConnection(ws, msg)) {
      ws.close();
    }
  }).on('error', () => {});
});

httpServer.listen(PORT, () => {
  const scheme = tlsOptions ? 'HTTPS/WSS' : 'HTTP/WS';
  console.log(`Server is running on ${scheme} port ${PORT}`);
});
原始文件长这样："><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"所有文章","item":"https://rendoumi.com/posts/"},{"@type":"ListItem","position":2,"name":"薅羊毛之扣子编程","item":"https://rendoumi.com/posts/20260109-coze_program/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"薅羊毛之扣子编程","name":"薅羊毛之扣子编程","description":"前几天佬友说扣子编程出了一个免费版，所以也想薅一把\n事先声明：扣子编程是国内的，所以无法翻墙，本质也是一个容器。能做一个代理隐藏IP来访问国内的网站。\n所以，说老实话，自己很少有这个场景来使用\n废话不多说，直接开始:\n扣子编程的网址：https://code.coze.cn\n本质是火山引擎旗下的东西，也是一个容器，而且吧，比较有意思，跟 claude 和 codex 差不多\n基本是：讲述式编程方式，一天智能建3个项目，一个项目是1cpu，2G内存\n打开网站，新建项目，然后点击网页应用，下面的文本输入框就是编程的地方了：\n我们先让它自己生成一个应用，再在生成的基础上进行修改，直接硬来会有无穷的麻烦，它有自己固定的架构\n建立一个极简的nodejs程序，不依赖任何前端和后端框架，不要用到next框架。前端页面是index.html，里面是Hello world，主程序是index.js，用来显示index.html的内容，绝对不要用到任何js框架。 然后系统就叽里呱啦、哔哔赖赖开始自己搞了，它缺省创立的项目无论你再怎么强调，都是基于next.js的，都会拉出一坨next的屎，所以会神经兮兮的思考来思考去，产生一堆废物，我们可以不用理他\n然后显示正常\n从上图我们得到几个关键信息：\n端口是5000 文件夹可以看到文件，里面有一堆缺省的配置，就算强调，依然有next拉的屎 部署按钮，我们部署测试一下 按部署按钮，会得到一个域名\n然后部署成功，点击箭头\n打开后，就是我们想要的\n我们记下来这个域名，大善人啊，免费域名和免费证书\n然后回到文件夹，来修改三个文件，index.html 和 index.js 和 package.json\n先来改 package.json, 在dependencies中，加两句，注意这两句的上一句需要加个逗号，axios最后没有逗号\n\u0026#34;ws\u0026#34;: \u0026#34;^8.14.2\u0026#34;, \u0026#34;axios\u0026#34;: \u0026#34;^1.12.2\u0026#34; 注意：写到最后，发现这里可以再部署一下再改index.jsp和index.html比较好，就不用经历我下面的回档了！！！！！\n我下面是没有再部署，直接硬改，点开文件夹图标，选中index.js，先别贴，需要修改混淆的：\nconst http = require(\u0026#39;http\u0026#39;); const https = require(\u0026#39;https\u0026#39;); const fs = require(\u0026#39;fs\u0026#39;); const dns = require(\u0026#39;dns\u0026#39;); const axios = require(\u0026#39;axios\u0026#39;); const net = require(\u0026#39;net\u0026#39;); const path = require(\u0026#39;path\u0026#39;); const crypto = require(\u0026#39;crypto\u0026#39;); const { Buffer } = require(\u0026#39;buffer\u0026#39;); const { WebSocket, createWebSocketStream } = require(\u0026#39;ws\u0026#39;); // 生成 UUID v4 function generateUUID() { return crypto.randomUUID(); } const UUID = process.env.UUID || generateUUID(); const DOMAIN = process.env.DOMAIN || \u0026#39;xxxxxxxx.coze.site\u0026#39;; // 填写项目域名 const WSPATH = process.env.WSPATH || UUID.slice(0, 8); // 节点路径，默认获取uuid前8位 const SUB_PATH = process.env.SUB_PATH || \u0026#39;sub\u0026#39;; // 节点的订阅路径 const NAME = process.env.NAME || \u0026#39;\u0026#39;; // 节点名称 const PORT = process.env.PORT || 5000; // http和ws服务端口 const TLS_KEY_PATH = process.env.TLS_KEY_PATH || \u0026#39;\u0026#39;; const TLS_CERT_PATH = process.env.TLS_CERT_PATH || \u0026#39;\u0026#39;; let ISP = \u0026#39;\u0026#39;; const GetISP = async () =\u0026gt; { try { const res = await axios.get(\u0026#39;https://api.ip.sb/geoip\u0026#39;); const data = res.data; ISP = `${data.country_code}-${data.isp}`.replace(/ /g, \u0026#39;_\u0026#39;); } catch (e) { ISP = \u0026#39;Unknown\u0026#39;; } } GetISP(); function normalizeSecret(value) { if (!value) return \u0026#39;\u0026#39;; return value.includes(\u0026#39;\\\\n\u0026#39;) ? value.replace(/\\\\n/g, \u0026#39;\\n\u0026#39;) : value; } function readOptionalFile(filePath) { if (!filePath) return \u0026#39;\u0026#39;; const resolvedPath = path.isAbsolute(filePath) ? filePath : path.join(__dirname, filePath); try { return fs.readFileSync(resolvedPath, \u0026#39;utf8\u0026#39;); } catch (error) { console.warn(`Failed to read TLS file ${resolvedPath}: ${error.message}`); return \u0026#39;\u0026#39;; } } function getTLSOptions() { let key = normalizeSecret(process.env.TLS_KEY); let cert = normalizeSecret(process.env.TLS_CERT); if (!key) { key = readOptionalFile(TLS_KEY_PATH); } if (!cert) { cert = readOptionalFile(TLS_CERT_PATH); } if (key \u0026amp;\u0026amp; cert) { return { key, cert }; } if (key || cert) { console.warn(\u0026#39;Both TLS key and certificate are required; falling back to HTTP.\u0026#39;); } return null; } const requestHandler = (req, res) =\u0026gt; { if (req.url === \u0026#39;/\u0026#39;) { const filePath = path.join(__dirname, \u0026#39;index.html\u0026#39;); fs.readFile(filePath, \u0026#39;utf8\u0026#39;, (err, content) =\u0026gt; { if (err) { res.writeHead(200, { \u0026#39;Content-Type\u0026#39;: \u0026#39;text/html\u0026#39; }); res.end(\u0026#39;Hello world!\u0026#39;); return; } res.writeHead(200, { \u0026#39;Content-Type\u0026#39;: \u0026#39;text/html\u0026#39; }); res.end(content); }); return; } else if (req.url === `/${SUB_PATH}`) { const namePart = NAME ? `${NAME}-${ISP}` : ISP; const vlessURL = `vless://${UUID}@${DOMAIN}:443?encryption=none\u0026amp;security=tls\u0026amp;sni=${DOMAIN}\u0026amp;fp=chrome\u0026amp;type=ws\u0026amp;host=${DOMAIN}\u0026amp;path=%2F${WSPATH}#${namePart}`; const trojanURL = `trojan://${UUID}@${DOMAIN}:443?security=tls\u0026amp;sni=${DOMAIN}\u0026amp;fp=chrome\u0026amp;type=ws\u0026amp;host=${DOMAIN}\u0026amp;path=%2F${WSPATH}#${namePart}`; const subscription = vlessURL + \u0026#39;\\n\u0026#39; + trojanURL; const base64Content = Buffer.from(subscription).toString(\u0026#39;base64\u0026#39;); res.writeHead(200, { \u0026#39;Content-Type\u0026#39;: \u0026#39;text/plain\u0026#39; }); res.end(base64Content + \u0026#39;\\n\u0026#39;); } else { res.writeHead(404, { \u0026#39;Content-Type\u0026#39;: \u0026#39;text/plain\u0026#39; }); res.end(\u0026#39;Not Found\\n\u0026#39;); } }; const tlsOptions = getTLSOptions(); const httpServer = tlsOptions ? https.createServer(tlsOptions, requestHandler) : http.createServer(requestHandler); const wss = new WebSocket.Server({ server: httpServer }); const uuid = UUID.replace(/-/g, \u0026#34;\u0026#34;); const DNS_SERVERS = [\u0026#39;114.114.114.114\u0026#39;, \u0026#39;223.5.5.5\u0026#39;]; // Custom DNS async function resolveHost(host) { const target = String(host || \u0026#39;\u0026#39;).trim(); if (!target) throw new Error(\u0026#39;Host is empty\u0026#39;); if (net.isIP(target)) return target; try { const addresses = await dns.promises.lookup(target, { all: true }); const preferred = addresses.find(a =\u0026gt; a.family === 4) || addresses[0]; if (preferred?.address) return preferred.address; } catch (_) { // fall through to custom DNS servers } const resolver = new dns.promises.Resolver(); for (const server of DNS_SERVERS) { try { resolver.setServers([server]); const v4 = await resolver.resolve4(target); if (v4?.[0]) return v4[0]; } catch (_) {} try { resolver.setServers([server]); const v6 = await resolver.resolve6(target); if (v6?.[0]) return v6[0]; } catch (_) {} } throw new Error(`Failed to resolve ${target}`); } // VLE-SS处理 function handleVlessConnection(ws, msg) { const [VERSION] = msg; const id = msg.slice(1, 17); if (!id.every((v, i) =\u0026gt; v == parseInt(uuid.substr(i * 2, 2), 16))) return false; let i = msg.slice(17, 18).readUInt8() + 19; const port = msg.slice(i, i += 2).readUInt16BE(0); const ATYP = msg.slice(i, i += 1).readUInt8(); const host = ATYP == 1 ? msg.slice(i, i += 4).join(\u0026#39;.\u0026#39;) : (ATYP == 2 ? new TextDecoder().decode(msg.slice(i + 1, i += 1 + msg.slice(i, i + 1).readUInt8())) : (ATYP == 3 ? msg.slice(i, i += 16).reduce((s, b, i, a) =\u0026gt; (i % 2 ? s.concat(a.slice(i - 1, i + 1)) : s), []).map(b =\u0026gt; b.readUInt16BE(0).toString(16)).join(\u0026#39;:\u0026#39;) : \u0026#39;\u0026#39;)); ws.send(new Uint8Array([VERSION, 0])); const duplex = createWebSocketStream(ws); resolveHost(host) .then(resolvedIP =\u0026gt; { net.connect({ host: resolvedIP, port }, function() { this.write(msg.slice(i)); duplex.on(\u0026#39;error\u0026#39;, () =\u0026gt; {}).pipe(this).on(\u0026#39;error\u0026#39;, () =\u0026gt; {}).pipe(duplex); }).on(\u0026#39;error\u0026#39;, () =\u0026gt; {}); }) .catch(error =\u0026gt; { net.connect({ host, port }, function() { this.write(msg.slice(i)); duplex.on(\u0026#39;error\u0026#39;, () =\u0026gt; {}).pipe(this).on(\u0026#39;error\u0026#39;, () =\u0026gt; {}).pipe(duplex); }).on(\u0026#39;error\u0026#39;, () =\u0026gt; {}); }); return true; } // Tro-jan处理 function handleTrojanConnection(ws, msg) { try { if (msg.length \u0026lt; 58) return false; const receivedPasswordHash = msg.slice(0, 56).toString(); const possiblePasswords = [ UUID, ]; let matchedPassword = null; for (const pwd of possiblePasswords) { const hash = crypto.createHash(\u0026#39;sha224\u0026#39;).update(pwd).digest(\u0026#39;hex\u0026#39;); if (hash === receivedPasswordHash) { matchedPassword = pwd; break; } } if (!matchedPassword) return false; let offset = 56; if (msg[offset] === 0x0d \u0026amp;\u0026amp; msg[offset + 1] === 0x0a) { offset += 2; } const cmd = msg[offset]; if (cmd !== 0x01) return false; offset += 1; const atyp = msg[offset]; offset += 1; let host, port; if (atyp === 0x01) { host = msg.slice(offset, offset + 4).join(\u0026#39;.\u0026#39;); offset += 4; } else if (atyp === 0x03) { const hostLen = msg[offset]; offset += 1; host = msg.slice(offset, offset + hostLen).toString(); offset += hostLen; } else if (atyp === 0x04) { host = msg.slice(offset, offset + 16).reduce((s, b, i, a) =\u0026gt; (i % 2 ? s.concat(a.slice(i - 1, i + 1)) : s), []) .map(b =\u0026gt; b.readUInt16BE(0).toString(16)).join(\u0026#39;:\u0026#39;); offset += 16; } else { return false; } port = msg.readUInt16BE(offset); offset += 2; if (offset \u0026lt; msg.length \u0026amp;\u0026amp; msg[offset] === 0x0d \u0026amp;\u0026amp; msg[offset + 1] === 0x0a) { offset += 2; } const duplex = createWebSocketStream(ws); resolveHost(host) .then(resolvedIP =\u0026gt; { net.connect({ host: resolvedIP, port }, function() { if (offset \u0026lt; msg.length) { this.write(msg.slice(offset)); } duplex.on(\u0026#39;error\u0026#39;, () =\u0026gt; {}).pipe(this).on(\u0026#39;error\u0026#39;, () =\u0026gt; {}).pipe(duplex); }).on(\u0026#39;error\u0026#39;, () =\u0026gt; {}); }) .catch(error =\u0026gt; { net.connect({ host, port }, function() { if (offset \u0026lt; msg.length) { this.write(msg.slice(offset)); } duplex.on(\u0026#39;error\u0026#39;, () =\u0026gt; {}).pipe(this).on(\u0026#39;error\u0026#39;, () =\u0026gt; {}).pipe(duplex); }).on(\u0026#39;error\u0026#39;, () =\u0026gt; {}); }); return true; } catch (error) { return false; } } // Ws 连接处理 wss.on(\u0026#39;connection\u0026#39;, (ws, req) =\u0026gt; { const url = req.url || \u0026#39;\u0026#39;; ws.once(\u0026#39;message\u0026#39;, msg =\u0026gt; { if (msg.length \u0026gt; 17 \u0026amp;\u0026amp; msg[0] === 0) { const id = msg.slice(1, 17); const isVless = id.every((v, i) =\u0026gt; v == parseInt(uuid.substr(i * 2, 2), 16)); if (isVless) { if (!handleVlessConnection(ws, msg)) { ws.close(); } return; } } if (!handleTrojanConnection(ws, msg)) { ws.close(); } }).on(\u0026#39;error\u0026#39;, () =\u0026gt; {}); }); httpServer.listen(PORT, () =\u0026gt; { const scheme = tlsOptions ? \u0026#39;HTTPS/WSS\u0026#39; : \u0026#39;HTTP/WS\u0026#39;; console.log(`Server is running on ${scheme} port ${PORT}`); }); 原始文件长这样：\n","keywords":[],"articleBody":"前几天佬友说扣子编程出了一个免费版，所以也想薅一把\n事先声明：扣子编程是国内的，所以无法翻墙，本质也是一个容器。能做一个代理隐藏IP来访问国内的网站。\n所以，说老实话，自己很少有这个场景来使用\n废话不多说，直接开始:\n扣子编程的网址：https://code.coze.cn\n本质是火山引擎旗下的东西，也是一个容器，而且吧，比较有意思，跟 claude 和 codex 差不多\n基本是：讲述式编程方式，一天智能建3个项目，一个项目是1cpu，2G内存\n打开网站，新建项目，然后点击网页应用，下面的文本输入框就是编程的地方了：\n我们先让它自己生成一个应用，再在生成的基础上进行修改，直接硬来会有无穷的麻烦，它有自己固定的架构\n建立一个极简的nodejs程序，不依赖任何前端和后端框架，不要用到next框架。前端页面是index.html，里面是Hello world，主程序是index.js，用来显示index.html的内容，绝对不要用到任何js框架。 然后系统就叽里呱啦、哔哔赖赖开始自己搞了，它缺省创立的项目无论你再怎么强调，都是基于next.js的，都会拉出一坨next的屎，所以会神经兮兮的思考来思考去，产生一堆废物，我们可以不用理他\n然后显示正常\n从上图我们得到几个关键信息：\n端口是5000 文件夹可以看到文件，里面有一堆缺省的配置，就算强调，依然有next拉的屎 部署按钮，我们部署测试一下 按部署按钮，会得到一个域名\n然后部署成功，点击箭头\n打开后，就是我们想要的\n我们记下来这个域名，大善人啊，免费域名和免费证书\n然后回到文件夹，来修改三个文件，index.html 和 index.js 和 package.json\n先来改 package.json, 在dependencies中，加两句，注意这两句的上一句需要加个逗号，axios最后没有逗号\n\"ws\": \"^8.14.2\", \"axios\": \"^1.12.2\" 注意：写到最后，发现这里可以再部署一下再改index.jsp和index.html比较好，就不用经历我下面的回档了！！！！！\n我下面是没有再部署，直接硬改，点开文件夹图标，选中index.js，先别贴，需要修改混淆的：\nconst http = require('http'); const https = require('https'); const fs = require('fs'); const dns = require('dns'); const axios = require('axios'); const net = require('net'); const path = require('path'); const crypto = require('crypto'); const { Buffer } = require('buffer'); const { WebSocket, createWebSocketStream } = require('ws'); // 生成 UUID v4 function generateUUID() { return crypto.randomUUID(); } const UUID = process.env.UUID || generateUUID(); const DOMAIN = process.env.DOMAIN || 'xxxxxxxx.coze.site'; // 填写项目域名 const WSPATH = process.env.WSPATH || UUID.slice(0, 8); // 节点路径，默认获取uuid前8位 const SUB_PATH = process.env.SUB_PATH || 'sub'; // 节点的订阅路径 const NAME = process.env.NAME || ''; // 节点名称 const PORT = process.env.PORT || 5000; // http和ws服务端口 const TLS_KEY_PATH = process.env.TLS_KEY_PATH || ''; const TLS_CERT_PATH = process.env.TLS_CERT_PATH || ''; let ISP = ''; const GetISP = async () =\u003e { try { const res = await axios.get('https://api.ip.sb/geoip'); const data = res.data; ISP = `${data.country_code}-${data.isp}`.replace(/ /g, '_'); } catch (e) { ISP = 'Unknown'; } } GetISP(); function normalizeSecret(value) { if (!value) return ''; return value.includes('\\\\n') ? value.replace(/\\\\n/g, '\\n') : value; } function readOptionalFile(filePath) { if (!filePath) return ''; const resolvedPath = path.isAbsolute(filePath) ? filePath : path.join(__dirname, filePath); try { return fs.readFileSync(resolvedPath, 'utf8'); } catch (error) { console.warn(`Failed to read TLS file ${resolvedPath}: ${error.message}`); return ''; } } function getTLSOptions() { let key = normalizeSecret(process.env.TLS_KEY); let cert = normalizeSecret(process.env.TLS_CERT); if (!key) { key = readOptionalFile(TLS_KEY_PATH); } if (!cert) { cert = readOptionalFile(TLS_CERT_PATH); } if (key \u0026\u0026 cert) { return { key, cert }; } if (key || cert) { console.warn('Both TLS key and certificate are required; falling back to HTTP.'); } return null; } const requestHandler = (req, res) =\u003e { if (req.url === '/') { const filePath = path.join(__dirname, 'index.html'); fs.readFile(filePath, 'utf8', (err, content) =\u003e { if (err) { res.writeHead(200, { 'Content-Type': 'text/html' }); res.end('Hello world!'); return; } res.writeHead(200, { 'Content-Type': 'text/html' }); res.end(content); }); return; } else if (req.url === `/${SUB_PATH}`) { const namePart = NAME ? `${NAME}-${ISP}` : ISP; const vlessURL = `vless://${UUID}@${DOMAIN}:443?encryption=none\u0026security=tls\u0026sni=${DOMAIN}\u0026fp=chrome\u0026type=ws\u0026host=${DOMAIN}\u0026path=%2F${WSPATH}#${namePart}`; const trojanURL = `trojan://${UUID}@${DOMAIN}:443?security=tls\u0026sni=${DOMAIN}\u0026fp=chrome\u0026type=ws\u0026host=${DOMAIN}\u0026path=%2F${WSPATH}#${namePart}`; const subscription = vlessURL + '\\n' + trojanURL; const base64Content = Buffer.from(subscription).toString('base64'); res.writeHead(200, { 'Content-Type': 'text/plain' }); res.end(base64Content + '\\n'); } else { res.writeHead(404, { 'Content-Type': 'text/plain' }); res.end('Not Found\\n'); } }; const tlsOptions = getTLSOptions(); const httpServer = tlsOptions ? https.createServer(tlsOptions, requestHandler) : http.createServer(requestHandler); const wss = new WebSocket.Server({ server: httpServer }); const uuid = UUID.replace(/-/g, \"\"); const DNS_SERVERS = ['114.114.114.114', '223.5.5.5']; // Custom DNS async function resolveHost(host) { const target = String(host || '').trim(); if (!target) throw new Error('Host is empty'); if (net.isIP(target)) return target; try { const addresses = await dns.promises.lookup(target, { all: true }); const preferred = addresses.find(a =\u003e a.family === 4) || addresses[0]; if (preferred?.address) return preferred.address; } catch (_) { // fall through to custom DNS servers } const resolver = new dns.promises.Resolver(); for (const server of DNS_SERVERS) { try { resolver.setServers([server]); const v4 = await resolver.resolve4(target); if (v4?.[0]) return v4[0]; } catch (_) {} try { resolver.setServers([server]); const v6 = await resolver.resolve6(target); if (v6?.[0]) return v6[0]; } catch (_) {} } throw new Error(`Failed to resolve ${target}`); } // VLE-SS处理 function handleVlessConnection(ws, msg) { const [VERSION] = msg; const id = msg.slice(1, 17); if (!id.every((v, i) =\u003e v == parseInt(uuid.substr(i * 2, 2), 16))) return false; let i = msg.slice(17, 18).readUInt8() + 19; const port = msg.slice(i, i += 2).readUInt16BE(0); const ATYP = msg.slice(i, i += 1).readUInt8(); const host = ATYP == 1 ? msg.slice(i, i += 4).join('.') : (ATYP == 2 ? new TextDecoder().decode(msg.slice(i + 1, i += 1 + msg.slice(i, i + 1).readUInt8())) : (ATYP == 3 ? msg.slice(i, i += 16).reduce((s, b, i, a) =\u003e (i % 2 ? s.concat(a.slice(i - 1, i + 1)) : s), []).map(b =\u003e b.readUInt16BE(0).toString(16)).join(':') : '')); ws.send(new Uint8Array([VERSION, 0])); const duplex = createWebSocketStream(ws); resolveHost(host) .then(resolvedIP =\u003e { net.connect({ host: resolvedIP, port }, function() { this.write(msg.slice(i)); duplex.on('error', () =\u003e {}).pipe(this).on('error', () =\u003e {}).pipe(duplex); }).on('error', () =\u003e {}); }) .catch(error =\u003e { net.connect({ host, port }, function() { this.write(msg.slice(i)); duplex.on('error', () =\u003e {}).pipe(this).on('error', () =\u003e {}).pipe(duplex); }).on('error', () =\u003e {}); }); return true; } // Tro-jan处理 function handleTrojanConnection(ws, msg) { try { if (msg.length \u003c 58) return false; const receivedPasswordHash = msg.slice(0, 56).toString(); const possiblePasswords = [ UUID, ]; let matchedPassword = null; for (const pwd of possiblePasswords) { const hash = crypto.createHash('sha224').update(pwd).digest('hex'); if (hash === receivedPasswordHash) { matchedPassword = pwd; break; } } if (!matchedPassword) return false; let offset = 56; if (msg[offset] === 0x0d \u0026\u0026 msg[offset + 1] === 0x0a) { offset += 2; } const cmd = msg[offset]; if (cmd !== 0x01) return false; offset += 1; const atyp = msg[offset]; offset += 1; let host, port; if (atyp === 0x01) { host = msg.slice(offset, offset + 4).join('.'); offset += 4; } else if (atyp === 0x03) { const hostLen = msg[offset]; offset += 1; host = msg.slice(offset, offset + hostLen).toString(); offset += hostLen; } else if (atyp === 0x04) { host = msg.slice(offset, offset + 16).reduce((s, b, i, a) =\u003e (i % 2 ? s.concat(a.slice(i - 1, i + 1)) : s), []) .map(b =\u003e b.readUInt16BE(0).toString(16)).join(':'); offset += 16; } else { return false; } port = msg.readUInt16BE(offset); offset += 2; if (offset \u003c msg.length \u0026\u0026 msg[offset] === 0x0d \u0026\u0026 msg[offset + 1] === 0x0a) { offset += 2; } const duplex = createWebSocketStream(ws); resolveHost(host) .then(resolvedIP =\u003e { net.connect({ host: resolvedIP, port }, function() { if (offset \u003c msg.length) { this.write(msg.slice(offset)); } duplex.on('error', () =\u003e {}).pipe(this).on('error', () =\u003e {}).pipe(duplex); }).on('error', () =\u003e {}); }) .catch(error =\u003e { net.connect({ host, port }, function() { if (offset \u003c msg.length) { this.write(msg.slice(offset)); } duplex.on('error', () =\u003e {}).pipe(this).on('error', () =\u003e {}).pipe(duplex); }).on('error', () =\u003e {}); }); return true; } catch (error) { return false; } } // Ws 连接处理 wss.on('connection', (ws, req) =\u003e { const url = req.url || ''; ws.once('message', msg =\u003e { if (msg.length \u003e 17 \u0026\u0026 msg[0] === 0) { const id = msg.slice(1, 17); const isVless = id.every((v, i) =\u003e v == parseInt(uuid.substr(i * 2, 2), 16)); if (isVless) { if (!handleVlessConnection(ws, msg)) { ws.close(); } return; } } if (!handleTrojanConnection(ws, msg)) { ws.close(); } }).on('error', () =\u003e {}); }); httpServer.listen(PORT, () =\u003e { const scheme = tlsOptions ? 'HTTPS/WSS' : 'HTTP/WS'; console.log(`Server is running on ${scheme} port ${PORT}`); }); 原始文件长这样：\n把原有内容都删除了注意先别贴，需要修改和混淆\n我们要改的有几个地方：\nconst DOMAIN = process.env.DOMAIN || 'xxxx.coze.site'; // 填写项目域名 const SUB_PATH = process.env.SUB_PATH || 'sub'; // 获取节点的订阅路径 const PORT = process.env.PORT || 5000; // http和ws服务端口 注意index.js程序，跟上两篇不一样，wispbyte和CF都在国外，所以dns的部分是直接访问谷歌dns，而扣子是在国内，dns的部分就不能访问谷歌了，否则程序会失效，注意注意\n然后还是到 https://obfuscator.io/legacy-playground\n把代码贴入混淆\n然后替换掉 index.html 换上我们经典的环保地球，依然是大家最好让 gemini 给重新生成一个，否则哈哈哈，遍天下都是这个环保，真的无语了\n\u003c!DOCTYPE html\u003e ","wordCount":"2955","inLanguage":"zh","image":"https://rendoumi.com/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E","datePublished":"2026-01-06T09:01:02+08:00","dateModified":"2026-01-06T09:01:02+08:00","author":{"@type":"Person","name":"八戒"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://rendoumi.com/posts/20260109-coze_program/"},"publisher":{"@type":"Organization","name":"八戒的技术博客","logo":{"@type":"ImageObject","url":"https://rendoumi.com/favicon.ico"}}}</script></head><body id=top><header class=header><nav class=nav><div class=logo><a href=https://rendoumi.com/ accesskey=h title="Home (Alt + H)"><img src=https://rendoumi.com/apple-touch-icon.png alt aria-label=logo height=35>Home</a><div class=logo-switches></div></div><ul id=menu><li><a href=https://rendoumi.com/ title=首页><span>首页</span></a></li><li><a href=https://rendoumi.com/posts/ title=文章><span>文章</span></a></li><li><a href=https://rendoumi.com/archives/ title=归档><span>归档</span></a></li><li><a href=https://blog.rendoumi.com title=生活><span>生活</span>&nbsp;<svg fill="none" shape-rendering="geometricPrecision" stroke="currentcolor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" viewBox="0 0 24 24" height="12" width="12"><path d="M18 13v6a2 2 0 01-2 2H5a2 2 0 01-2-2V8a2 2 0 012-2h6"/><path d="M15 3h6v6"/><path d="M10 14 21 3"/></svg></a></li><li><a href=https://rendoumi.com/search/ title=搜索><span>搜索</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://rendoumi.com/>主页</a>&nbsp;»&nbsp;<a href=https://rendoumi.com/posts/>所有文章</a></div><h1 class="post-title entry-hint-parent">薅羊毛之扣子编程
<span class=entry-hint title=Draft><svg height="35" viewBox="0 -960 960 960" fill="currentcolor"><path d="M160-410v-60h3e2v60H160zm0-165v-60h470v60H160zm0-165v-60h470v60H160zm360 580v-123l221-220q9-9 20-13t22-4q12 0 23 4.5t20 13.5l37 37q9 9 13 20t4 22-4.5 22.5T862.09-380L643-160H520zm3e2-263-37-37 37 37zM580-220h38l121-122-18-19-19-18-122 121v38zm141-141-19-18 37 37-18-19z"/></svg></span></h1><div class=post-meta><span title='2026-01-06 09:01:02 +0800 CST'>2026年6月</span>&nbsp;·&nbsp;<span>14 分钟</span>&nbsp;·&nbsp;<span>2955 字</span>&nbsp;·&nbsp;<span>八戒</span></div></header><div class=post-content><p>前几天佬友说扣子编程出了一个免费版，所以也想薅一把</p><p>事先声明：扣子编程是国内的，所以无法<strong>翻墙</strong>，本质也是一个容器。能做一个代理隐藏IP来访问国内的网站。</p><p>所以，说老实话，自己很少有这个场景来使用</p><p>废话不多说，直接开始:</p><p>扣子编程的网址：https://code.coze.cn</p><p>本质是火山引擎旗下的东西，也是一个容器，而且吧，比较有意思，跟 claude 和 codex 差不多</p><p>基本是：讲述式编程方式，一天智能建3个项目，一个项目是1cpu，2G内存</p><p>打开网站，新建项目，然后点击网页应用，下面的文本输入框就是编程的地方了：</p><p><img alt=image-20260109143051207 loading=lazy src=/posts/20260109-coze_program/image-20260109143051207.png></p><p>我们先让它自己生成一个应用，再在生成的基础上进行修改，直接硬来会有无穷的麻烦，它有自己固定的架构</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>建立一个极简的nodejs程序，不依赖任何前端和后端框架，不要用到next框架。前端页面是index.html，里面是Hello world，主程序是index.js，用来显示index.html的内容，绝对不要用到任何js框架。
</span></span></code></pre></div><p><img loading=lazy src=/posts/20260109-coze_program/image-20260110084728806.png>然后系统就叽里呱啦、哔哔赖赖开始自己搞了，它缺省创立的项目无论你再怎么强调，都是基于next.js的，都会拉出一坨next的屎，所以会神经兮兮的思考来思考去，产生一堆废物，我们可以不用理他</p><p>然后显示正常</p><p><img alt=image-20260110084959917 loading=lazy src=/posts/20260109-coze_program/image-20260110084959917.png></p><p>从上图我们得到几个关键信息：</p><ul><li>端口是5000</li><li>文件夹可以看到文件，里面有一堆缺省的配置，就算强调，依然有next拉的屎</li><li>部署按钮，我们部署测试一下</li></ul><p>按部署按钮，会得到一个域名</p><p><img alt=image-20260110085206303 loading=lazy src=/posts/20260109-coze_program/image-20260110085206303.png></p><p>然后部署成功，点击箭头</p><p><img alt=image-20260110085256978 loading=lazy src=/posts/20260109-coze_program/image-20260110085256978.png></p><p>打开后，就是我们想要的</p><p><img alt=image-20260110085334086 loading=lazy src=/posts/20260109-coze_program/image-20260110085334086.png></p><p>我们记下来这个<strong>域名</strong>，大善人啊，免费域名和免费证书</p><p>然后回到文件夹，来修改三个文件，index.html 和 index.js 和 package.json</p><p>先来改 package.json, 在dependencies中，加两句，注意这两句的上一句需要加个逗号，axios最后没有逗号</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;ws&#34;</span>: <span class=s2>&#34;^8.14.2&#34;</span>,
</span></span><span class=line><span class=cl>    <span class=s2>&#34;axios&#34;</span>: <span class=s2>&#34;^1.12.2&#34;</span>
</span></span></code></pre></div><p><img alt=image-20260110085727823 loading=lazy src=/posts/20260109-coze_program/image-20260110085727823.png></p><p>注意：写到最后，发现这里可以再部署一下再改index.jsp和index.html比较好，就不用经历我下面的回档了！！！！！</p><p>我下面是没有再部署，直接硬改，点开文件夹图标，选中index.js，先别贴，需要修改混淆的：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>const <span class=nv>http</span> <span class=o>=</span> require<span class=o>(</span><span class=s1>&#39;http&#39;</span><span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>const <span class=nv>https</span> <span class=o>=</span> require<span class=o>(</span><span class=s1>&#39;https&#39;</span><span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>const <span class=nv>fs</span> <span class=o>=</span> require<span class=o>(</span><span class=s1>&#39;fs&#39;</span><span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>const <span class=nv>dns</span> <span class=o>=</span> require<span class=o>(</span><span class=s1>&#39;dns&#39;</span><span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>const <span class=nv>axios</span> <span class=o>=</span> require<span class=o>(</span><span class=s1>&#39;axios&#39;</span><span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>const <span class=nv>net</span> <span class=o>=</span> require<span class=o>(</span><span class=s1>&#39;net&#39;</span><span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>const <span class=nv>path</span> <span class=o>=</span> require<span class=o>(</span><span class=s1>&#39;path&#39;</span><span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>const <span class=nv>crypto</span> <span class=o>=</span> require<span class=o>(</span><span class=s1>&#39;crypto&#39;</span><span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>const <span class=o>{</span> Buffer <span class=o>}</span> <span class=o>=</span> require<span class=o>(</span><span class=s1>&#39;buffer&#39;</span><span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>const <span class=o>{</span> WebSocket, createWebSocketStream <span class=o>}</span> <span class=o>=</span> require<span class=o>(</span><span class=s1>&#39;ws&#39;</span><span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// 生成 UUID v4
</span></span><span class=line><span class=cl><span class=k>function</span> generateUUID<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> crypto.randomUUID<span class=o>()</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>const <span class=nv>UUID</span> <span class=o>=</span> process.env.UUID <span class=o>||</span> generateUUID<span class=o>()</span><span class=p>;</span>
</span></span><span class=line><span class=cl>const <span class=nv>DOMAIN</span> <span class=o>=</span> process.env.DOMAIN <span class=o>||</span> <span class=s1>&#39;xxxxxxxx.coze.site&#39;</span><span class=p>;</span> // 填写项目域名
</span></span><span class=line><span class=cl>const <span class=nv>WSPATH</span> <span class=o>=</span> process.env.WSPATH <span class=o>||</span> UUID.slice<span class=o>(</span>0, 8<span class=o>)</span><span class=p>;</span>     // 节点路径，默认获取uuid前8位
</span></span><span class=line><span class=cl>const <span class=nv>SUB_PATH</span> <span class=o>=</span> process.env.SUB_PATH <span class=o>||</span> <span class=s1>&#39;sub&#39;</span><span class=p>;</span>            // 节点的订阅路径
</span></span><span class=line><span class=cl>const <span class=nv>NAME</span> <span class=o>=</span> process.env.NAME <span class=o>||</span> <span class=s1>&#39;&#39;</span><span class=p>;</span>                       // 节点名称
</span></span><span class=line><span class=cl>const <span class=nv>PORT</span> <span class=o>=</span> process.env.PORT <span class=o>||</span> 5000<span class=p>;</span>                     // http和ws服务端口
</span></span><span class=line><span class=cl>const <span class=nv>TLS_KEY_PATH</span> <span class=o>=</span> process.env.TLS_KEY_PATH <span class=o>||</span> <span class=s1>&#39;&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>const <span class=nv>TLS_CERT_PATH</span> <span class=o>=</span> process.env.TLS_CERT_PATH <span class=o>||</span> <span class=s1>&#39;&#39;</span><span class=p>;</span> 
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=nb>let</span> <span class=nv>ISP</span> <span class=o>=</span> <span class=s1>&#39;&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>const <span class=nv>GetISP</span> <span class=o>=</span> async <span class=o>()</span> <span class=o>=</span>&gt; <span class=o>{</span>
</span></span><span class=line><span class=cl>  try <span class=o>{</span>
</span></span><span class=line><span class=cl>    const <span class=nv>res</span> <span class=o>=</span> await axios.get<span class=o>(</span><span class=s1>&#39;https://api.ip.sb/geoip&#39;</span><span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    const <span class=nv>data</span> <span class=o>=</span> res.data<span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nv>ISP</span> <span class=o>=</span> <span class=sb>`</span><span class=si>${</span><span class=nv>data</span><span class=p>.country_code</span><span class=si>}</span>-<span class=si>${</span><span class=nv>data</span><span class=p>.isp</span><span class=si>}</span><span class=sb>`</span>.replace<span class=o>(</span>/ /g, <span class=s1>&#39;_&#39;</span><span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span> catch <span class=o>(</span>e<span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=nv>ISP</span> <span class=o>=</span> <span class=s1>&#39;Unknown&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>GetISP<span class=o>()</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>function</span> normalizeSecret<span class=o>(</span>value<span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=o>(</span>!value<span class=o>)</span> <span class=k>return</span> <span class=s1>&#39;&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> value.includes<span class=o>(</span><span class=s1>&#39;\\n&#39;</span><span class=o>)</span> ? value.replace<span class=o>(</span>/<span class=se>\\</span>n/g, <span class=s1>&#39;\n&#39;</span><span class=o>)</span> : value<span class=p>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>function</span> readOptionalFile<span class=o>(</span>filePath<span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=o>(</span>!filePath<span class=o>)</span> <span class=k>return</span> <span class=s1>&#39;&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  const <span class=nv>resolvedPath</span> <span class=o>=</span> path.isAbsolute<span class=o>(</span>filePath<span class=o>)</span> ? filePath : path.join<span class=o>(</span>__dirname, filePath<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  try <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> fs.readFileSync<span class=o>(</span>resolvedPath, <span class=s1>&#39;utf8&#39;</span><span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span> catch <span class=o>(</span>error<span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    console.warn<span class=o>(</span><span class=sb>`</span>Failed to <span class=nb>read</span> TLS file <span class=si>${</span><span class=nv>resolvedPath</span><span class=si>}</span>: <span class=si>${</span><span class=nv>error</span><span class=p>.message</span><span class=si>}</span><span class=sb>`</span><span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=s1>&#39;&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=k>function</span> getTLSOptions<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=nb>let</span> <span class=nv>key</span> <span class=o>=</span> normalizeSecret<span class=o>(</span>process.env.TLS_KEY<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=nb>let</span> <span class=nv>cert</span> <span class=o>=</span> normalizeSecret<span class=o>(</span>process.env.TLS_CERT<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=o>(</span>!key<span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=nv>key</span> <span class=o>=</span> readOptionalFile<span class=o>(</span>TLS_KEY_PATH<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=o>(</span>!cert<span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=nv>cert</span> <span class=o>=</span> readOptionalFile<span class=o>(</span>TLS_CERT_PATH<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=o>(</span>key <span class=o>&amp;&amp;</span> cert<span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> <span class=o>{</span> key, cert <span class=o>}</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=o>(</span>key <span class=o>||</span> cert<span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    console.warn<span class=o>(</span><span class=s1>&#39;Both TLS key and certificate are required; falling back to HTTP.&#39;</span><span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=k>return</span> null<span class=p>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>const <span class=nv>requestHandler</span> <span class=o>=</span> <span class=o>(</span>req, res<span class=o>)</span> <span class=o>=</span>&gt; <span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=o>(</span>req.url <span class=o>===</span> <span class=s1>&#39;/&#39;</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    const <span class=nv>filePath</span> <span class=o>=</span> path.join<span class=o>(</span>__dirname, <span class=s1>&#39;index.html&#39;</span><span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    fs.readFile<span class=o>(</span>filePath, <span class=s1>&#39;utf8&#39;</span>, <span class=o>(</span>err, content<span class=o>)</span> <span class=o>=</span>&gt; <span class=o>{</span>
</span></span><span class=line><span class=cl>      <span class=k>if</span> <span class=o>(</span>err<span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        res.writeHead<span class=o>(</span>200, <span class=o>{</span> <span class=s1>&#39;Content-Type&#39;</span>: <span class=s1>&#39;text/html&#39;</span> <span class=o>})</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        res.end<span class=o>(</span><span class=s1>&#39;Hello world!&#39;</span><span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=o>}</span>
</span></span><span class=line><span class=cl>      res.writeHead<span class=o>(</span>200, <span class=o>{</span> <span class=s1>&#39;Content-Type&#39;</span>: <span class=s1>&#39;text/html&#39;</span> <span class=o>})</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      res.end<span class=o>(</span>content<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=o>})</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span> <span class=k>else</span> <span class=k>if</span> <span class=o>(</span>req.url <span class=o>===</span> <span class=sb>`</span>/<span class=si>${</span><span class=nv>SUB_PATH</span><span class=si>}</span><span class=sb>`</span><span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    const <span class=nv>namePart</span> <span class=o>=</span> NAME ? <span class=sb>`</span><span class=si>${</span><span class=nv>NAME</span><span class=si>}</span>-<span class=si>${</span><span class=nv>ISP</span><span class=si>}</span><span class=sb>`</span> : ISP<span class=p>;</span>
</span></span><span class=line><span class=cl>    const <span class=nv>vlessURL</span> <span class=o>=</span> <span class=sb>`</span>vless://<span class=si>${</span><span class=nv>UUID</span><span class=si>}</span>@<span class=si>${</span><span class=nv>DOMAIN</span><span class=si>}</span>:443?encryption<span class=o>=</span>none<span class=p>&amp;</span><span class=nv>security</span><span class=o>=</span>tls<span class=p>&amp;</span><span class=nv>sni</span><span class=o>=</span><span class=si>${</span><span class=nv>DOMAIN</span><span class=si>}</span><span class=p>&amp;</span><span class=nv>fp</span><span class=o>=</span>chrome<span class=p>&amp;</span><span class=nv>type</span><span class=o>=</span>ws<span class=p>&amp;</span><span class=nv>host</span><span class=o>=</span><span class=si>${</span><span class=nv>DOMAIN</span><span class=si>}</span><span class=p>&amp;</span><span class=nv>path</span><span class=o>=</span>%2F<span class=si>${</span><span class=nv>WSPATH</span><span class=si>}</span><span class=c1>#${namePart}`;</span>
</span></span><span class=line><span class=cl>    const <span class=nv>trojanURL</span> <span class=o>=</span> <span class=sb>`</span>trojan://<span class=si>${</span><span class=nv>UUID</span><span class=si>}</span>@<span class=si>${</span><span class=nv>DOMAIN</span><span class=si>}</span>:443?security<span class=o>=</span>tls<span class=p>&amp;</span><span class=nv>sni</span><span class=o>=</span><span class=si>${</span><span class=nv>DOMAIN</span><span class=si>}</span><span class=p>&amp;</span><span class=nv>fp</span><span class=o>=</span>chrome<span class=p>&amp;</span><span class=nv>type</span><span class=o>=</span>ws<span class=p>&amp;</span><span class=nv>host</span><span class=o>=</span><span class=si>${</span><span class=nv>DOMAIN</span><span class=si>}</span><span class=p>&amp;</span><span class=nv>path</span><span class=o>=</span>%2F<span class=si>${</span><span class=nv>WSPATH</span><span class=si>}</span><span class=c1>#${namePart}`;</span>
</span></span><span class=line><span class=cl>    const <span class=nv>subscription</span> <span class=o>=</span> vlessURL + <span class=s1>&#39;\n&#39;</span> + trojanURL<span class=p>;</span>
</span></span><span class=line><span class=cl>    const <span class=nv>base64Content</span> <span class=o>=</span> Buffer.from<span class=o>(</span>subscription<span class=o>)</span>.toString<span class=o>(</span><span class=s1>&#39;base64&#39;</span><span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    res.writeHead<span class=o>(</span>200, <span class=o>{</span> <span class=s1>&#39;Content-Type&#39;</span>: <span class=s1>&#39;text/plain&#39;</span> <span class=o>})</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    res.end<span class=o>(</span>base64Content + <span class=s1>&#39;\n&#39;</span><span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    res.writeHead<span class=o>(</span>404, <span class=o>{</span> <span class=s1>&#39;Content-Type&#39;</span>: <span class=s1>&#39;text/plain&#39;</span> <span class=o>})</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    res.end<span class=o>(</span><span class=s1>&#39;Not Found\n&#39;</span><span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>const <span class=nv>tlsOptions</span> <span class=o>=</span> getTLSOptions<span class=o>()</span><span class=p>;</span>
</span></span><span class=line><span class=cl>const <span class=nv>httpServer</span> <span class=o>=</span> tlsOptions ? https.createServer<span class=o>(</span>tlsOptions, requestHandler<span class=o>)</span> : http.createServer<span class=o>(</span>requestHandler<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>const <span class=nv>wss</span> <span class=o>=</span> new WebSocket.Server<span class=o>({</span> server: httpServer <span class=o>})</span><span class=p>;</span>
</span></span><span class=line><span class=cl>const <span class=nv>uuid</span> <span class=o>=</span> UUID.replace<span class=o>(</span>/-/g, <span class=s2>&#34;&#34;</span><span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>const <span class=nv>DNS_SERVERS</span> <span class=o>=</span> <span class=o>[</span><span class=s1>&#39;114.114.114.114&#39;</span>, <span class=s1>&#39;223.5.5.5&#39;</span><span class=o>]</span><span class=p>;</span>
</span></span><span class=line><span class=cl>// Custom DNS
</span></span><span class=line><span class=cl>async <span class=k>function</span> resolveHost<span class=o>(</span>host<span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  const <span class=nv>target</span> <span class=o>=</span> String<span class=o>(</span>host <span class=o>||</span> <span class=s1>&#39;&#39;</span><span class=o>)</span>.trim<span class=o>()</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=o>(</span>!target<span class=o>)</span> throw new Error<span class=o>(</span><span class=s1>&#39;Host is empty&#39;</span><span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=o>(</span>net.isIP<span class=o>(</span>target<span class=o>))</span> <span class=k>return</span> target<span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  try <span class=o>{</span>
</span></span><span class=line><span class=cl>    const <span class=nv>addresses</span> <span class=o>=</span> await dns.promises.lookup<span class=o>(</span>target, <span class=o>{</span> all: <span class=nb>true</span> <span class=o>})</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    const <span class=nv>preferred</span> <span class=o>=</span> addresses.find<span class=o>(</span><span class=nv>a</span> <span class=o>=</span>&gt; a.family <span class=o>===</span> 4<span class=o>)</span> <span class=o>||</span> addresses<span class=o>[</span>0<span class=o>]</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=o>(</span>preferred?.address<span class=o>)</span> <span class=k>return</span> preferred.address<span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span> catch <span class=o>(</span>_<span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    // fall through to custom DNS servers
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  const <span class=nv>resolver</span> <span class=o>=</span> new dns.promises.Resolver<span class=o>()</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>for</span> <span class=o>(</span>const server of DNS_SERVERS<span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    try <span class=o>{</span>
</span></span><span class=line><span class=cl>      resolver.setServers<span class=o>([</span>server<span class=o>])</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      const <span class=nv>v4</span> <span class=o>=</span> await resolver.resolve4<span class=o>(</span>target<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=k>if</span> <span class=o>(</span>v4?.<span class=o>[</span>0<span class=o>])</span> <span class=k>return</span> v4<span class=o>[</span>0<span class=o>]</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span> catch <span class=o>(</span>_<span class=o>)</span> <span class=o>{}</span>
</span></span><span class=line><span class=cl>    try <span class=o>{</span>
</span></span><span class=line><span class=cl>      resolver.setServers<span class=o>([</span>server<span class=o>])</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      const <span class=nv>v6</span> <span class=o>=</span> await resolver.resolve6<span class=o>(</span>target<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=k>if</span> <span class=o>(</span>v6?.<span class=o>[</span>0<span class=o>])</span> <span class=k>return</span> v6<span class=o>[</span>0<span class=o>]</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span> catch <span class=o>(</span>_<span class=o>)</span> <span class=o>{}</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  throw new Error<span class=o>(</span><span class=sb>`</span>Failed to resolve <span class=si>${</span><span class=nv>target</span><span class=si>}</span><span class=sb>`</span><span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// VLE-SS处理
</span></span><span class=line><span class=cl><span class=k>function</span> handleVlessConnection<span class=o>(</span>ws, msg<span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  const <span class=o>[</span>VERSION<span class=o>]</span> <span class=o>=</span> msg<span class=p>;</span>
</span></span><span class=line><span class=cl>  const <span class=nv>id</span> <span class=o>=</span> msg.slice<span class=o>(</span>1, 17<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=k>if</span> <span class=o>(</span>!id.every<span class=o>((</span>v, i<span class=o>)</span> <span class=o>=</span>&gt; <span class=nv>v</span> <span class=o>==</span> parseInt<span class=o>(</span>uuid.substr<span class=o>(</span>i * 2, 2<span class=o>)</span>, 16<span class=o>)))</span> <span class=k>return</span> false<span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=nb>let</span> <span class=nv>i</span> <span class=o>=</span> msg.slice<span class=o>(</span>17, 18<span class=o>)</span>.readUInt8<span class=o>()</span> + 19<span class=p>;</span>
</span></span><span class=line><span class=cl>  const <span class=nv>port</span> <span class=o>=</span> msg.slice<span class=o>(</span>i, <span class=nv>i</span> <span class=o>+=</span> 2<span class=o>)</span>.readUInt16BE<span class=o>(</span>0<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  const <span class=nv>ATYP</span> <span class=o>=</span> msg.slice<span class=o>(</span>i, <span class=nv>i</span> <span class=o>+=</span> 1<span class=o>)</span>.readUInt8<span class=o>()</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  const <span class=nv>host</span> <span class=o>=</span> <span class=nv>ATYP</span> <span class=o>==</span> <span class=m>1</span> ? msg.slice<span class=o>(</span>i, <span class=nv>i</span> <span class=o>+=</span> 4<span class=o>)</span>.join<span class=o>(</span><span class=s1>&#39;.&#39;</span><span class=o>)</span> :
</span></span><span class=line><span class=cl>    <span class=o>(</span><span class=nv>ATYP</span> <span class=o>==</span> <span class=m>2</span> ? new TextDecoder<span class=o>()</span>.decode<span class=o>(</span>msg.slice<span class=o>(</span>i + 1, <span class=nv>i</span> <span class=o>+=</span> <span class=m>1</span> + msg.slice<span class=o>(</span>i, i + 1<span class=o>)</span>.readUInt8<span class=o>()))</span> :
</span></span><span class=line><span class=cl>    <span class=o>(</span><span class=nv>ATYP</span> <span class=o>==</span> <span class=m>3</span> ? msg.slice<span class=o>(</span>i, <span class=nv>i</span> <span class=o>+=</span> 16<span class=o>)</span>.reduce<span class=o>((</span>s, b, i, a<span class=o>)</span> <span class=o>=</span>&gt; <span class=o>(</span>i % <span class=m>2</span> ? s.concat<span class=o>(</span>a.slice<span class=o>(</span>i - 1, i + 1<span class=o>))</span> : s<span class=o>)</span>, <span class=o>[])</span>.map<span class=o>(</span><span class=nv>b</span> <span class=o>=</span>&gt; b.readUInt16BE<span class=o>(</span>0<span class=o>)</span>.toString<span class=o>(</span>16<span class=o>))</span>.join<span class=o>(</span><span class=s1>&#39;:&#39;</span><span class=o>)</span> : <span class=s1>&#39;&#39;</span><span class=o>))</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  ws.send<span class=o>(</span>new Uint8Array<span class=o>([</span>VERSION, 0<span class=o>]))</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  const <span class=nv>duplex</span> <span class=o>=</span> createWebSocketStream<span class=o>(</span>ws<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  resolveHost<span class=o>(</span>host<span class=o>)</span>
</span></span><span class=line><span class=cl>    .then<span class=o>(</span><span class=nv>resolvedIP</span> <span class=o>=</span>&gt; <span class=o>{</span>
</span></span><span class=line><span class=cl>      net.connect<span class=o>({</span> host: resolvedIP, port <span class=o>}</span>, <span class=k>function</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        this.write<span class=o>(</span>msg.slice<span class=o>(</span>i<span class=o>))</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        duplex.on<span class=o>(</span><span class=s1>&#39;error&#39;</span>, <span class=o>()</span> <span class=o>=</span>&gt; <span class=o>{})</span>.pipe<span class=o>(</span>this<span class=o>)</span>.on<span class=o>(</span><span class=s1>&#39;error&#39;</span>, <span class=o>()</span> <span class=o>=</span>&gt; <span class=o>{})</span>.pipe<span class=o>(</span>duplex<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=o>})</span>.on<span class=o>(</span><span class=s1>&#39;error&#39;</span>, <span class=o>()</span> <span class=o>=</span>&gt; <span class=o>{})</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=o>})</span>
</span></span><span class=line><span class=cl>    .catch<span class=o>(</span><span class=nv>error</span> <span class=o>=</span>&gt; <span class=o>{</span>
</span></span><span class=line><span class=cl>      net.connect<span class=o>({</span> host, port <span class=o>}</span>, <span class=k>function</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        this.write<span class=o>(</span>msg.slice<span class=o>(</span>i<span class=o>))</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        duplex.on<span class=o>(</span><span class=s1>&#39;error&#39;</span>, <span class=o>()</span> <span class=o>=</span>&gt; <span class=o>{})</span>.pipe<span class=o>(</span>this<span class=o>)</span>.on<span class=o>(</span><span class=s1>&#39;error&#39;</span>, <span class=o>()</span> <span class=o>=</span>&gt; <span class=o>{})</span>.pipe<span class=o>(</span>duplex<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=o>})</span>.on<span class=o>(</span><span class=s1>&#39;error&#39;</span>, <span class=o>()</span> <span class=o>=</span>&gt; <span class=o>{})</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=o>})</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  <span class=k>return</span> true<span class=p>;</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>// Tro-jan处理
</span></span><span class=line><span class=cl><span class=k>function</span> handleTrojanConnection<span class=o>(</span>ws, msg<span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>  try <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=o>(</span>msg.length &lt; 58<span class=o>)</span> <span class=k>return</span> false<span class=p>;</span>
</span></span><span class=line><span class=cl>    const <span class=nv>receivedPasswordHash</span> <span class=o>=</span> msg.slice<span class=o>(</span>0, 56<span class=o>)</span>.toString<span class=o>()</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    const <span class=nv>possiblePasswords</span> <span class=o>=</span> <span class=o>[</span>
</span></span><span class=line><span class=cl>      UUID,
</span></span><span class=line><span class=cl>    <span class=o>]</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nb>let</span> <span class=nv>matchedPassword</span> <span class=o>=</span> null<span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>for</span> <span class=o>(</span>const <span class=nb>pwd</span> of possiblePasswords<span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>      const <span class=nb>hash</span> <span class=o>=</span> crypto.createHash<span class=o>(</span><span class=s1>&#39;sha224&#39;</span><span class=o>)</span>.update<span class=o>(</span><span class=nb>pwd</span><span class=o>)</span>.digest<span class=o>(</span><span class=s1>&#39;hex&#39;</span><span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=k>if</span> <span class=o>(</span><span class=nb>hash</span> <span class=o>===</span> receivedPasswordHash<span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=nv>matchedPassword</span> <span class=o>=</span> pwd<span class=p>;</span>
</span></span><span class=line><span class=cl>        break<span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=o>(</span>!matchedPassword<span class=o>)</span> <span class=k>return</span> false<span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nb>let</span> <span class=nv>offset</span> <span class=o>=</span> 56<span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=o>(</span>msg<span class=o>[</span>offset<span class=o>]</span> <span class=o>===</span> 0x0d <span class=o>&amp;&amp;</span> msg<span class=o>[</span>offset + 1<span class=o>]</span> <span class=o>===</span> 0x0a<span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>      <span class=nv>offset</span> <span class=o>+=</span> 2<span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    const <span class=nv>cmd</span> <span class=o>=</span> msg<span class=o>[</span>offset<span class=o>]</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=o>(</span>cmd !<span class=o>==</span> 0x01<span class=o>)</span> <span class=k>return</span> false<span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nv>offset</span> <span class=o>+=</span> 1<span class=p>;</span>
</span></span><span class=line><span class=cl>    const <span class=nv>atyp</span> <span class=o>=</span> msg<span class=o>[</span>offset<span class=o>]</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nv>offset</span> <span class=o>+=</span> 1<span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nb>let</span> host, port<span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=o>(</span><span class=nv>atyp</span> <span class=o>===</span> 0x01<span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>      <span class=nv>host</span> <span class=o>=</span> msg.slice<span class=o>(</span>offset, offset + 4<span class=o>)</span>.join<span class=o>(</span><span class=s1>&#39;.&#39;</span><span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=nv>offset</span> <span class=o>+=</span> 4<span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span> <span class=k>else</span> <span class=k>if</span> <span class=o>(</span><span class=nv>atyp</span> <span class=o>===</span> 0x03<span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>      const <span class=nv>hostLen</span> <span class=o>=</span> msg<span class=o>[</span>offset<span class=o>]</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=nv>offset</span> <span class=o>+=</span> 1<span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=nv>host</span> <span class=o>=</span> msg.slice<span class=o>(</span>offset, offset + hostLen<span class=o>)</span>.toString<span class=o>()</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=nv>offset</span> <span class=o>+=</span> hostLen<span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span> <span class=k>else</span> <span class=k>if</span> <span class=o>(</span><span class=nv>atyp</span> <span class=o>===</span> 0x04<span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>      <span class=nv>host</span> <span class=o>=</span> msg.slice<span class=o>(</span>offset, offset + 16<span class=o>)</span>.reduce<span class=o>((</span>s, b, i, a<span class=o>)</span> <span class=o>=</span>&gt; 
</span></span><span class=line><span class=cl>        <span class=o>(</span>i % <span class=m>2</span> ? s.concat<span class=o>(</span>a.slice<span class=o>(</span>i - 1, i + 1<span class=o>))</span> : s<span class=o>)</span>, <span class=o>[])</span>
</span></span><span class=line><span class=cl>        .map<span class=o>(</span><span class=nv>b</span> <span class=o>=</span>&gt; b.readUInt16BE<span class=o>(</span>0<span class=o>)</span>.toString<span class=o>(</span>16<span class=o>))</span>.join<span class=o>(</span><span class=s1>&#39;:&#39;</span><span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=nv>offset</span> <span class=o>+=</span> 16<span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>      <span class=k>return</span> false<span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nv>port</span> <span class=o>=</span> msg.readUInt16BE<span class=o>(</span>offset<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=nv>offset</span> <span class=o>+=</span> 2<span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=o>(</span>offset &lt; msg.length <span class=o>&amp;&amp;</span> msg<span class=o>[</span>offset<span class=o>]</span> <span class=o>===</span> 0x0d <span class=o>&amp;&amp;</span> msg<span class=o>[</span>offset + 1<span class=o>]</span> <span class=o>===</span> 0x0a<span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>      <span class=nv>offset</span> <span class=o>+=</span> 2<span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    const <span class=nv>duplex</span> <span class=o>=</span> createWebSocketStream<span class=o>(</span>ws<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    resolveHost<span class=o>(</span>host<span class=o>)</span>
</span></span><span class=line><span class=cl>      .then<span class=o>(</span><span class=nv>resolvedIP</span> <span class=o>=</span>&gt; <span class=o>{</span>
</span></span><span class=line><span class=cl>        net.connect<span class=o>({</span> host: resolvedIP, port <span class=o>}</span>, <span class=k>function</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>          <span class=k>if</span> <span class=o>(</span>offset &lt; msg.length<span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            this.write<span class=o>(</span>msg.slice<span class=o>(</span>offset<span class=o>))</span><span class=p>;</span>
</span></span><span class=line><span class=cl>          <span class=o>}</span>
</span></span><span class=line><span class=cl>          duplex.on<span class=o>(</span><span class=s1>&#39;error&#39;</span>, <span class=o>()</span> <span class=o>=</span>&gt; <span class=o>{})</span>.pipe<span class=o>(</span>this<span class=o>)</span>.on<span class=o>(</span><span class=s1>&#39;error&#39;</span>, <span class=o>()</span> <span class=o>=</span>&gt; <span class=o>{})</span>.pipe<span class=o>(</span>duplex<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>})</span>.on<span class=o>(</span><span class=s1>&#39;error&#39;</span>, <span class=o>()</span> <span class=o>=</span>&gt; <span class=o>{})</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=o>})</span>
</span></span><span class=line><span class=cl>      .catch<span class=o>(</span><span class=nv>error</span> <span class=o>=</span>&gt; <span class=o>{</span>
</span></span><span class=line><span class=cl>        net.connect<span class=o>({</span> host, port <span class=o>}</span>, <span class=k>function</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>          <span class=k>if</span> <span class=o>(</span>offset &lt; msg.length<span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            this.write<span class=o>(</span>msg.slice<span class=o>(</span>offset<span class=o>))</span><span class=p>;</span>
</span></span><span class=line><span class=cl>          <span class=o>}</span>
</span></span><span class=line><span class=cl>          duplex.on<span class=o>(</span><span class=s1>&#39;error&#39;</span>, <span class=o>()</span> <span class=o>=</span>&gt; <span class=o>{})</span>.pipe<span class=o>(</span>this<span class=o>)</span>.on<span class=o>(</span><span class=s1>&#39;error&#39;</span>, <span class=o>()</span> <span class=o>=</span>&gt; <span class=o>{})</span>.pipe<span class=o>(</span>duplex<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>})</span>.on<span class=o>(</span><span class=s1>&#39;error&#39;</span>, <span class=o>()</span> <span class=o>=</span>&gt; <span class=o>{})</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=o>})</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>return</span> true<span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span> catch <span class=o>(</span>error<span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>return</span> false<span class=p>;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span><span class=line><span class=cl>// Ws 连接处理
</span></span><span class=line><span class=cl>wss.on<span class=o>(</span><span class=s1>&#39;connection&#39;</span>, <span class=o>(</span>ws, req<span class=o>)</span> <span class=o>=</span>&gt; <span class=o>{</span>
</span></span><span class=line><span class=cl>  const <span class=nv>url</span> <span class=o>=</span> req.url <span class=o>||</span> <span class=s1>&#39;&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  ws.once<span class=o>(</span><span class=s1>&#39;message&#39;</span>, <span class=nv>msg</span> <span class=o>=</span>&gt; <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=o>(</span>msg.length &gt; <span class=m>17</span> <span class=o>&amp;&amp;</span> msg<span class=o>[</span>0<span class=o>]</span> <span class=o>===</span> 0<span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>      const <span class=nv>id</span> <span class=o>=</span> msg.slice<span class=o>(</span>1, 17<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      const <span class=nv>isVless</span> <span class=o>=</span> id.every<span class=o>((</span>v, i<span class=o>)</span> <span class=o>=</span>&gt; <span class=nv>v</span> <span class=o>==</span> parseInt<span class=o>(</span>uuid.substr<span class=o>(</span>i * 2, 2<span class=o>)</span>, 16<span class=o>))</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=k>if</span> <span class=o>(</span>isVless<span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=k>if</span> <span class=o>(</span>!handleVlessConnection<span class=o>(</span>ws, msg<span class=o>))</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>          ws.close<span class=o>()</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=k>return</span><span class=p>;</span>
</span></span><span class=line><span class=cl>      <span class=o>}</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=k>if</span> <span class=o>(</span>!handleTrojanConnection<span class=o>(</span>ws, msg<span class=o>))</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>      ws.close<span class=o>()</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl>  <span class=o>})</span>.on<span class=o>(</span><span class=s1>&#39;error&#39;</span>, <span class=o>()</span> <span class=o>=</span>&gt; <span class=o>{})</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=o>})</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>httpServer.listen<span class=o>(</span>PORT, <span class=o>()</span> <span class=o>=</span>&gt; <span class=o>{</span>
</span></span><span class=line><span class=cl>  const <span class=nv>scheme</span> <span class=o>=</span> tlsOptions ? <span class=s1>&#39;HTTPS/WSS&#39;</span> : <span class=s1>&#39;HTTP/WS&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>  console.log<span class=o>(</span><span class=sb>`</span>Server is running on <span class=si>${</span><span class=nv>scheme</span><span class=si>}</span> port <span class=si>${</span><span class=nv>PORT</span><span class=si>}</span><span class=sb>`</span><span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl><span class=o>})</span><span class=p>;</span>
</span></span></code></pre></div><p>原始文件长这样：</p><p><img alt=image-20260110085938791 loading=lazy src=/posts/20260109-coze_program/image-20260110085938791.png></p><p>把原有内容都删除了注意先别贴，需要修改和混淆</p><p>我们要改的有几个地方：</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>const <span class=nv>DOMAIN</span> <span class=o>=</span> process.env.DOMAIN <span class=o>||</span> <span class=s1>&#39;xxxx.coze.site&#39;</span><span class=p>;</span>     // 填写项目域名
</span></span><span class=line><span class=cl>const <span class=nv>SUB_PATH</span> <span class=o>=</span> process.env.SUB_PATH <span class=o>||</span> <span class=s1>&#39;sub&#39;</span><span class=p>;</span>            // 获取节点的订阅路径
</span></span><span class=line><span class=cl>const <span class=nv>PORT</span> <span class=o>=</span> process.env.PORT <span class=o>||</span> 5000<span class=p>;</span>                     // http和ws服务端口
</span></span></code></pre></div><p>注意index.js程序，跟上两篇不一样，wispbyte和CF都在国外，所以dns的部分是直接访问谷歌dns，而扣子是在国内，dns的部分就不能访问谷歌了，否则程序会失效，注意注意</p><p>然后还是到 <a href=https://obfuscator.io/legacy-playground>https://obfuscator.io/legacy-playground</a></p><p>把代码贴入混淆</p><p><img alt=image-20260110091119679 loading=lazy src=/posts/20260109-coze_program/image-20260110091119679.png></p><p>然后替换掉 index.html 换上我们经典的环保地球，依然是大家最好让 gemini 给重新生成一个，否则哈哈哈，遍天下都是这个环保，真的无语了</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>&lt;!DOCTYPE html&gt;
</span></span><span class=line><span class=cl>&lt;html <span class=nv>lang</span><span class=o>=</span><span class=s2>&#34;en&#34;</span>&gt;
</span></span><span class=line><span class=cl>&lt;head&gt;
</span></span><span class=line><span class=cl>    &lt;meta <span class=nv>charset</span><span class=o>=</span><span class=s2>&#34;UTF-8&#34;</span>&gt;
</span></span><span class=line><span class=cl>    &lt;meta <span class=nv>name</span><span class=o>=</span><span class=s2>&#34;viewport&#34;</span> <span class=nv>content</span><span class=o>=</span><span class=s2>&#34;width=device-width, initial-scale=1.0&#34;</span>&gt;
</span></span><span class=line><span class=cl>    &lt;title&gt;Green Network - Protect Earth&lt;/title&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    &lt;style&gt;
</span></span><span class=line><span class=cl>        * <span class=o>{</span>
</span></span><span class=line><span class=cl>            margin: 0<span class=p>;</span>
</span></span><span class=line><span class=cl>            padding: 0<span class=p>;</span>
</span></span><span class=line><span class=cl>            box-sizing: border-box<span class=p>;</span>
</span></span><span class=line><span class=cl>            font-family: <span class=s1>&#39;Segoe UI&#39;</span>, Tahoma, Geneva, Verdana, sans-serif<span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        :root <span class=o>{</span>
</span></span><span class=line><span class=cl>            --primary: <span class=c1>#2e7d32;</span>
</span></span><span class=line><span class=cl>            --secondary: <span class=c1>#4caf50;</span>
</span></span><span class=line><span class=cl>            --accent: <span class=c1>#8bc34a;</span>
</span></span><span class=line><span class=cl>            --light: <span class=c1>#e8f5e9;</span>
</span></span><span class=line><span class=cl>            --dark: <span class=c1>#1b5e20;</span>
</span></span><span class=line><span class=cl>            --text: <span class=c1>#333333;</span>
</span></span><span class=line><span class=cl>            --white: <span class=c1>#ffffff;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        body <span class=o>{</span>
</span></span><span class=line><span class=cl>            background-color: var<span class=o>(</span>--light<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            color: var<span class=o>(</span>--text<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            line-height: 1.7<span class=p>;</span> /* Slightly increased line height <span class=k>for</span> readability */
</span></span><span class=line><span class=cl>            font-size: 16px<span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        header <span class=o>{</span>
</span></span><span class=line><span class=cl>            background: rgba<span class=o>(</span>46, 125, 50, 0.95<span class=o>)</span><span class=p>;</span> /* Slightly transparent primary color */
</span></span><span class=line><span class=cl>            color: var<span class=o>(</span>--white<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            padding: 1rem 0<span class=p>;</span>
</span></span><span class=line><span class=cl>            position: sticky<span class=p>;</span>
</span></span><span class=line><span class=cl>            top: 0<span class=p>;</span>
</span></span><span class=line><span class=cl>            z-index: 100<span class=p>;</span>
</span></span><span class=line><span class=cl>            box-shadow: <span class=m>0</span> 4px 12px rgba<span class=o>(</span>0, 0, 0, 0.15<span class=o>)</span><span class=p>;</span> /* Enhanced shadow */
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        .container <span class=o>{</span>
</span></span><span class=line><span class=cl>            width: 90%<span class=p>;</span>
</span></span><span class=line><span class=cl>            max-width: 1200px<span class=p>;</span>
</span></span><span class=line><span class=cl>            margin: <span class=m>0</span> auto<span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        .nav-container <span class=o>{</span>
</span></span><span class=line><span class=cl>            display: flex<span class=p>;</span>
</span></span><span class=line><span class=cl>            justify-content: space-between<span class=p>;</span>
</span></span><span class=line><span class=cl>            align-items: center<span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        .logo <span class=o>{</span>
</span></span><span class=line><span class=cl>            display: flex<span class=p>;</span>
</span></span><span class=line><span class=cl>            align-items: center<span class=p>;</span>
</span></span><span class=line><span class=cl>            gap: 10px<span class=p>;</span>
</span></span><span class=line><span class=cl>            font-size: 1.8rem<span class=p>;</span>
</span></span><span class=line><span class=cl>            font-weight: 700<span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        .logo i <span class=o>{</span>
</span></span><span class=line><span class=cl>            font-size: 2rem<span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        nav ul <span class=o>{</span>
</span></span><span class=line><span class=cl>            display: flex<span class=p>;</span>
</span></span><span class=line><span class=cl>            list-style: none<span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        nav ul li <span class=o>{</span>
</span></span><span class=line><span class=cl>            margin-left: 2rem<span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        nav ul li a <span class=o>{</span>
</span></span><span class=line><span class=cl>            color: var<span class=o>(</span>--white<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            text-decoration: none<span class=p>;</span>
</span></span><span class=line><span class=cl>            font-weight: 500<span class=p>;</span>
</span></span><span class=line><span class=cl>            transition: all 0.3s ease<span class=p>;</span>
</span></span><span class=line><span class=cl>            padding: 0.5rem 0<span class=p>;</span>
</span></span><span class=line><span class=cl>            position: relative<span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        nav ul li a:hover <span class=o>{</span>
</span></span><span class=line><span class=cl>            color: var<span class=o>(</span>--accent<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        nav ul li a::after <span class=o>{</span>
</span></span><span class=line><span class=cl>            content: <span class=s1>&#39;&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            position: absolute<span class=p>;</span>
</span></span><span class=line><span class=cl>            bottom: 0<span class=p>;</span>
</span></span><span class=line><span class=cl>            left: 0<span class=p>;</span>
</span></span><span class=line><span class=cl>            width: 0<span class=p>;</span>
</span></span><span class=line><span class=cl>            height: 2px<span class=p>;</span>
</span></span><span class=line><span class=cl>            background-color: var<span class=o>(</span>--accent<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            transition: width 0.3s ease<span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        nav ul li a:hover::after <span class=o>{</span>
</span></span><span class=line><span class=cl>            width: 100%<span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        .hero <span class=o>{</span>
</span></span><span class=line><span class=cl>            background: linear-gradient<span class=o>(</span>rgba<span class=o>(</span>0, 0, 0, 0.6<span class=o>)</span>, rgba<span class=o>(</span>0, 0, 0, 0.4<span class=o>))</span>, url<span class=o>(</span><span class=s1>&#39;https://images.unsplash.com/photo-1542601906990-b4d3fb778b09?ixlib=rb-4.0.3&amp;ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&amp;auto=format&amp;fit=crop&amp;w=2073&amp;q=80&#39;</span><span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            background-size: cover<span class=p>;</span>
</span></span><span class=line><span class=cl>            background-position: center<span class=p>;</span>
</span></span><span class=line><span class=cl>            height: 80vh<span class=p>;</span>
</span></span><span class=line><span class=cl>            display: flex<span class=p>;</span>
</span></span><span class=line><span class=cl>            align-items: center<span class=p>;</span>
</span></span><span class=line><span class=cl>            text-align: center<span class=p>;</span>
</span></span><span class=line><span class=cl>            color: var<span class=o>(</span>--white<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        .hero-content <span class=o>{</span>
</span></span><span class=line><span class=cl>            max-width: 800px<span class=p>;</span>
</span></span><span class=line><span class=cl>            margin: <span class=m>0</span> auto<span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        .hero h1 <span class=o>{</span>
</span></span><span class=line><span class=cl>            font-size: 3.5rem<span class=p>;</span>
</span></span><span class=line><span class=cl>            margin-bottom: 1rem<span class=p>;</span>
</span></span><span class=line><span class=cl>            text-shadow: 2px 2px 4px rgba<span class=o>(</span>0, 0, 0, 0.5<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        .hero p <span class=o>{</span>
</span></span><span class=line><span class=cl>            font-size: 1.3rem<span class=p>;</span>
</span></span><span class=line><span class=cl>            margin-bottom: 2rem<span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        .btn <span class=o>{</span>
</span></span><span class=line><span class=cl>            display: inline-block<span class=p>;</span>
</span></span><span class=line><span class=cl>            background-color: var<span class=o>(</span>--accent<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            color: var<span class=o>(</span>--white<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            padding: 0.9rem 2.2rem<span class=p>;</span> /* Slightly larger padding */
</span></span><span class=line><span class=cl>            border-radius: 8px<span class=p>;</span> /* More modern rounded corners */
</span></span><span class=line><span class=cl>            text-decoration: none<span class=p>;</span>
</span></span><span class=line><span class=cl>            font-weight: 600<span class=p>;</span>
</span></span><span class=line><span class=cl>            transition: all 0.3s ease<span class=p>;</span>
</span></span><span class=line><span class=cl>            border: none<span class=p>;</span>
</span></span><span class=line><span class=cl>            cursor: pointer<span class=p>;</span>
</span></span><span class=line><span class=cl>            box-shadow: <span class=m>0</span> 6px 10px rgba<span class=o>(</span>0, 0, 0, 0.1<span class=o>)</span><span class=p>;</span> /* Slightly enhanced shadow */
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        .btn:hover <span class=o>{</span>
</span></span><span class=line><span class=cl>            background-color: var<span class=o>(</span>--primary<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            transform: translateY<span class=o>(</span>-5px<span class=o>)</span><span class=p>;</span> /* More pronounced lift effect */
</span></span><span class=line><span class=cl>            box-shadow: <span class=m>0</span> 8px 15px rgba<span class=o>(</span>0, 0, 0, 0.2<span class=o>)</span><span class=p>;</span> /* Stronger hover shadow */
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        section <span class=o>{</span>
</span></span><span class=line><span class=cl>            padding: 5rem 0<span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        .section-title <span class=o>{</span>
</span></span><span class=line><span class=cl>            text-align: center<span class=p>;</span>
</span></span><span class=line><span class=cl>            margin-bottom: 3rem<span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        .section-title h2 <span class=o>{</span>
</span></span><span class=line><span class=cl>            font-size: 2.5rem<span class=p>;</span>
</span></span><span class=line><span class=cl>            color: var<span class=o>(</span>--primary<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            margin-bottom: 1rem<span class=p>;</span>
</span></span><span class=line><span class=cl>            position: relative<span class=p>;</span>
</span></span><span class=line><span class=cl>            display: inline-block<span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        .section-title h2::after <span class=o>{</span>
</span></span><span class=line><span class=cl>            content: <span class=s1>&#39;&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            position: absolute<span class=p>;</span>
</span></span><span class=line><span class=cl>            bottom: -10px<span class=p>;</span>
</span></span><span class=line><span class=cl>            left: 50%<span class=p>;</span>
</span></span><span class=line><span class=cl>            transform: translateX<span class=o>(</span>-50%<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            width: 90px<span class=p>;</span> /* Slightly wider underline */
</span></span><span class=line><span class=cl>            height: 5px<span class=p>;</span> /* Thicker underline */
</span></span><span class=line><span class=cl>            background-color: var<span class=o>(</span>--accent<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            border-radius: 3px<span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        .section-title p <span class=o>{</span>
</span></span><span class=line><span class=cl>            color: var<span class=o>(</span>--text<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            max-width: 700px<span class=p>;</span>
</span></span><span class=line><span class=cl>            margin: <span class=m>0</span> auto<span class=p>;</span>
</span></span><span class=line><span class=cl>            font-size: 1.1rem<span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        .about-content <span class=o>{</span>
</span></span><span class=line><span class=cl>            display: grid<span class=p>;</span>
</span></span><span class=line><span class=cl>            grid-template-columns: 1fr 1fr<span class=p>;</span>
</span></span><span class=line><span class=cl>            gap: 3rem<span class=p>;</span>
</span></span><span class=line><span class=cl>            align-items: center<span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        .about-img <span class=o>{</span>
</span></span><span class=line><span class=cl>            border-radius: 12px<span class=p>;</span> /* More rounded */
</span></span><span class=line><span class=cl>            overflow: hidden<span class=p>;</span>
</span></span><span class=line><span class=cl>            box-shadow: <span class=m>0</span> 12px 25px rgba<span class=o>(</span>0, 0, 0, 0.15<span class=o>)</span><span class=p>;</span> /* Enhanced shadow */
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        .about-img img <span class=o>{</span>
</span></span><span class=line><span class=cl>            width: 100%<span class=p>;</span>
</span></span><span class=line><span class=cl>            height: auto<span class=p>;</span>
</span></span><span class=line><span class=cl>            display: block<span class=p>;</span>
</span></span><span class=line><span class=cl>            transition: transform 0.5s ease<span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        .about-img:hover img <span class=o>{</span>
</span></span><span class=line><span class=cl>            transform: scale<span class=o>(</span>1.08<span class=o>)</span><span class=p>;</span> /* More pronounced zoom */
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        .about-text h3 <span class=o>{</span>
</span></span><span class=line><span class=cl>            font-size: 2rem<span class=p>;</span>
</span></span><span class=line><span class=cl>            margin-bottom: 1.5rem<span class=p>;</span>
</span></span><span class=line><span class=cl>            color: var<span class=o>(</span>--dark<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        .about-text p <span class=o>{</span>
</span></span><span class=line><span class=cl>            margin-bottom: 1.5rem<span class=p>;</span>
</span></span><span class=line><span class=cl>            font-size: 1.05rem<span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        .stats <span class=o>{</span>
</span></span><span class=line><span class=cl>            display: grid<span class=p>;</span>
</span></span><span class=line><span class=cl>            grid-template-columns: repeat<span class=o>(</span>4, 1fr<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            gap: 2rem<span class=p>;</span>
</span></span><span class=line><span class=cl>            margin-top: 4rem<span class=p>;</span> /* More space */
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        .stat-item <span class=o>{</span>
</span></span><span class=line><span class=cl>            text-align: center<span class=p>;</span>
</span></span><span class=line><span class=cl>            padding: 2.5rem 1.5rem<span class=p>;</span> /* More padding */
</span></span><span class=line><span class=cl>            background-color: var<span class=o>(</span>--white<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            border-radius: 12px<span class=p>;</span> /* More rounded */
</span></span><span class=line><span class=cl>            box-shadow: <span class=m>0</span> 8px 20px rgba<span class=o>(</span>0, 0, 0, 0.08<span class=o>)</span><span class=p>;</span> /* Enhanced shadow */
</span></span><span class=line><span class=cl>            transition: transform 0.3s ease, box-shadow 0.3s ease<span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        .stat-item:hover <span class=o>{</span>
</span></span><span class=line><span class=cl>            transform: translateY<span class=o>(</span>-12px<span class=o>)</span><span class=p>;</span> /* More pronounced lift */
</span></span><span class=line><span class=cl>            box-shadow: <span class=m>0</span> 15px 30px rgba<span class=o>(</span>0, 0, 0, 0.15<span class=o>)</span><span class=p>;</span> /* Stronger hover shadow */
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        .stat-item h3 <span class=o>{</span>
</span></span><span class=line><span class=cl>            font-size: 3rem<span class=p>;</span> /* Larger numbers */
</span></span><span class=line><span class=cl>            color: var<span class=o>(</span>--dark<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            margin-bottom: 0.8rem<span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        .stat-item p <span class=o>{</span>
</span></span><span class=line><span class=cl>            color: var<span class=o>(</span>--text<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            font-size: 1.1rem<span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        .initiatives <span class=o>{</span>
</span></span><span class=line><span class=cl>            background-color: var<span class=o>(</span>--white<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        .initiatives-grid <span class=o>{</span>
</span></span><span class=line><span class=cl>            display: grid<span class=p>;</span>
</span></span><span class=line><span class=cl>            grid-template-columns: repeat<span class=o>(</span>3, 1fr<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            gap: 2.5rem<span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        .initiative-card <span class=o>{</span>
</span></span><span class=line><span class=cl>            background-color: var<span class=o>(</span>--light<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            border-radius: 12px<span class=p>;</span> /* More rounded */
</span></span><span class=line><span class=cl>            overflow: hidden<span class=p>;</span>
</span></span><span class=line><span class=cl>            box-shadow: <span class=m>0</span> 8px 20px rgba<span class=o>(</span>0, 0, 0, 0.08<span class=o>)</span><span class=p>;</span> /* Enhanced shadow */
</span></span><span class=line><span class=cl>            transition: transform 0.3s ease, box-shadow 0.3s ease<span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        .initiative-card:hover <span class=o>{</span>
</span></span><span class=line><span class=cl>            transform: translateY<span class=o>(</span>-12px<span class=o>)</span><span class=p>;</span> /* More pronounced lift */
</span></span><span class=line><span class=cl>            box-shadow: <span class=m>0</span> 15px 30px rgba<span class=o>(</span>0, 0, 0, 0.15<span class=o>)</span><span class=p>;</span> /* Stronger hover shadow */
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        .initiative-img <span class=o>{</span>
</span></span><span class=line><span class=cl>            height: 220px<span class=p>;</span> /* Slightly taller images */
</span></span><span class=line><span class=cl>            overflow: hidden<span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        .initiative-img img <span class=o>{</span>
</span></span><span class=line><span class=cl>            width: 100%<span class=p>;</span>
</span></span><span class=line><span class=cl>            height: 100%<span class=p>;</span>
</span></span><span class=line><span class=cl>            object-fit: cover<span class=p>;</span>
</span></span><span class=line><span class=cl>            transition: transform 0.5s ease<span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        .initiative-card:hover .initiative-img img <span class=o>{</span>
</span></span><span class=line><span class=cl>            transform: scale<span class=o>(</span>1.15<span class=o>)</span><span class=p>;</span> /* More pronounced zoom */
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        .initiative-content <span class=o>{</span>
</span></span><span class=line><span class=cl>            padding: 2rem<span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        .initiative-content h3 <span class=o>{</span>
</span></span><span class=line><span class=cl>            font-size: 1.6rem<span class=p>;</span>
</span></span><span class=line><span class=cl>            margin-bottom: 1rem<span class=p>;</span>
</span></span><span class=line><span class=cl>            color: var<span class=o>(</span>--dark<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        .initiative-content p <span class=o>{</span>
</span></span><span class=line><span class=cl>            margin-bottom: 1.8rem<span class=p>;</span>
</span></span><span class=line><span class=cl>            font-size: 1.05rem<span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        .cta <span class=o>{</span>
</span></span><span class=line><span class=cl>            background: linear-gradient<span class=o>(</span>to right, var<span class=o>(</span>--primary<span class=o>)</span>, var<span class=o>(</span>--secondary<span class=o>))</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            color: var<span class=o>(</span>--white<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            text-align: center<span class=p>;</span>
</span></span><span class=line><span class=cl>            padding: 6rem 0<span class=p>;</span> /* More padding */
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        .cta h2 <span class=o>{</span>
</span></span><span class=line><span class=cl>            font-size: 3rem<span class=p>;</span> /* Larger heading */
</span></span><span class=line><span class=cl>            margin-bottom: 1.8rem<span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        .cta p <span class=o>{</span>
</span></span><span class=line><span class=cl>            font-size: 1.3rem<span class=p>;</span>
</span></span><span class=line><span class=cl>            margin-bottom: 2.5rem<span class=p>;</span>
</span></span><span class=line><span class=cl>            max-width: 700px<span class=p>;</span>
</span></span><span class=line><span class=cl>            margin-left: auto<span class=p>;</span>
</span></span><span class=line><span class=cl>            margin-right: auto<span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        .cta .btn <span class=o>{</span>
</span></span><span class=line><span class=cl>            background-color: var<span class=o>(</span>--white<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            color: var<span class=o>(</span>--primary<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        .cta .btn:hover <span class=o>{</span>
</span></span><span class=line><span class=cl>            background-color: var<span class=o>(</span>--accent<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            color: var<span class=o>(</span>--white<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        footer <span class=o>{</span>
</span></span><span class=line><span class=cl>            background-color: var<span class=o>(</span>--dark<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            color: var<span class=o>(</span>--white<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            padding: 4rem <span class=m>0</span> 2rem<span class=p>;</span> /* More padding */
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        .footer-content <span class=o>{</span>
</span></span><span class=line><span class=cl>            display: grid<span class=p>;</span>
</span></span><span class=line><span class=cl>            grid-template-columns: repeat<span class=o>(</span>4, 1fr<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            gap: 2.5rem<span class=p>;</span> /* More gap */
</span></span><span class=line><span class=cl>            margin-bottom: 2.5rem<span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        .footer-column h3 <span class=o>{</span>
</span></span><span class=line><span class=cl>            font-size: 1.4rem<span class=p>;</span>
</span></span><span class=line><span class=cl>            margin-bottom: 1.8rem<span class=p>;</span>
</span></span><span class=line><span class=cl>            position: relative<span class=p>;</span>
</span></span><span class=line><span class=cl>            padding-bottom: 12px<span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        .footer-column h3::after <span class=o>{</span>
</span></span><span class=line><span class=cl>            content: <span class=s1>&#39;&#39;</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            position: absolute<span class=p>;</span>
</span></span><span class=line><span class=cl>            bottom: 0<span class=p>;</span>
</span></span><span class=line><span class=cl>            left: 0<span class=p>;</span>
</span></span><span class=line><span class=cl>            width: 50px<span class=p>;</span> /* Wider underline */
</span></span><span class=line><span class=cl>            height: 3px<span class=p>;</span> /* Thicker underline */
</span></span><span class=line><span class=cl>            background-color: var<span class=o>(</span>--accent<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        .footer-column p <span class=o>{</span>
</span></span><span class=line><span class=cl>            margin-bottom: 1.2rem<span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        .footer-links <span class=o>{</span>
</span></span><span class=line><span class=cl>            list-style: none<span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        .footer-links li <span class=o>{</span>
</span></span><span class=line><span class=cl>            margin-bottom: 1rem<span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        .footer-links li a <span class=o>{</span>
</span></span><span class=line><span class=cl>            color: var<span class=o>(</span>--light<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            text-decoration: none<span class=p>;</span>
</span></span><span class=line><span class=cl>            transition: all 0.3s ease<span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        .footer-links li a:hover <span class=o>{</span>
</span></span><span class=line><span class=cl>            color: var<span class=o>(</span>--accent<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            padding-left: 8px<span class=p>;</span> /* More pronounced slide effect */
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        .social-links <span class=o>{</span>
</span></span><span class=line><span class=cl>            display: flex<span class=p>;</span>
</span></span><span class=line><span class=cl>            gap: 1.2rem<span class=p>;</span>
</span></span><span class=line><span class=cl>            margin-top: 1.5rem<span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        .social-links a <span class=o>{</span>
</span></span><span class=line><span class=cl>            display: inline-flex<span class=p>;</span>
</span></span><span class=line><span class=cl>            align-items: center<span class=p>;</span>
</span></span><span class=line><span class=cl>            justify-content: center<span class=p>;</span>
</span></span><span class=line><span class=cl>            width: 50px<span class=p>;</span> /* Larger social buttons */
</span></span><span class=line><span class=cl>            height: 50px<span class=p>;</span>
</span></span><span class=line><span class=cl>            background-color: rgba<span class=o>(</span>255, 255, 255, 0.15<span class=o>)</span><span class=p>;</span> /* Slightly more visible background */
</span></span><span class=line><span class=cl>            border-radius: 8px<span class=p>;</span> /* Square with rounded corners */
</span></span><span class=line><span class=cl>            color: var<span class=o>(</span>--white<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            text-decoration: none<span class=p>;</span>
</span></span><span class=line><span class=cl>            font-weight: 600<span class=p>;</span>
</span></span><span class=line><span class=cl>            transition: all 0.3s ease<span class=p>;</span>
</span></span><span class=line><span class=cl>            font-size: 0.9rem<span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        .social-links a:hover <span class=o>{</span>
</span></span><span class=line><span class=cl>            background-color: var<span class=o>(</span>--accent<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            transform: translateY<span class=o>(</span>-7px<span class=o>)</span><span class=p>;</span> /* More pronounced lift */
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        .copyright <span class=o>{</span>
</span></span><span class=line><span class=cl>            text-align: center<span class=p>;</span>
</span></span><span class=line><span class=cl>            padding-top: 2.5rem<span class=p>;</span>
</span></span><span class=line><span class=cl>            border-top: 1px solid rgba<span class=o>(</span>255, 255, 255, 0.15<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        .mobile-menu <span class=o>{</span>
</span></span><span class=line><span class=cl>            display: none<span class=p>;</span>
</span></span><span class=line><span class=cl>            font-size: 1.5rem<span class=p>;</span>
</span></span><span class=line><span class=cl>            cursor: pointer<span class=p>;</span>
</span></span><span class=line><span class=cl>            padding: 0.5rem 1rem<span class=p>;</span>
</span></span><span class=line><span class=cl>            border: 1px solid rgba<span class=o>(</span>255, 255, 255, 0.3<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            border-radius: 5px<span class=p>;</span>
</span></span><span class=line><span class=cl>            transition: all 0.3s ease<span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        .mobile-menu:hover <span class=o>{</span>
</span></span><span class=line><span class=cl>            background-color: rgba<span class=o>(</span>255, 255, 255, 0.1<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        @media <span class=o>(</span>max-width: 992px<span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            .about-content <span class=o>{</span>
</span></span><span class=line><span class=cl>                grid-template-columns: 1fr<span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            .initiatives-grid <span class=o>{</span>
</span></span><span class=line><span class=cl>                grid-template-columns: repeat<span class=o>(</span>2, 1fr<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            .footer-content <span class=o>{</span>
</span></span><span class=line><span class=cl>                grid-template-columns: repeat<span class=o>(</span>2, 1fr<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            .stats <span class=o>{</span>
</span></span><span class=line><span class=cl>                grid-template-columns: repeat<span class=o>(</span>2, 1fr<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        @media <span class=o>(</span>max-width: 768px<span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            .hero h1 <span class=o>{</span>
</span></span><span class=line><span class=cl>                font-size: 2.8rem<span class=p>;</span> /* Adjusted <span class=k>for</span> better readability on smaller screens */
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            .hero p <span class=o>{</span>
</span></span><span class=line><span class=cl>                font-size: 1.2rem<span class=p>;</span> /* Adjusted <span class=k>for</span> better readability on smaller screens */
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            nav ul <span class=o>{</span>
</span></span><span class=line><span class=cl>                display: none<span class=p>;</span>
</span></span><span class=line><span class=cl>                position: absolute<span class=p>;</span>
</span></span><span class=line><span class=cl>                top: 100%<span class=p>;</span>
</span></span><span class=line><span class=cl>                left: 0<span class=p>;</span>
</span></span><span class=line><span class=cl>                width: 100%<span class=p>;</span>
</span></span><span class=line><span class=cl>                background-color: var<span class=o>(</span>--primary<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                flex-direction: column<span class=p>;</span>
</span></span><span class=line><span class=cl>                padding: 1rem 0<span class=p>;</span>
</span></span><span class=line><span class=cl>                text-align: center<span class=p>;</span>
</span></span><span class=line><span class=cl>                box-shadow: <span class=m>0</span> 5px 10px rgba<span class=o>(</span>0, 0, 0, 0.1<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            nav ul.active <span class=o>{</span>
</span></span><span class=line><span class=cl>                display: flex<span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            nav ul li <span class=o>{</span>
</span></span><span class=line><span class=cl>                margin: 0<span class=p>;</span>
</span></span><span class=line><span class=cl>                padding: 0.8rem 0<span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            .mobile-menu <span class=o>{</span>
</span></span><span class=line><span class=cl>                display: block<span class=p>;</span>
</span></span><span class=line><span class=cl>                font-size: 1.2rem<span class=p>;</span> /* Slightly smaller <span class=k>for</span> mobile */
</span></span><span class=line><span class=cl>                padding: 0.4rem 0.8rem<span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            .initiatives-grid <span class=o>{</span>
</span></span><span class=line><span class=cl>                grid-template-columns: 1fr<span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            .footer-content <span class=o>{</span>
</span></span><span class=line><span class=cl>                grid-template-columns: 1fr<span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            .stats <span class=o>{</span>
</span></span><span class=line><span class=cl>                grid-template-columns: 1fr<span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            .social-links a <span class=o>{</span>
</span></span><span class=line><span class=cl>                width: 45px<span class=p>;</span> /* Slightly smaller social buttons */
</span></span><span class=line><span class=cl>                height: 45px<span class=p>;</span>
</span></span><span class=line><span class=cl>                font-size: 0.85rem<span class=p>;</span>
</span></span><span class=line><span class=cl>            <span class=o>}</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        /* Animation <span class=k>for</span> stats counter */
</span></span><span class=line><span class=cl>        .counter <span class=o>{</span>
</span></span><span class=line><span class=cl>            transition: all 0.5s ease<span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>    &lt;/style&gt;
</span></span><span class=line><span class=cl>&lt;/head&gt;
</span></span><span class=line><span class=cl>&lt;body&gt;
</span></span><span class=line><span class=cl>    &lt;!-- Header --&gt;
</span></span><span class=line><span class=cl>    &lt;header&gt;
</span></span><span class=line><span class=cl>        &lt;div <span class=nv>class</span><span class=o>=</span><span class=s2>&#34;container nav-container&#34;</span>&gt;
</span></span><span class=line><span class=cl>            &lt;div <span class=nv>class</span><span class=o>=</span><span class=s2>&#34;logo&#34;</span>&gt;
</span></span><span class=line><span class=cl>                &lt;span&gt;Green Network&lt;/span&gt;
</span></span><span class=line><span class=cl>            &lt;/div&gt;
</span></span><span class=line><span class=cl>            &lt;nav&gt;
</span></span><span class=line><span class=cl>                &lt;div <span class=nv>class</span><span class=o>=</span><span class=s2>&#34;mobile-menu&#34;</span>&gt;
</span></span><span class=line><span class=cl>                    Menu
</span></span><span class=line><span class=cl>                &lt;/div&gt;
</span></span><span class=line><span class=cl>                &lt;ul&gt;
</span></span><span class=line><span class=cl>                    &lt;li&gt;&lt;a <span class=nv>href</span><span class=o>=</span><span class=s2>&#34;#home&#34;</span>&gt;Home&lt;/a&gt;&lt;/li&gt;
</span></span><span class=line><span class=cl>                    &lt;li&gt;&lt;a <span class=nv>href</span><span class=o>=</span><span class=s2>&#34;#about&#34;</span>&gt;About&lt;/a&gt;&lt;/li&gt;
</span></span><span class=line><span class=cl>                    &lt;li&gt;&lt;a <span class=nv>href</span><span class=o>=</span><span class=s2>&#34;#initiatives&#34;</span>&gt;Initiatives&lt;/a&gt;&lt;/li&gt;
</span></span><span class=line><span class=cl>                    &lt;li&gt;&lt;a <span class=nv>href</span><span class=o>=</span><span class=s2>&#34;#get-involved&#34;</span>&gt;Get Involved&lt;/a&gt;&lt;/li&gt;
</span></span><span class=line><span class=cl>                    &lt;li&gt;&lt;a <span class=nv>href</span><span class=o>=</span><span class=s2>&#34;#contact&#34;</span>&gt;Contact&lt;/a&gt;&lt;/li&gt;
</span></span><span class=line><span class=cl>                &lt;/ul&gt;
</span></span><span class=line><span class=cl>            &lt;/nav&gt;
</span></span><span class=line><span class=cl>        &lt;/div&gt;
</span></span><span class=line><span class=cl>    &lt;/header&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    &lt;!-- Hero Section --&gt;
</span></span><span class=line><span class=cl>    &lt;section <span class=nv>class</span><span class=o>=</span><span class=s2>&#34;hero&#34;</span> <span class=nv>id</span><span class=o>=</span><span class=s2>&#34;home&#34;</span>&gt;
</span></span><span class=line><span class=cl>        &lt;div <span class=nv>class</span><span class=o>=</span><span class=s2>&#34;container hero-content&#34;</span>&gt;
</span></span><span class=line><span class=cl>            &lt;h1&gt;Protect Our Planet, Preserve Our Future&lt;/h1&gt;
</span></span><span class=line><span class=cl>            &lt;p&gt;Join the global movement to create a sustainable world through conservation, education, and community action.&lt;/p&gt;
</span></span><span class=line><span class=cl>            &lt;a <span class=nv>href</span><span class=o>=</span><span class=s2>&#34;#get-involved&#34;</span> <span class=nv>class</span><span class=o>=</span><span class=s2>&#34;btn&#34;</span>&gt;Join Our Network&lt;/a&gt;
</span></span><span class=line><span class=cl>        &lt;/div&gt;
</span></span><span class=line><span class=cl>    &lt;/section&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    &lt;!-- About Section --&gt;
</span></span><span class=line><span class=cl>    &lt;section <span class=nv>id</span><span class=o>=</span><span class=s2>&#34;about&#34;</span>&gt;
</span></span><span class=line><span class=cl>        &lt;div <span class=nv>class</span><span class=o>=</span><span class=s2>&#34;container&#34;</span>&gt;
</span></span><span class=line><span class=cl>            &lt;div <span class=nv>class</span><span class=o>=</span><span class=s2>&#34;section-title&#34;</span>&gt;
</span></span><span class=line><span class=cl>                &lt;h2&gt;About Green Network&lt;/h2&gt;
</span></span><span class=line><span class=cl>                &lt;p&gt;We are a global community dedicated to environmental protection and sustainable development.&lt;/p&gt;
</span></span><span class=line><span class=cl>            &lt;/div&gt;
</span></span><span class=line><span class=cl>            &lt;div <span class=nv>class</span><span class=o>=</span><span class=s2>&#34;about-content&#34;</span>&gt;
</span></span><span class=line><span class=cl>                &lt;div <span class=nv>class</span><span class=o>=</span><span class=s2>&#34;about-img&#34;</span>&gt;
</span></span><span class=line><span class=cl>                    &lt;img <span class=nv>src</span><span class=o>=</span><span class=s2>&#34;https://images.unsplash.com/photo-1507591064344-4c6ce005b128?ixlib=rb-4.0.3&amp;ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&amp;auto=format&amp;fit=crop&amp;w=2070&amp;q=80&#34;</span> <span class=nv>alt</span><span class=o>=</span><span class=s2>&#34;Team planting trees&#34;</span>&gt;
</span></span><span class=line><span class=cl>                &lt;/div&gt;
</span></span><span class=line><span class=cl>                &lt;div <span class=nv>class</span><span class=o>=</span><span class=s2>&#34;about-text&#34;</span>&gt;
</span></span><span class=line><span class=cl>                    &lt;h3&gt;Our Mission&lt;/h3&gt;
</span></span><span class=line><span class=cl>                    &lt;p&gt;Green Network is committed to creating a sustainable future by protecting natural ecosystems, promoting renewable energy, and empowering communities to take environmental action.&lt;/p&gt;
</span></span><span class=line><span class=cl>                    &lt;p&gt;Founded in 2010, we<span class=s1>&#39;ve grown from a small grassroots organization to an international network with over 50,000 members across 120 countries.&lt;/p&gt;
</span></span></span><span class=line><span class=cl><span class=s1>                    &lt;p&gt;Our approach combines scientific research, community engagement, and policy advocacy to address the most pressing environmental challenges of our time.&lt;/p&gt;
</span></span></span><span class=line><span class=cl><span class=s1>                    &lt;a href=&#34;#&#34; class=&#34;btn&#34;&gt;Learn More&lt;/a&gt;
</span></span></span><span class=line><span class=cl><span class=s1>                &lt;/div&gt;
</span></span></span><span class=line><span class=cl><span class=s1>            &lt;/div&gt;
</span></span></span><span class=line><span class=cl><span class=s1>            &lt;div class=&#34;stats&#34;&gt;
</span></span></span><span class=line><span class=cl><span class=s1>                &lt;div class=&#34;stat-item&#34;&gt;
</span></span></span><span class=line><span class=cl><span class=s1>                    &lt;h3 class=&#34;counter&#34; data-target=&#34;2500000&#34;&gt;0&lt;/h3&gt;
</span></span></span><span class=line><span class=cl><span class=s1>                    &lt;p&gt;Trees Planted&lt;/p&gt;
</span></span></span><span class=line><span class=cl><span class=s1>                &lt;/div&gt;
</span></span></span><span class=line><span class=cl><span class=s1>                &lt;div class=&#34;stat-item&#34;&gt;
</span></span></span><span class=line><span class=cl><span class=s1>                    &lt;h3 class=&#34;counter&#34; data-target=&#34;50000&#34;&gt;0&lt;/h3&gt;
</span></span></span><span class=line><span class=cl><span class=s1>                    &lt;p&gt;Active Members&lt;/p&gt;
</span></span></span><span class=line><span class=cl><span class=s1>                &lt;/div&gt;
</span></span></span><span class=line><span class=cl><span class=s1>                &lt;div class=&#34;stat-item&#34;&gt;
</span></span></span><span class=line><span class=cl><span class=s1>                    &lt;h3 class=&#34;counter&#34; data-target=&#34;120&#34;&gt;0&lt;/h3&gt;
</span></span></span><span class=line><span class=cl><span class=s1>                    &lt;p&gt;Countries Reached&lt;/p&gt;
</span></span></span><span class=line><span class=cl><span class=s1>                &lt;/div&gt;
</span></span></span><span class=line><span class=cl><span class=s1>                &lt;div class=&#34;stat-item&#34;&gt;
</span></span></span><span class=line><span class=cl><span class=s1>                    &lt;h3 class=&#34;counter&#34; data-target=&#34;1500&#34;&gt;0&lt;/h3&gt;
</span></span></span><span class=line><span class=cl><span class=s1>                    &lt;p&gt;Cleanup Projects&lt;/p&gt;
</span></span></span><span class=line><span class=cl><span class=s1>                &lt;/div&gt;
</span></span></span><span class=line><span class=cl><span class=s1>            &lt;/div&gt;
</span></span></span><span class=line><span class=cl><span class=s1>        &lt;/div&gt;
</span></span></span><span class=line><span class=cl><span class=s1>    &lt;/section&gt;
</span></span></span><span class=line><span class=cl><span class=s1>
</span></span></span><span class=line><span class=cl><span class=s1>    &lt;!-- Initiatives Section --&gt;
</span></span></span><span class=line><span class=cl><span class=s1>    &lt;section class=&#34;initiatives&#34; id=&#34;initiatives&#34;&gt;
</span></span></span><span class=line><span class=cl><span class=s1>        &lt;div class=&#34;container&#34;&gt;
</span></span></span><span class=line><span class=cl><span class=s1>            &lt;div class=&#34;section-title&#34;&gt;
</span></span></span><span class=line><span class=cl><span class=s1>                &lt;h2&gt;Our Initiatives&lt;/h2&gt;
</span></span></span><span class=line><span class=cl><span class=s1>                &lt;p&gt;Discover the key programs and projects we&#39;</span>re implementing to protect our planet.&lt;/p&gt;
</span></span><span class=line><span class=cl>            &lt;/div&gt;
</span></span><span class=line><span class=cl>            &lt;div <span class=nv>class</span><span class=o>=</span><span class=s2>&#34;initiatives-grid&#34;</span>&gt;
</span></span><span class=line><span class=cl>                &lt;div <span class=nv>class</span><span class=o>=</span><span class=s2>&#34;initiative-card&#34;</span>&gt;
</span></span><span class=line><span class=cl>                    &lt;div <span class=nv>class</span><span class=o>=</span><span class=s2>&#34;initiative-img&#34;</span>&gt;
</span></span><span class=line><span class=cl>                        &lt;img <span class=nv>src</span><span class=o>=</span><span class=s2>&#34;https://dialogue.earth/content/uploads/2021/04/lessons-from-the-rush-to-reforest-china-dialogue-2400x1599.jpg&#34;</span> <span class=nv>alt</span><span class=o>=</span><span class=s2>&#34;Reforestation&#34;</span>&gt;
</span></span><span class=line><span class=cl>                    &lt;/div&gt;
</span></span><span class=line><span class=cl>                    &lt;div <span class=nv>class</span><span class=o>=</span><span class=s2>&#34;initiative-content&#34;</span>&gt;
</span></span><span class=line><span class=cl>                        &lt;h3&gt;Global Reforestation&lt;/h3&gt;
</span></span><span class=line><span class=cl>                        &lt;p&gt;Planting millions of trees worldwide to restore ecosystems, combat climate change, and protect biodiversity.&lt;/p&gt;
</span></span><span class=line><span class=cl>                        &lt;a <span class=nv>href</span><span class=o>=</span><span class=s2>&#34;#&#34;</span> <span class=nv>class</span><span class=o>=</span><span class=s2>&#34;btn&#34;</span>&gt;Learn More&lt;/a&gt;
</span></span><span class=line><span class=cl>                    &lt;/div&gt;
</span></span><span class=line><span class=cl>                &lt;/div&gt;
</span></span><span class=line><span class=cl>                &lt;div <span class=nv>class</span><span class=o>=</span><span class=s2>&#34;initiative-card&#34;</span>&gt;
</span></span><span class=line><span class=cl>                    &lt;div <span class=nv>class</span><span class=o>=</span><span class=s2>&#34;initiative-img&#34;</span>&gt;
</span></span><span class=line><span class=cl>                        &lt;img <span class=nv>src</span><span class=o>=</span><span class=s2>&#34;https://images.unsplash.com/photo-1621451537084-482c73073a0f?ixlib=rb-4.0.3&amp;ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&amp;auto=format&amp;fit=crop&amp;w=1974&amp;q=80&#34;</span> <span class=nv>alt</span><span class=o>=</span><span class=s2>&#34;Ocean Conservation&#34;</span>&gt;
</span></span><span class=line><span class=cl>                    &lt;/div&gt;
</span></span><span class=line><span class=cl>                    &lt;div <span class=nv>class</span><span class=o>=</span><span class=s2>&#34;initiative-content&#34;</span>&gt;
</span></span><span class=line><span class=cl>                        &lt;h3&gt;Ocean Conservation&lt;/h3&gt;
</span></span><span class=line><span class=cl>                        &lt;p&gt;Protecting marine ecosystems, reducing plastic pollution, and promoting sustainable fishing practices.&lt;/p&gt;
</span></span><span class=line><span class=cl>                        &lt;a <span class=nv>href</span><span class=o>=</span><span class=s2>&#34;#&#34;</span> <span class=nv>class</span><span class=o>=</span><span class=s2>&#34;btn&#34;</span>&gt;Learn More&lt;/a&gt;
</span></span><span class=line><span class=cl>                    &lt;/div&gt;
</span></span><span class=line><span class=cl>                &lt;/div&gt;
</span></span><span class=line><span class=cl>                &lt;div <span class=nv>class</span><span class=o>=</span><span class=s2>&#34;initiative-card&#34;</span>&gt;
</span></span><span class=line><span class=cl>                    &lt;div <span class=nv>class</span><span class=o>=</span><span class=s2>&#34;initiative-img&#34;</span>&gt;
</span></span><span class=line><span class=cl>                        &lt;img <span class=nv>src</span><span class=o>=</span><span class=s2>&#34;https://images.unsplash.com/photo-1508514177221-188b1cf16e9d?ixlib=rb-4.0.3&amp;ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&amp;auto=format&amp;fit=crop&amp;w=2072&amp;q=80&#34;</span> <span class=nv>alt</span><span class=o>=</span><span class=s2>&#34;Renewable Energy&#34;</span>&gt;
</span></span><span class=line><span class=cl>                    &lt;/div&gt;
</span></span><span class=line><span class=cl>                    &lt;div <span class=nv>class</span><span class=o>=</span><span class=s2>&#34;initiative-content&#34;</span>&gt;
</span></span><span class=line><span class=cl>                        &lt;h3&gt;Renewable Energy&lt;/h3&gt;
</span></span><span class=line><span class=cl>                        &lt;p&gt;Promoting solar, wind, and other clean energy sources to reduce dependence on fossil fuels.&lt;/p&gt;
</span></span><span class=line><span class=cl>                        &lt;a <span class=nv>href</span><span class=o>=</span><span class=s2>&#34;#&#34;</span> <span class=nv>class</span><span class=o>=</span><span class=s2>&#34;btn&#34;</span>&gt;Learn More&lt;/a&gt;
</span></span><span class=line><span class=cl>                    &lt;/div&gt;
</span></span><span class=line><span class=cl>                &lt;/div&gt;
</span></span><span class=line><span class=cl>            &lt;/div&gt;
</span></span><span class=line><span class=cl>        &lt;/div&gt;
</span></span><span class=line><span class=cl>    &lt;/section&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    &lt;!-- CTA Section --&gt;
</span></span><span class=line><span class=cl>    &lt;section <span class=nv>class</span><span class=o>=</span><span class=s2>&#34;cta&#34;</span> <span class=nv>id</span><span class=o>=</span><span class=s2>&#34;get-involved&#34;</span>&gt;
</span></span><span class=line><span class=cl>        &lt;div <span class=nv>class</span><span class=o>=</span><span class=s2>&#34;container&#34;</span>&gt;
</span></span><span class=line><span class=cl>            &lt;h2&gt;Join Our Global Movement&lt;/h2&gt;
</span></span><span class=line><span class=cl>            &lt;p&gt;Together, we can create a sustainable future <span class=k>for</span> generations to come. Every action counts, no matter how small.&lt;/p&gt;
</span></span><span class=line><span class=cl>            &lt;a <span class=nv>href</span><span class=o>=</span><span class=s2>&#34;#&#34;</span> <span class=nv>class</span><span class=o>=</span><span class=s2>&#34;btn&#34;</span>&gt;Become a Member&lt;/a&gt;
</span></span><span class=line><span class=cl>        &lt;/div&gt;
</span></span><span class=line><span class=cl>    &lt;/section&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    &lt;!-- Footer --&gt;
</span></span><span class=line><span class=cl>    &lt;footer <span class=nv>id</span><span class=o>=</span><span class=s2>&#34;contact&#34;</span>&gt;
</span></span><span class=line><span class=cl>        &lt;div <span class=nv>class</span><span class=o>=</span><span class=s2>&#34;container&#34;</span>&gt;
</span></span><span class=line><span class=cl>            &lt;div <span class=nv>class</span><span class=o>=</span><span class=s2>&#34;footer-content&#34;</span>&gt;
</span></span><span class=line><span class=cl>                &lt;div <span class=nv>class</span><span class=o>=</span><span class=s2>&#34;footer-column&#34;</span>&gt;
</span></span><span class=line><span class=cl>                    &lt;h3&gt;Green Network&lt;/h3&gt;
</span></span><span class=line><span class=cl>                    &lt;p&gt;We are dedicated to protecting our planet through collaborative action, education, and sustainable solutions.&lt;/p&gt;
</span></span><span class=line><span class=cl>                    &lt;div <span class=nv>class</span><span class=o>=</span><span class=s2>&#34;social-links&#34;</span>&gt;
</span></span><span class=line><span class=cl>                        &lt;a <span class=nv>href</span><span class=o>=</span><span class=s2>&#34;#&#34;</span>&gt;Facebook&lt;/a&gt;
</span></span><span class=line><span class=cl>                        &lt;a <span class=nv>href</span><span class=o>=</span><span class=s2>&#34;#&#34;</span>&gt;Twitter&lt;/a&gt;
</span></span><span class=line><span class=cl>                        &lt;a <span class=nv>href</span><span class=o>=</span><span class=s2>&#34;#&#34;</span>&gt;Instagram&lt;/a&gt;
</span></span><span class=line><span class=cl>                        &lt;a <span class=nv>href</span><span class=o>=</span><span class=s2>&#34;#&#34;</span>&gt;LinkedIn&lt;/a&gt;
</span></span><span class=line><span class=cl>                    &lt;/div&gt;
</span></span><span class=line><span class=cl>                &lt;/div&gt;
</span></span><span class=line><span class=cl>                &lt;div <span class=nv>class</span><span class=o>=</span><span class=s2>&#34;footer-column&#34;</span>&gt;
</span></span><span class=line><span class=cl>                    &lt;h3&gt;Quick Links&lt;/h3&gt;
</span></span><span class=line><span class=cl>                    &lt;ul <span class=nv>class</span><span class=o>=</span><span class=s2>&#34;footer-links&#34;</span>&gt;
</span></span><span class=line><span class=cl>                        &lt;li&gt;&lt;a <span class=nv>href</span><span class=o>=</span><span class=s2>&#34;#home&#34;</span>&gt;Home&lt;/a&gt;&lt;/li&gt;
</span></span><span class=line><span class=cl>                        &lt;li&gt;&lt;a <span class=nv>href</span><span class=o>=</span><span class=s2>&#34;#about&#34;</span>&gt;About Us&lt;/a&gt;&lt;/li&gt;
</span></span><span class=line><span class=cl>                        &lt;li&gt;&lt;a <span class=nv>href</span><span class=o>=</span><span class=s2>&#34;#initiatives&#34;</span>&gt;Initiatives&lt;/a&gt;&lt;/li&gt;
</span></span><span class=line><span class=cl>                        &lt;li&gt;&lt;a <span class=nv>href</span><span class=o>=</span><span class=s2>&#34;#get-involved&#34;</span>&gt;Get Involved&lt;/a&gt;&lt;/li&gt;
</span></span><span class=line><span class=cl>                        &lt;li&gt;&lt;a <span class=nv>href</span><span class=o>=</span><span class=s2>&#34;#contact&#34;</span>&gt;Contact&lt;/a&gt;&lt;/li&gt;
</span></span><span class=line><span class=cl>                    &lt;/ul&gt;
</span></span><span class=line><span class=cl>                &lt;/div&gt;
</span></span><span class=line><span class=cl>                &lt;div <span class=nv>class</span><span class=o>=</span><span class=s2>&#34;footer-column&#34;</span>&gt;
</span></span><span class=line><span class=cl>                    &lt;h3&gt;Our Programs&lt;/h3&gt;
</span></span><span class=line><span class=cl>                    &lt;ul <span class=nv>class</span><span class=o>=</span><span class=s2>&#34;footer-links&#34;</span>&gt;
</span></span><span class=line><span class=cl>                        &lt;li&gt;&lt;a <span class=nv>href</span><span class=o>=</span><span class=s2>&#34;#&#34;</span>&gt;Reforestation&lt;/a&gt;&lt;/li&gt;
</span></span><span class=line><span class=cl>                        &lt;li&gt;&lt;a <span class=nv>href</span><span class=o>=</span><span class=s2>&#34;#&#34;</span>&gt;Ocean Cleanup&lt;/a&gt;&lt;/li&gt;
</span></span><span class=line><span class=cl>                        &lt;li&gt;&lt;a <span class=nv>href</span><span class=o>=</span><span class=s2>&#34;#&#34;</span>&gt;Wildlife Protection&lt;/a&gt;&lt;/li&gt;
</span></span><span class=line><span class=cl>                        &lt;li&gt;&lt;a <span class=nv>href</span><span class=o>=</span><span class=s2>&#34;#&#34;</span>&gt;Climate Education&lt;/a&gt;&lt;/li&gt;
</span></span><span class=line><span class=cl>                        &lt;li&gt;&lt;a <span class=nv>href</span><span class=o>=</span><span class=s2>&#34;#&#34;</span>&gt;Sustainable Agriculture&lt;/a&gt;&lt;/li&gt;
</span></span><span class=line><span class=cl>                    &lt;/ul&gt;
</span></span><span class=line><span class=cl>                &lt;/div&gt;
</span></span><span class=line><span class=cl>                &lt;div <span class=nv>class</span><span class=o>=</span><span class=s2>&#34;footer-column&#34;</span>&gt;
</span></span><span class=line><span class=cl>                    &lt;h3&gt;Contact Us&lt;/h3&gt;
</span></span><span class=line><span class=cl>                    &lt;p&gt;Copper Creek Drive, New York&lt;/p&gt;
</span></span><span class=line><span class=cl>                    &lt;p&gt;+1 <span class=o>(</span>312<span class=o>)</span> 171-0771&lt;/p&gt;
</span></span><span class=line><span class=cl>                    &lt;p&gt;support@greennetwork.org&lt;/p&gt;
</span></span><span class=line><span class=cl>                &lt;/div&gt;
</span></span><span class=line><span class=cl>            &lt;/div&gt;
</span></span><span class=line><span class=cl>            &lt;div <span class=nv>class</span><span class=o>=</span><span class=s2>&#34;copyright&#34;</span>&gt;
</span></span><span class=line><span class=cl>                &lt;p&gt;<span class=p>&amp;</span>copy<span class=p>;</span> <span class=m>2025</span> Green Network. All rights reserved.&lt;/p&gt;
</span></span><span class=line><span class=cl>            &lt;/div&gt;
</span></span><span class=line><span class=cl>        &lt;/div&gt;
</span></span><span class=line><span class=cl>    &lt;/footer&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    &lt;script&gt;
</span></span><span class=line><span class=cl>        // Mobile Menu Toggle
</span></span><span class=line><span class=cl>        document.querySelector<span class=o>(</span><span class=s1>&#39;.mobile-menu&#39;</span><span class=o>)</span>.addEventListener<span class=o>(</span><span class=s1>&#39;click&#39;</span>, <span class=k>function</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            document.querySelector<span class=o>(</span><span class=s1>&#39;nav ul&#39;</span><span class=o>)</span>.classList.toggle<span class=o>(</span><span class=s1>&#39;active&#39;</span><span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>})</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        // Counter Animation
</span></span><span class=line><span class=cl>        <span class=k>function</span> animateCounters<span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>            const <span class=nv>counters</span> <span class=o>=</span> document.querySelectorAll<span class=o>(</span><span class=s1>&#39;.counter&#39;</span><span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>            const <span class=nv>speed</span> <span class=o>=</span> 200<span class=p>;</span> // The lower the slower
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>            counters.forEach<span class=o>(</span><span class=nv>counter</span> <span class=o>=</span>&gt; <span class=o>{</span>
</span></span><span class=line><span class=cl>                const <span class=nv>target</span> <span class=o>=</span> +counter.getAttribute<span class=o>(</span><span class=s1>&#39;data-target&#39;</span><span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                const <span class=nv>count</span> <span class=o>=</span> +counter.innerText<span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                const <span class=nv>inc</span> <span class=o>=</span> target / speed<span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                <span class=k>if</span><span class=o>(</span>count &lt; target<span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                    counter.innerText <span class=o>=</span> Math.ceil<span class=o>(</span>count + inc<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                    setTimeout<span class=o>(</span>animateCounters, 1<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=o>}</span> <span class=k>else</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                    counter.innerText <span class=o>=</span> target<span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=o>})</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>}</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        // Initialize counters when page loads
</span></span><span class=line><span class=cl>        window.addEventListener<span class=o>(</span><span class=s1>&#39;load&#39;</span>, animateCounters<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        // Smooth scrolling <span class=k>for</span> navigation links
</span></span><span class=line><span class=cl>        document.querySelectorAll<span class=o>(</span><span class=s1>&#39;a[href^=&#34;#&#34;]&#39;</span><span class=o>)</span>.forEach<span class=o>(</span><span class=nv>anchor</span> <span class=o>=</span>&gt; <span class=o>{</span>
</span></span><span class=line><span class=cl>            anchor.addEventListener<span class=o>(</span><span class=s1>&#39;click&#39;</span>, <span class=k>function</span><span class=o>(</span>e<span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                e.preventDefault<span class=o>()</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                const <span class=nv>targetId</span> <span class=o>=</span> this.getAttribute<span class=o>(</span><span class=s1>&#39;href&#39;</span><span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span><span class=o>(</span><span class=nv>targetId</span> <span class=o>===</span> <span class=s1>&#39;#&#39;</span><span class=o>)</span> <span class=k>return</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                const <span class=nv>targetElement</span> <span class=o>=</span> document.querySelector<span class=o>(</span>targetId<span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=k>if</span><span class=o>(</span>targetElement<span class=o>)</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>                    window.scrollTo<span class=o>({</span>
</span></span><span class=line><span class=cl>                        top: targetElement.offsetTop - 80,
</span></span><span class=line><span class=cl>                        behavior: <span class=s1>&#39;smooth&#39;</span>
</span></span><span class=line><span class=cl>                    <span class=o>})</span><span class=p>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>                    document.querySelector<span class=o>(</span><span class=s1>&#39;nav ul&#39;</span><span class=o>)</span>.classList.remove<span class=o>(</span><span class=s1>&#39;active&#39;</span><span class=o>)</span><span class=p>;</span>
</span></span><span class=line><span class=cl>                <span class=o>}</span>
</span></span><span class=line><span class=cl>            <span class=o>})</span><span class=p>;</span>
</span></span><span class=line><span class=cl>        <span class=o>})</span><span class=p>;</span>
</span></span><span class=line><span class=cl>    &lt;/script&gt;
</span></span><span class=line><span class=cl>&lt;/body&gt;
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>&lt;/html&gt;
</span></span></code></pre></div><p>一切完工，再点击部署，居然失败，那是当然的！因为我们加了axios和ws库，但是没下载，不要惊慌，一键修复</p><p><img alt=image-20260110091615902 loading=lazy src=/posts/20260109-coze_program/image-20260110091615902.png></p><p>然后左边栏开始滚动，这个智能引擎是可以分析出index.js的原始代码的</p><p><img alt=image-20260110092258037 loading=lazy src=/posts/20260109-coze_program/image-20260110092258037.png></p><p>得，它居然给还原了，还完全去掉了next框架，哈哈哈哈，那我们先退回去，如果不退，不会刷新文件列表</p><p><img alt=image-20260110094812437 loading=lazy src=/posts/20260109-coze_program/image-20260110094812437.png></p><p>然后重新进入，我们得二次重新修改 index.js 和 index.html，并且把正确的package.json给放进去</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl><span class=o>{</span>
</span></span><span class=line><span class=cl>  <span class=s2>&#34;name&#34;</span>: <span class=s2>&#34;js01&#34;</span>,
</span></span><span class=line><span class=cl>  <span class=s2>&#34;version&#34;</span>: <span class=s2>&#34;0.0.3&#34;</span>,
</span></span><span class=line><span class=cl>  <span class=s2>&#34;description&#34;</span>: <span class=s2>&#34;Nodejs-server&#34;</span>,
</span></span><span class=line><span class=cl>  <span class=s2>&#34;main&#34;</span>: <span class=s2>&#34;index.js&#34;</span>,
</span></span><span class=line><span class=cl>  <span class=s2>&#34;private&#34;</span>: false,
</span></span><span class=line><span class=cl>  <span class=s2>&#34;scripts&#34;</span>: <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;start&#34;</span>: <span class=s2>&#34;node index.js&#34;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>,
</span></span><span class=line><span class=cl>  <span class=s2>&#34;dependencies&#34;</span>: <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;ws&#34;</span>: <span class=s2>&#34;^8.14.2&#34;</span>,
</span></span><span class=line><span class=cl>    <span class=s2>&#34;axios&#34;</span>: <span class=s2>&#34;^1.12.2&#34;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>,
</span></span><span class=line><span class=cl>  <span class=s2>&#34;engines&#34;</span>: <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=s2>&#34;node&#34;</span>: <span class=s2>&#34;&gt;=14&#34;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></div><p>检查一下3个文件内容是否正确，不行就退出去，再进来，它这个控制台得文件列表才会刷新</p><p><img alt=image-20260110095246013 loading=lazy src=/posts/20260109-coze_program/image-20260110095246013.png></p><p>注意上面的情况，可能会反复，我们确保三个文件都ok，失败就让让它自己修复，然后再在修复的基础上再改。</p><p>最后重新部署一遍</p><p><img alt=image-20260110091925798 loading=lazy src=/posts/20260109-coze_program/image-20260110091925798.png></p><p>再打开页面，熟悉的环保页面又回来了</p><p><img alt=image-20260110092444962 loading=lazy src=/posts/20260109-coze_program/image-20260110092444962.png></p><p>然后打开订阅地址： xxxx.coze.site/sub，sub最好改一个只有自己知道得路径</p><p><img alt=image-20260110095652725 loading=lazy src=/posts/20260109-coze_program/image-20260110095652725.png>e</p><p>粘贴导入v2rayN就可以使用了</p><p>不过这是个国内的容器，不能用来翻墙，可以用来隐藏IP？</p><p>补充：弄到最后才发现，第一次生成代码部署完成，然后在package.json里加axios和ws的时候，其实应该让它立刻再部署，然后再改index.js和index.html和package，这样可以减少一次它的回退。shit</p><p>anyway，关键是跟他这个引擎反复对话，让他自己修复，然后在它基础上再改，就ok了</p></div><footer class=post-footer><ul class=post-tags></ul><nav class=paginav><a class=prev href=https://rendoumi.com/posts/20260109-caddy_zot/><span class=title>« 上一页</span><br><span>Caddy配合zot实现ip白名单登录docker registry</span>
</a><a class=next href=https://rendoumi.com/posts/20260106-huggingface_vless_trojan/><span class=title>下一页 »</span><br><span>huggingface.co薅羊毛记</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share 薅羊毛之扣子编程 on x" href="https://x.com/intent/tweet/?text=%e8%96%85%e7%be%8a%e6%af%9b%e4%b9%8b%e6%89%a3%e5%ad%90%e7%bc%96%e7%a8%8b&amp;url=https%3a%2f%2frendoumi.com%2fposts%2f20260109-coze_program%2f&amp;hashtags="><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 薅羊毛之扣子编程 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=https%3a%2f%2frendoumi.com%2fposts%2f20260109-coze_program%2f&amp;title=%e8%96%85%e7%be%8a%e6%af%9b%e4%b9%8b%e6%89%a3%e5%ad%90%e7%bc%96%e7%a8%8b&amp;summary=%e8%96%85%e7%be%8a%e6%af%9b%e4%b9%8b%e6%89%a3%e5%ad%90%e7%bc%96%e7%a8%8b&amp;source=https%3a%2f%2frendoumi.com%2fposts%2f20260109-coze_program%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 薅羊毛之扣子编程 on reddit" href="https://reddit.com/submit?url=https%3a%2f%2frendoumi.com%2fposts%2f20260109-coze_program%2f&title=%e8%96%85%e7%be%8a%e6%af%9b%e4%b9%8b%e6%89%a3%e5%ad%90%e7%bc%96%e7%a8%8b"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 薅羊毛之扣子编程 on facebook" href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2frendoumi.com%2fposts%2f20260109-coze_program%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 薅羊毛之扣子编程 on whatsapp" href="https://api.whatsapp.com/send?text=%e8%96%85%e7%be%8a%e6%af%9b%e4%b9%8b%e6%89%a3%e5%ad%90%e7%bc%96%e7%a8%8b%20-%20https%3a%2f%2frendoumi.com%2fposts%2f20260109-coze_program%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 薅羊毛之扣子编程 on telegram" href="https://telegram.me/share/url?text=%e8%96%85%e7%be%8a%e6%af%9b%e4%b9%8b%e6%89%a3%e5%ad%90%e7%bc%96%e7%a8%8b&amp;url=https%3a%2f%2frendoumi.com%2fposts%2f20260109-coze_program%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share 薅羊毛之扣子编程 on ycombinator" href="https://news.ycombinator.com/submitlink?t=%e8%96%85%e7%be%8a%e6%af%9b%e4%b9%8b%e6%89%a3%e5%ad%90%e7%bc%96%e7%a8%8b&u=https%3a%2f%2frendoumi.com%2fposts%2f20260109-coze_program%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer><div id=comments></div><script src=https://cwd.js.org/cwd.js></script><script>const comments=new CWDComments({el:"#comments",apiBaseUrl:"https://cwd.rendoumi.qzz.io"});comments.mount()</script></article></main><footer class=footer><span>Copyright © 2020-2025 Zhang Ranrui. All Rights Reserved.</span><br>·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");if(menu){const e=localStorage.getItem("menu-scroll-position");e&&(menu.scrollLeft=parseInt(e,10)),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}}document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script></body></html>